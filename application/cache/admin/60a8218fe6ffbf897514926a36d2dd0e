
<div id="viewTools">
	<button data-role="submit" class="btn btn-primary" ng-click="save()" ng-disabled="editForm.$invalid">Enregistrer<i class="fa fa-check-circle"></i></button>
	<a data-role="cancel" class="btn btn-default" href="#/news/list">Annuler<i class="fa fa-reply"></i></a>
	<button data-role="delete" ng-hide="item.name == 'home' || mode == 'new'" class="btn btn-danger" ng-click="delete()">Supprimer<i class="fa fa-trash-o"></i></button>
	<span ng-hide="mode == 'new'">
		<button ng-show="statut == 'pending' || statut == 'draft'" ng-click="pushOnline()" class="btn btn-success">Mettre en ligne <i class="fa fa-upload"></i></button>
		<button ng-show="statut == 'online'" ng-click="pushOffline()" class="btn btn-danger">Archiver <i class="fa fa-archive"></i></button>
	</span>
	<span id="mainAlert">{{alert}}</span>
</div>


<div>
	<h1>News: #{{item.id}} {{item.title}}</h1>
	<hr>

	<div class="row">
		<div class="col-md-9">
			<div error-sumary></div>
			<form name="editForm" class="form form-horizontal">

				<tabset>
					<tab>
						<tab-heading>
							<i class="fa fa-pencil fa-fw"></i>&nbsp;&nbsp;<strong>News</strong>
						</tab-heading>
						<div class="row">
							<div class="col-md-6">
								<h3>Titre</h3>
								<hr />

								<div class="form-group">
									<label class="control-label col-xs-2" for"inputDbTitle">Titre</label>
									<div class="col-xs-8">
										<input type="text" name="title" value="" id="item_title" ng-model="item.title" ng-maxlength="80" data-required="true"  /><div class="label label-danger" ng-show="editForm.title.$error.required && editForm.title.$dirty">Ce champ est requis</div><div class="label label-danger" ng-show="editForm.title.$error.maxlength">Max. 80 caractères.</div>									</div>
								</div>

								<div class="form-group">
									<label class="control-label col-xs-2" for"inputIcon">Icone</label>
									<div class="col-xs-8">
																				<span icons-picker ng-model="item.icon"></span>
									</div>
								</div>

							</div>
							<div class="col-md-6">
								
								<h3>Publication</h3>
								<hr />

								<div class="form-group">
									<label class="control-label col-xs-4">Catégorie</label>
									<div class="col-md-8">
										<select name="parent_id" ng-model="item.parent_id">
											<option ng-repeat="category in categories" ng-selected="category.id === item.parent_id" ng-value="category.id">{{category.name}}</option>
										</select>
									</div>
									
								</div>

								<div class="form-group">
									<label class="control-label col-sm-4">Langue</label>
									<div class="controls col-sm-8">
										<select name="lang" ui-select2 ng-model="item.lang">
<option value="fr">fr</option>
<option value="en">en</option>
</select><div class="label label-danger" ng-show="editForm.lang.$error.required && editForm.lang.$dirty">Ce champ est requis</div><div class="label label-danger" ng-show="editForm.lang.$error.maxlength">Max. 2 caractères.</div>									</div>
								</div>
								
								<div class="form-group">
									<label class="control-label col-xs-4" for"inputDbTitle">Date de publication</label>
									<div class="col-xs-6">
										<input type="text" class="form-control" datepicker-popup="dd-MM-yyyy" ng-model="item.published_on" is-open="opened" min="minDate" />
									</div>
								</div>

								<div class="form-group">
									<label class="control-label col-xs-4" for"inputDbTitle">Date d'archivage</label>
									<div class="col-xs-6">
										<input type="text" class="form-control" datepicker-popup="dd-MM-yyyy" ng-model="item.archived_on" is-open="opened2" min="minDate" />
									</div>
								</div>		

							</div>
						</div>

						<h3>Contenu</h3>
						<hr />

						<div class="row">
							<div class="col-md-4">
								<div image-upload config="uploader" item="item.src" ></div>
							</div>
							<div class="col-md-8">
								<div class="control-group">
									<label class="control-label" for"inputResume">Résumé</label>
									<div class="controls">
										<textarea name="resume" cols="40" rows="3" id="item_resume" ng-model="item.resume" ng-maxlength="300" ></textarea><div class="label label-danger" ng-show="editForm.resume.$error.maxlength">Max. 300 caractères.</div>									</div>
								</div>
								<div class="control-group">
								<label class="control-label" for"inputDbContent_1">Contenu</label>
								<div class="controls">
									<div ng-if="item || mode == 'new' ">
										<textarea name="content" cols="40" rows="10" id="item_content" ng-model="item.content" ng-maxlength="10000" data-required="true" ui-tinymce="tinymceOptions" ></textarea><div class="label label-danger" ng-show="editForm.content.$error.required && editForm.content.$dirty">Ce champ est requis</div><div class="label label-danger" ng-show="editForm.content.$error.maxlength">Max. 10000 caractères.</div>									</div>
								</div>
							</div>	
							</div>
						</div>
					</tab>

					<tab>
						<tab-heading>
							<i class="fa fa-picture-o fa-fw"></i>&nbsp;&nbsp;<strong>Gallerie</strong>
						</tab-heading>

						<h2>Gallerie d'images</h2>
						<div ng-if="item.id" assets-list-modal></div>
					</tab>
				</tabset>
			</form>

		</div>

		<div class="col-md-2 col-md-offset-1">
			<aside id="edit-aside" class="well" ng-if="item.created_on">
				<p><strong>Statut :</strong> {{statut}}</p>
				<strong>Crée le :</strong> {{item.created_on}} <br />
				<strong>Par : </strong><manager-user-infos userid="item.created_by" ></manager-user-infos>

				<div ng-if="item.modified_by">
					<strong>Modifié le : </strong> {{item.modified_on}} <br />
					<strong>Par : </strong><manager-user-infos userid="item.modified_by" ></manager-user-infos>
				</div>
			</aside>

			<div class="panel panel-default">
				<div class="panel-heading">
					Meta
				</div>
				<div class="panel-body">
					<label>Keywords</label>
										<input
						id="page_keywords"
					    type="hidden"
					    ui-select2="select2Tags"
					    ng-model="item.meta_keywords"
					    ng-if="select2Tags.tags && item"
					    >
				</div>
			</div>

		</div>
	</div>
</div>