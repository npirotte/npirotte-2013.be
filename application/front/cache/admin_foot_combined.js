
(function(window,angular,undefined){'use strict';var ngRouteModule=angular.module('ngRoute',['ng']).provider('$route',$RouteProvider);function $RouteProvider(){function inherit(parent,extra){return angular.extend(new(angular.extend(function(){},{prototype:parent}))(),extra);}
var routes={};this.when=function(path,route){routes[path]=angular.extend({reloadOnSearch:true},route,path&&pathRegExp(path,route));if(path){var redirectPath=(path[path.length-1]=='/')?path.substr(0,path.length-1):path+'/';routes[redirectPath]=angular.extend({redirectTo:path},pathRegExp(redirectPath,route));}
return this;};function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];path=path.replace(/([().])/g,'\\$1').replace(/(\/)?:(\w+)([\?|\*])?/g,function(_,slash,key,option){var optional=option==='?'?option:null;var star=option==='*'?option:null;keys.push({name:key,optional:!!optional});slash=slash||'';return''
+(optional?'':slash)
+'(?:'
+(optional?slash:'')
+(star&&'(.+?)'||'([^/]+)')
+(optional||'')
+')'
+(optional||'');}).replace(/([\/$\*])/g,'\\$1');ret.regexp=new RegExp('^'+path+'$',insensitive?'i':'');return ret;}
this.otherwise=function(params){this.when(null,params);return this;};this.$get=['$rootScope','$location','$routeParams','$q','$injector','$http','$templateCache','$sce',function($rootScope,$location,$routeParams,$q,$injector,$http,$templateCache,$sce){var forceReload=false,$route={routes:routes,reload:function(){forceReload=true;$rootScope.$evalAsync(updateRoute);}};$rootScope.$on('$locationChangeSuccess',updateRoute);return $route;function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;i<len;++i){var key=keys[i-1];var val='string'==typeof m[i]?decodeURIComponent(m[i]):m[i];if(key&&val){params[key.name]=val;}}
return params;}
function updateRoute(){var next=parseRoute(),last=$route.current;if(next&&last&&next.$$route===last.$$route&&angular.equals(next.pathParams,last.pathParams)&&!next.reloadOnSearch&&!forceReload){last.params=next.params;angular.copy(last.params,$routeParams);$rootScope.$broadcast('$routeUpdate',last);}else if(next||last){forceReload=false;$rootScope.$broadcast('$routeChangeStart',next,last);$route.current=next;if(next){if(next.redirectTo){if(angular.isString(next.redirectTo)){$location.path(interpolate(next.redirectTo,next.params)).search(next.params).replace();}else{$location.url(next.redirectTo(next.pathParams,$location.path(),$location.search())).replace();}}}
$q.when(next).then(function(){if(next){var locals=angular.extend({},next.resolve),template,templateUrl;angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value);});if(angular.isDefined(template=next.template)){if(angular.isFunction(template)){template=template(next.params);}}else if(angular.isDefined(templateUrl=next.templateUrl)){if(angular.isFunction(templateUrl)){templateUrl=templateUrl(next.params);}
templateUrl=$sce.getTrustedResourceUrl(templateUrl);if(angular.isDefined(templateUrl)){next.loadedTemplateUrl=templateUrl;template=$http.get(templateUrl,{cache:$templateCache}).then(function(response){return response.data;});}}
if(angular.isDefined(template)){locals['$template']=template;}
return $q.all(locals);}}).then(function(locals){if(next==$route.current){if(next){next.locals=locals;angular.copy(next.params,$routeParams);}
$rootScope.$broadcast('$routeChangeSuccess',next,last);}},function(error){if(next==$route.current){$rootScope.$broadcast('$routeChangeError',next,last,error);}});}}
function parseRoute(){var params,match;angular.forEach(routes,function(route,path){if(!match&&(params=switchRouteMatcher($location.path(),route))){match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params});match.$$route=route;}});return match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}});}
function interpolate(string,params){var result=[];angular.forEach((string||'').split(':'),function(segment,i){if(i===0){result.push(segment);}else{var segmentMatch=segment.match(/(\w+)(.*)/);var key=segmentMatch[1];result.push(params[key]);result.push(segmentMatch[2]||'');delete params[key];}});return result.join('');}}];}
ngRouteModule.provider('$routeParams',$RouteParamsProvider);function $RouteParamsProvider(){this.$get=function(){return{};};}
ngRouteModule.directive('ngView',ngViewFactory);ngViewFactory.$inject=['$route','$anchorScroll','$compile','$controller','$animate'];function ngViewFactory($route,$anchorScroll,$compile,$controller,$animate){return{restrict:'ECA',terminal:true,priority:400,transclude:'element',link:function(scope,$element,attr,ctrl,$transclude){var currentScope,currentElement,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||'';scope.$on('$routeChangeSuccess',update);update();function cleanupLastView(){if(currentScope){currentScope.$destroy();currentScope=null;}
if(currentElement){$animate.leave(currentElement);currentElement=null;}}
function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(template){var newScope=scope.$new();var clone=$transclude(newScope,angular.noop);clone.html(template);$animate.enter(clone,null,currentElement||$element,function onNgViewEnter(){if(angular.isDefined(autoScrollExp)&&(!autoScrollExp||scope.$eval(autoScrollExp))){$anchorScroll();}});cleanupLastView();var link=$compile(clone.contents()),current=$route.current;currentScope=current.scope=newScope;currentElement=clone;if(current.controller){locals.$scope=currentScope;var controller=$controller(current.controller,locals);if(current.controllerAs){currentScope[current.controllerAs]=controller;}
clone.data('$ngControllerController',controller);clone.children().data('$ngControllerController',controller);}
link(currentScope);currentScope.$emit('$viewContentLoaded');currentScope.$eval(onloadExp);}else{cleanupLastView();}}}};}})(window,window.angular);(function(window,angular,undefined){'use strict';var $sanitizeMinErr=angular.$$minErr('$sanitize');function $SanitizeProvider(){this.$get=['$$sanitizeUri',function($$sanitizeUri){return function(html){var buf=[];htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage));}));return buf.join('');};}];}
function sanitizeText(chars){var buf=[];var writer=htmlSanitizeWriter(buf,angular.noop);writer.chars(chars);return buf.join('');}
var START_TAG_REGEXP=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,END_TAG_REGEXP=/^<\s*\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\s*\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g;var voidElements=makeMap("area,br,col,hr,img,wbr");var optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements);var blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,"+"aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,"+"h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul"));var inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,"+"bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,"+"samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var specialElements=makeMap("script,style");var validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements);var uriAttrs=makeMap("background,cite,href,longdesc,src,usemap");var validAttrs=angular.extend({},uriAttrs,makeMap('abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,'+'color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,'+'ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,'+'scope,scrolling,shape,span,start,summary,target,title,type,'+'valign,value,vspace,width'));function makeMap(str){var obj={},items=str.split(','),i;for(i=0;i<items.length;i++)obj[items[i]]=true;return obj;}
function htmlParser(html,handler){var index,chars,match,stack=[],last=html;stack.last=function(){return stack[stack.length-1];};while(html){chars=true;if(!stack.last()||!specialElements[stack.last()]){if(html.indexOf("<!--")===0){index=html.indexOf("--",4);if(index>=0&&html.lastIndexOf("-->",index)===index){if(handler.comment)handler.comment(html.substring(4,index));html=html.substring(index+3);chars=false;}}else if(DOCTYPE_REGEXP.test(html)){match=html.match(DOCTYPE_REGEXP);if(match){html=html.replace(match[0],'');chars=false;}}else if(BEGING_END_TAGE_REGEXP.test(html)){match=html.match(END_TAG_REGEXP);if(match){html=html.substring(match[0].length);match[0].replace(END_TAG_REGEXP,parseEndTag);chars=false;}}else if(BEGIN_TAG_REGEXP.test(html)){match=html.match(START_TAG_REGEXP);if(match){html=html.substring(match[0].length);match[0].replace(START_TAG_REGEXP,parseStartTag);chars=false;}}
if(chars){index=html.indexOf("<");var text=index<0?html:html.substring(0,index);html=index<0?"":html.substring(index);if(handler.chars)handler.chars(decodeEntities(text));}}else{html=html.replace(new RegExp("(.*)<\\s*\\/\\s*"+stack.last()+"[^>]*>",'i'),function(all,text){text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1");if(handler.chars)handler.chars(decodeEntities(text));return"";});parseEndTag("",stack.last());}
if(html==last){throw $sanitizeMinErr('badparse',"The sanitizer was unable to parse the following block "+"of html: {0}",html);}
last=html;}
parseEndTag();function parseStartTag(tag,tagName,rest,unary){tagName=angular.lowercase(tagName);if(blockElements[tagName]){while(stack.last()&&inlineElements[stack.last()]){parseEndTag("",stack.last());}}
if(optionalEndTagElements[tagName]&&stack.last()==tagName){parseEndTag("",tagName);}
unary=voidElements[tagName]||!!unary;if(!unary)
stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||'';attrs[name]=decodeEntities(value);});if(handler.start)handler.start(tagName,attrs,unary);}
function parseEndTag(tag,tagName){var pos=0,i;tagName=angular.lowercase(tagName);if(tagName)
for(pos=stack.length-1;pos>=0;pos--)
if(stack[pos]==tagName)
break;if(pos>=0){for(i=stack.length-1;i>=pos;i--)
if(handler.end)handler.end(stack[i]);stack.length=pos;}}}
var hiddenPre=document.createElement("pre");function decodeEntities(value){if(!value){return'';}
var spaceRe=/^(\s*)([\s\S]*?)(\s*)$/;var parts=spaceRe.exec(value);parts[0]='';if(parts[2]){hiddenPre.innerHTML=parts[2].replace(/</g,"&lt;");parts[2]=hiddenPre.innerText||hiddenPre.textContent;}
return parts.join('');}
function encodeEntities(value){return value.replace(/&/g,'&amp;').replace(NON_ALPHANUMERIC_REGEXP,function(value){return'&#'+value.charCodeAt(0)+';';}).replace(/</g,'&lt;').replace(/>/g,'&gt;');}
function htmlSanitizeWriter(buf,uriValidator){var ignore=false;var out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag);if(!ignore&&specialElements[tag]){ignore=tag;}
if(!ignore&&validElements[tag]===true){out('<');out(tag);angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key);var isImage=(tag==='img'&&lkey==='src')||(lkey==='background');if(validAttrs[lkey]===true&&(uriAttrs[lkey]!==true||uriValidator(value,isImage))){out(' ');out(key);out('="');out(encodeEntities(value));out('"');}});out(unary?'/>':'>');}},end:function(tag){tag=angular.lowercase(tag);if(!ignore&&validElements[tag]===true){out('</');out(tag);out('>');}
if(tag==ignore){ignore=false;}},chars:function(chars){if(!ignore){out(encodeEntities(chars));}}};}
angular.module('ngSanitize',[]).provider('$sanitize',$SanitizeProvider);angular.module('ngSanitize').filter('linky',['$sanitize',function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){if(!text)return text;var match;var raw=text;var html=[];var url;var i;while((match=raw.match(LINKY_URL_REGEXP))){url=match[0];if(match[2]==match[3])url='mailto:'+url;i=match.index;addText(raw.substr(0,i));addLink(url,match[0].replace(MAILTO_REGEXP,''));raw=raw.substring(i+match[0].length);}
addText(raw);return $sanitize(html.join(''));function addText(text){if(!text){return;}
html.push(sanitizeText(text));}
function addLink(url,text){html.push('<a ');if(angular.isDefined(target)){html.push('target="');html.push(target);html.push('" ');}
html.push('href="');html.push(url);html.push('">');addText(text);html.push('</a>');}};}]);})(window,window.angular);(function(window,angular,undefined){'use strict';angular.module('ngAnimate',['ng']).config(['$provide','$animateProvider',function($provide,$animateProvider){var noop=angular.noop;var forEach=angular.forEach;var selectors=$animateProvider.$$selectors;var ELEMENT_NODE=1;var NG_ANIMATE_STATE='$$ngAnimateState';var NG_ANIMATE_CLASS_NAME='ng-animate';var rootAnimateState={running:true};$provide.decorator('$animate',['$delegate','$injector','$sniffer','$rootElement','$timeout','$rootScope','$document',function($delegate,$injector,$sniffer,$rootElement,$timeout,$rootScope,$document){$rootElement.data(NG_ANIMATE_STATE,rootAnimateState);$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){rootAnimateState.running=false;});});function lookup(name){if(name){var matches=[],flagMap={},classes=name.substr(1).split('.');if($sniffer.transitions||$sniffer.animations){classes.push('');}
for(var i=0;i<classes.length;i++){var klass=classes[i],selectorFactoryName=selectors[klass];if(selectorFactoryName&&!flagMap[klass]){matches.push($injector.get(selectorFactoryName));flagMap[klass]=true;}}
return matches;}}
return{enter:function(element,parentElement,afterElement,doneCallback){this.enabled(false,element);$delegate.enter(element,parentElement,afterElement);$rootScope.$$postDigest(function(){performAnimation('enter','ng-enter',element,parentElement,afterElement,noop,doneCallback);});},leave:function(element,doneCallback){cancelChildAnimations(element);this.enabled(false,element);$rootScope.$$postDigest(function(){performAnimation('leave','ng-leave',element,null,null,function(){$delegate.leave(element);},doneCallback);});},move:function(element,parentElement,afterElement,doneCallback){cancelChildAnimations(element);this.enabled(false,element);$delegate.move(element,parentElement,afterElement);$rootScope.$$postDigest(function(){performAnimation('move','ng-move',element,parentElement,afterElement,noop,doneCallback);});},addClass:function(element,className,doneCallback){performAnimation('addClass',className,element,null,null,function(){$delegate.addClass(element,className);},doneCallback);},removeClass:function(element,className,doneCallback){performAnimation('removeClass',className,element,null,null,function(){$delegate.removeClass(element,className);},doneCallback);},enabled:function(value,element){switch(arguments.length){case 2:if(value){cleanup(element);}else{var data=element.data(NG_ANIMATE_STATE)||{};data.disabled=true;element.data(NG_ANIMATE_STATE,data);}
break;case 1:rootAnimateState.disabled=!value;break;default:value=!rootAnimateState.disabled;break;}
return!!value;}};function performAnimation(animationEvent,className,element,parentElement,afterElement,domOperation,doneCallback){var currentClassName=element.attr('class')||'';var classes=currentClassName+' '+className;var animationLookup=(' '+classes).replace(/\s+/g,'.');if(!parentElement){parentElement=afterElement?afterElement.parent():element.parent();}
var matches=lookup(animationLookup);var isClassBased=animationEvent=='addClass'||animationEvent=='removeClass';var ngAnimateState=element.data(NG_ANIMATE_STATE)||{};if(animationsDisabled(element,parentElement)||matches.length===0){fireDOMOperation();closeAnimation();return;}
var animations=[];if(!ngAnimateState.running||!(isClassBased&&ngAnimateState.structural)){forEach(matches,function(animation){if(!animation.allowCancel||animation.allowCancel(element,animationEvent,className)){var beforeFn,afterFn=animation[animationEvent];if(animationEvent=='leave'){beforeFn=afterFn;afterFn=null;}else{beforeFn=animation['before'+animationEvent.charAt(0).toUpperCase()+animationEvent.substr(1)];}
animations.push({before:beforeFn,after:afterFn});}});}
if(animations.length===0){fireDOMOperation();fireDoneCallbackAsync();return;}
var futureClassName=' '+currentClassName+' ';if(ngAnimateState.running){$timeout.cancel(ngAnimateState.closeAnimationTimeout);cleanup(element);cancelAnimations(ngAnimateState.animations);if(ngAnimateState.beforeComplete){(ngAnimateState.done||noop)(true);}else if(isClassBased&&!ngAnimateState.structural){futureClassName=ngAnimateState.event=='removeClass'?futureClassName.replace(ngAnimateState.className,''):futureClassName+ngAnimateState.className+' ';}}
var classNameToken=' '+className+' ';if((animationEvent=='addClass'&&futureClassName.indexOf(classNameToken)>=0)||(animationEvent=='removeClass'&&futureClassName.indexOf(classNameToken)==-1)){fireDOMOperation();fireDoneCallbackAsync();return;}
element.addClass(NG_ANIMATE_CLASS_NAME);element.data(NG_ANIMATE_STATE,{running:true,event:animationEvent,className:className,structural:!isClassBased,animations:animations,done:onBeforeAnimationsComplete});invokeRegisteredAnimationFns(animations,'before',onBeforeAnimationsComplete);function onBeforeAnimationsComplete(cancelled){fireDOMOperation();if(cancelled===true){closeAnimation();return;}
var data=element.data(NG_ANIMATE_STATE);if(data){data.done=closeAnimation;element.data(NG_ANIMATE_STATE,data);}
invokeRegisteredAnimationFns(animations,'after',closeAnimation);}
function invokeRegisteredAnimationFns(animations,phase,allAnimationFnsComplete){var endFnName=phase+'End';forEach(animations,function(animation,index){var animationPhaseCompleted=function(){progress(index,phase);};if(phase=='before'&&(animationEvent=='enter'||animationEvent=='move')){animationPhaseCompleted();return;}
if(animation[phase]){animation[endFnName]=isClassBased?animation[phase](element,className,animationPhaseCompleted):animation[phase](element,animationPhaseCompleted);}else{animationPhaseCompleted();}});function progress(index,phase){var phaseCompletionFlag=phase+'Complete';var currentAnimation=animations[index];currentAnimation[phaseCompletionFlag]=true;(currentAnimation[endFnName]||noop)();for(var i=0;i<animations.length;i++){if(!animations[i][phaseCompletionFlag])return;}
allAnimationFnsComplete();}}
function fireDoneCallbackAsync(){doneCallback&&$timeout(doneCallback,0,false);}
function fireDOMOperation(){if(!fireDOMOperation.hasBeenRun){fireDOMOperation.hasBeenRun=true;domOperation();}}
function closeAnimation(){if(!closeAnimation.hasBeenRun){closeAnimation.hasBeenRun=true;var data=element.data(NG_ANIMATE_STATE);if(data){if(isClassBased){cleanup(element);}else{data.closeAnimationTimeout=$timeout(function(){cleanup(element);},0,false);element.data(NG_ANIMATE_STATE,data);}}
fireDoneCallbackAsync();}}}
function cancelChildAnimations(element){var node=element[0];if(node.nodeType!=ELEMENT_NODE){return;}
forEach(node.querySelectorAll('.'+NG_ANIMATE_CLASS_NAME),function(element){element=angular.element(element);var data=element.data(NG_ANIMATE_STATE);if(data){cancelAnimations(data.animations);cleanup(element);}});}
function cancelAnimations(animations){var isCancelledFlag=true;forEach(animations,function(animation){if(!animations.beforeComplete){(animation.beforeEnd||noop)(isCancelledFlag);}
if(!animations.afterComplete){(animation.afterEnd||noop)(isCancelledFlag);}});}
function cleanup(element){if(element[0]==$rootElement[0]){if(!rootAnimateState.disabled){rootAnimateState.running=false;rootAnimateState.structural=false;}}else{element.removeClass(NG_ANIMATE_CLASS_NAME);element.removeData(NG_ANIMATE_STATE);}}
function animationsDisabled(element,parentElement){if(rootAnimateState.disabled)return true;if(element[0]==$rootElement[0]){return rootAnimateState.disabled||rootAnimateState.running;}
do{if(parentElement.length===0)break;var isRoot=parentElement[0]==$rootElement[0];var state=isRoot?rootAnimateState:parentElement.data(NG_ANIMATE_STATE);var result=state&&(!!state.disabled||!!state.running);if(isRoot||result){return result;}
if(isRoot)return true;}
while(parentElement=parentElement.parent());return true;}}]);$animateProvider.register('',['$window','$sniffer','$timeout',function($window,$sniffer,$timeout){var CSS_PREFIX='',TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT;if(window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined){CSS_PREFIX='-webkit-';TRANSITION_PROP='WebkitTransition';TRANSITIONEND_EVENT='webkitTransitionEnd transitionend';}else{TRANSITION_PROP='transition';TRANSITIONEND_EVENT='transitionend';}
if(window.onanimationend===undefined&&window.onwebkitanimationend!==undefined){CSS_PREFIX='-webkit-';ANIMATION_PROP='WebkitAnimation';ANIMATIONEND_EVENT='webkitAnimationEnd animationend';}else{ANIMATION_PROP='animation';ANIMATIONEND_EVENT='animationend';}
var DURATION_KEY='Duration';var PROPERTY_KEY='Property';var DELAY_KEY='Delay';var ANIMATION_ITERATION_COUNT_KEY='IterationCount';var NG_ANIMATE_PARENT_KEY='$$ngAnimateKey';var NG_ANIMATE_CSS_DATA_KEY='$$ngAnimateCSS3Data';var NG_ANIMATE_FALLBACK_CLASS_NAME='ng-animate-start';var NG_ANIMATE_FALLBACK_ACTIVE_CLASS_NAME='ng-animate-active';var lookupCache={};var parentCounter=0;var animationReflowQueue=[],animationTimer,timeOut=false;function afterReflow(callback){animationReflowQueue.push(callback);$timeout.cancel(animationTimer);animationTimer=$timeout(function(){forEach(animationReflowQueue,function(fn){fn();});animationReflowQueue=[];animationTimer=null;lookupCache={};},10,false);}
function getElementAnimationDetails(element,cacheKey){var data=cacheKey?lookupCache[cacheKey]:null;if(!data){var transitionDuration=0;var transitionDelay=0;var animationDuration=0;var animationDelay=0;var transitionDelayStyle;var animationDelayStyle;var transitionDurationStyle;var transitionPropertyStyle;forEach(element,function(element){if(element.nodeType==ELEMENT_NODE){var elementStyles=$window.getComputedStyle(element)||{};transitionDurationStyle=elementStyles[TRANSITION_PROP+DURATION_KEY];transitionDuration=Math.max(parseMaxTime(transitionDurationStyle),transitionDuration);transitionPropertyStyle=elementStyles[TRANSITION_PROP+PROPERTY_KEY];transitionDelayStyle=elementStyles[TRANSITION_PROP+DELAY_KEY];transitionDelay=Math.max(parseMaxTime(transitionDelayStyle),transitionDelay);animationDelayStyle=elementStyles[ANIMATION_PROP+DELAY_KEY];animationDelay=Math.max(parseMaxTime(animationDelayStyle),animationDelay);var aDuration=parseMaxTime(elementStyles[ANIMATION_PROP+DURATION_KEY]);if(aDuration>0){aDuration*=parseInt(elementStyles[ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY],10)||1;}
animationDuration=Math.max(aDuration,animationDuration);}});data={total:0,transitionPropertyStyle:transitionPropertyStyle,transitionDurationStyle:transitionDurationStyle,transitionDelayStyle:transitionDelayStyle,transitionDelay:transitionDelay,transitionDuration:transitionDuration,animationDelayStyle:animationDelayStyle,animationDelay:animationDelay,animationDuration:animationDuration};if(cacheKey){lookupCache[cacheKey]=data;}}
return data;}
function parseMaxTime(str){var maxValue=0;var values=angular.isString(str)?str.split(/\s*,\s*/):[];forEach(values,function(value){maxValue=Math.max(parseFloat(value)||0,maxValue);});return maxValue;}
function getCacheKey(element){var parentElement=element.parent();var parentID=parentElement.data(NG_ANIMATE_PARENT_KEY);if(!parentID){parentElement.data(NG_ANIMATE_PARENT_KEY,++parentCounter);parentID=parentCounter;}
return parentID+'-'+element[0].className;}
function animateSetup(element,className){var cacheKey=getCacheKey(element);var eventCacheKey=cacheKey+' '+className;var stagger={};var ii=lookupCache[eventCacheKey]?++lookupCache[eventCacheKey].total:0;if(ii>0){var staggerClassName=className+'-stagger';var staggerCacheKey=cacheKey+' '+staggerClassName;var applyClasses=!lookupCache[staggerCacheKey];applyClasses&&element.addClass(staggerClassName);stagger=getElementAnimationDetails(element,staggerCacheKey);applyClasses&&element.removeClass(staggerClassName);}
element.addClass(className);var timings=getElementAnimationDetails(element,eventCacheKey);var maxDuration=Math.max(timings.transitionDuration,timings.animationDuration);if(maxDuration===0){element.removeClass(className);return false;}
var node=element[0];var activeClassName='';if(timings.transitionDuration>0){element.addClass(NG_ANIMATE_FALLBACK_CLASS_NAME);activeClassName+=NG_ANIMATE_FALLBACK_ACTIVE_CLASS_NAME+' ';blockTransitions(element);}else{blockKeyframeAnimations(element);}
forEach(className.split(' '),function(klass,i){activeClassName+=(i>0?' ':'')+klass+'-active';});element.data(NG_ANIMATE_CSS_DATA_KEY,{className:className,activeClassName:activeClassName,maxDuration:maxDuration,classes:className+' '+activeClassName,timings:timings,stagger:stagger,ii:ii});return true;}
function blockTransitions(element){element[0].style[TRANSITION_PROP+PROPERTY_KEY]='none';}
function blockKeyframeAnimations(element){element[0].style[ANIMATION_PROP]='none 0s';}
function unblockTransitions(element){var node=element[0],prop=TRANSITION_PROP+PROPERTY_KEY;if(node.style[prop]&&node.style[prop].length>0){node.style[prop]='';}}
function unblockKeyframeAnimations(element){var node=element[0],prop=ANIMATION_PROP;if(node.style[prop]&&node.style[prop].length>0){element[0].style[prop]='';}}
function animateRun(element,className,activeAnimationComplete){var data=element.data(NG_ANIMATE_CSS_DATA_KEY);if(!element.hasClass(className)||!data){activeAnimationComplete();return;}
var node=element[0];var timings=data.timings;var stagger=data.stagger;var maxDuration=data.maxDuration;var activeClassName=data.activeClassName;var maxDelayTime=Math.max(timings.transitionDelay,timings.animationDelay)*1000;var startTime=Date.now();var css3AnimationEvents=ANIMATIONEND_EVENT+' '+TRANSITIONEND_EVENT;var ii=data.ii;var applyFallbackStyle,style='',appliedStyles=[];if(timings.transitionDuration>0){var propertyStyle=timings.transitionPropertyStyle;if(propertyStyle.indexOf('all')==-1){applyFallbackStyle=true;var fallbackProperty=$sniffer.msie?'-ms-zoom':'border-spacing';style+=CSS_PREFIX+'transition-property: '+propertyStyle+', '+fallbackProperty+'; ';style+=CSS_PREFIX+'transition-duration: '+timings.transitionDurationStyle+', '+timings.transitionDuration+'s; ';appliedStyles.push(CSS_PREFIX+'transition-property');appliedStyles.push(CSS_PREFIX+'transition-duration');}}
if(ii>0){if(stagger.transitionDelay>0&&stagger.transitionDuration===0){var delayStyle=timings.transitionDelayStyle;if(applyFallbackStyle){delayStyle+=', '+timings.transitionDelay+'s';}
style+=CSS_PREFIX+'transition-delay: '+
prepareStaggerDelay(delayStyle,stagger.transitionDelay,ii)+'; ';appliedStyles.push(CSS_PREFIX+'transition-delay');}
if(stagger.animationDelay>0&&stagger.animationDuration===0){style+=CSS_PREFIX+'animation-delay: '+
prepareStaggerDelay(timings.animationDelayStyle,stagger.animationDelay,ii)+'; ';appliedStyles.push(CSS_PREFIX+'animation-delay');}}
if(appliedStyles.length>0){var oldStyle=node.getAttribute('style')||'';node.setAttribute('style',oldStyle+' '+style);}
element.on(css3AnimationEvents,onAnimationProgress);element.addClass(activeClassName);return function onEnd(cancelled){element.off(css3AnimationEvents,onAnimationProgress);element.removeClass(activeClassName);animateClose(element,className);for(var i in appliedStyles){node.style.removeProperty(appliedStyles[i]);}};function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event;var timeStamp=ev.$manualTimeStamp||ev.timeStamp||Date.now();if(Math.max(timeStamp-startTime,0)>=maxDelayTime&&ev.elapsedTime>=maxDuration){activeAnimationComplete();}}}
function prepareStaggerDelay(delayStyle,staggerDelay,index){var style='';forEach(delayStyle.split(','),function(val,i){style+=(i>0?',':'')+
(index*staggerDelay+parseInt(val,10))+'s';});return style;}
function animateBefore(element,className){if(animateSetup(element,className)){return function(cancelled){cancelled&&animateClose(element,className);};}}
function animateAfter(element,className,afterAnimationComplete){if(element.data(NG_ANIMATE_CSS_DATA_KEY)){return animateRun(element,className,afterAnimationComplete);}else{animateClose(element,className);afterAnimationComplete();}}
function animate(element,className,animationComplete){var preReflowCancellation=animateBefore(element,className);if(!preReflowCancellation){animationComplete();return;}
var cancel=preReflowCancellation;afterReflow(function(){unblockTransitions(element);unblockKeyframeAnimations(element);cancel=animateAfter(element,className,animationComplete);});return function(cancelled){(cancel||noop)(cancelled);};}
function animateClose(element,className){element.removeClass(className);element.removeClass(NG_ANIMATE_FALLBACK_CLASS_NAME);element.removeData(NG_ANIMATE_CSS_DATA_KEY);}
return{allowCancel:function(element,animationEvent,className){var oldClasses=(element.data(NG_ANIMATE_CSS_DATA_KEY)||{}).classes;if(!oldClasses||['enter','leave','move'].indexOf(animationEvent)>=0){return true;}
var parentElement=element.parent();var clone=angular.element(element[0].cloneNode());clone.attr('style','position:absolute; top:-9999px; left:-9999px');clone.removeAttr('id');clone.html('');forEach(oldClasses.split(' '),function(klass){clone.removeClass(klass);});var suffix=animationEvent=='addClass'?'-add':'-remove';clone.addClass(suffixClasses(className,suffix));parentElement.append(clone);var timings=getElementAnimationDetails(clone);clone.remove();return Math.max(timings.transitionDuration,timings.animationDuration)>0;},enter:function(element,animationCompleted){return animate(element,'ng-enter',animationCompleted);},leave:function(element,animationCompleted){return animate(element,'ng-leave',animationCompleted);},move:function(element,animationCompleted){return animate(element,'ng-move',animationCompleted);},beforeAddClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore(element,suffixClasses(className,'-add'));if(cancellationMethod){afterReflow(function(){unblockTransitions(element);unblockKeyframeAnimations(element);animationCompleted();});return cancellationMethod;}
animationCompleted();},addClass:function(element,className,animationCompleted){return animateAfter(element,suffixClasses(className,'-add'),animationCompleted);},beforeRemoveClass:function(element,className,animationCompleted){var cancellationMethod=animateBefore(element,suffixClasses(className,'-remove'));if(cancellationMethod){afterReflow(function(){unblockTransitions(element);unblockKeyframeAnimations(element);animationCompleted();});return cancellationMethod;}
animationCompleted();},removeClass:function(element,className,animationCompleted){return animateAfter(element,suffixClasses(className,'-remove'),animationCompleted);}};function suffixClasses(classes,suffix){var className='';classes=angular.isArray(classes)?classes:classes.split(/\s+/);forEach(classes,function(klass,i){if(klass&&klass.length>0){className+=(i>0?' ':'')+klass+suffix;}});return className;}}]);}]);})(window,window.angular);(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var
push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else{root._=_;}
_.VERSION='1.6.0';var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return obj;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(obj.length===+obj.length){for(var i=0,length=obj.length;i<length;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return;}}else{var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return;}}
return obj;};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list));});return results;};var reduceError='Reduce of empty array with no initial value';_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator);}
each(obj,function(value,index,list){if(!initial){memo=value;initial=true;}else{memo=iterator.call(context,memo,value,index,list);}});if(!initial)throw new TypeError(reduceError);return memo;};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);}
var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length;}
each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true;}else{memo=iterator.call(context,memo,obj[index],index,list);}});if(!initial)throw new TypeError(reduceError);return memo;};_.find=_.detect=function(obj,predicate,context){var result;any(obj,function(value,index,list){if(predicate.call(context,value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,predicate,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(predicate,context);each(obj,function(value,index,list){if(predicate.call(context,value,index,list))results.push(value);});return results;};_.reject=function(obj,predicate,context){return _.filter(obj,function(value,index,list){return!predicate.call(context,value,index,list);},context);};_.every=_.all=function(obj,predicate,context){predicate||(predicate=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(predicate,context);each(obj,function(value,index,list){if(!(result=result&&predicate.call(context,value,index,list)))return breaker;});return!!result;};var any=_.some=_.any=function(obj,predicate,context){predicate||(predicate=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(predicate,context);each(obj,function(value,index,list){if(result||(result=predicate.call(context,value,index,list)))return breaker;});return!!result;};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target;});};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,_.property(key));};_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs));};_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs));};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj);}
var result=-Infinity,lastComputed=-Infinity;each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(computed>lastComputed){result=value;lastComputed=computed;}});return result;};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj);}
var result=Infinity,lastComputed=Infinity;each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;if(computed<lastComputed){result=value;lastComputed=computed;}});return result;};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value;});return shuffled;};_.sample=function(obj,n,guard){if(n==null||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)];}
return _.shuffle(obj).slice(0,Math.max(0,n));};var lookupIterator=function(value){if(value==null)return _.identity;if(_.isFunction(value))return value;return _.property(value);};_.sortBy=function(obj,iterator,context){iterator=lookupIterator(iterator);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)};}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1;}
return left.index-right.index;}),'value');};var group=function(behavior){return function(obj,iterator,context){var result={};iterator=lookupIterator(iterator);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value);});return result;};};_.groupBy=group(function(result,key,value){_.has(result,key)?result[key].push(value):result[key]=[value];});_.indexBy=group(function(result,key,value){result[key]=value;});_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1;});_.sortedIndex=function(array,obj,iterator,context){iterator=lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=(low+high)>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid;}
return low;};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj);};_.size=function(obj){if(obj==null)return 0;return(obj.length===+obj.length)?obj.length:_.keys(obj).length;};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if((n==null)||guard)return array[0];if(n<0)return[];return slice.call(array,0,n);};_.initial=function(array,n,guard){return slice.call(array,0,array.length-((n==null)||guard?1:n));};_.last=function(array,n,guard){if(array==null)return void 0;if((n==null)||guard)return array[array.length-1];return slice.call(array,Math.max(array.length-n,0));};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,(n==null)||guard?1:n);};_.compact=function(array){return _.filter(array,_.identity);};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input);}
each(input,function(value){if(_.isArray(value)||_.isArguments(value)){shallow?push.apply(output,value):flatten(value,shallow,output);}else{output.push(value);}});return output;};_.flatten=function(array,shallow){return flatten(array,shallow,[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.partition=function(array,predicate){var pass=[],fail=[];each(array,function(elem){(predicate(elem)?pass:fail).push(elem);});return[pass,fail];};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false;}
var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?(!index||seen[seen.length-1]!==value):!_.contains(seen,value)){seen.push(value);results.push(array[index]);}});return results;};_.union=function(){return _.uniq(_.flatten(arguments,true));};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.contains(other,item);});});};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value);});};_.zip=function(){var length=_.max(_.pluck(arguments,'length').concat(0));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,''+i);}
return results;};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++){if(values){result[list[i]]=values[i];}else{result[list[i][0]]=list[i][1];}}
return result;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted){if(typeof isSorted=='number'){i=(isSorted<0?Math.max(0,length+isSorted):isSorted);}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1;}}
if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<length;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);}
var i=(hasIndex?from:array.length);while(i--)if(array[i]===item)return i;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=arguments[2]||1;var length=Math.max(Math.ceil((stop-start)/ step),0);var idx=0;var range=new Array(length);while(idx<length){range[idx++]=start;start+=step;}
return range;};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self;};};_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){var position=0;var args=boundArgs.slice();for(var i=0,length=args.length;i<length;i++){if(args[i]===_)args[i]=arguments[position++];}
while(position<arguments.length)args.push(arguments[position++]);return func.apply(this,args);};};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error('bindAll must be passed function names');each(funcs,function(f){obj[f]=_.bind(obj[f],obj);});return obj;};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments));};};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);context=args=null;};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);context=args=null;}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait){timeout=setTimeout(later,wait-last);}else{timeout=null;if(!immediate){result=func.apply(context,args);context=args=null;}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout){timeout=setTimeout(later,wait);}
if(callNow){result=func.apply(context,args);context=args=null;}
return result;};};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo;};};_.wrap=function(func,wrapper){return _.partial(wrapper,func);};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)];}
return args[0];};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys;};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=new Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]];}
return values;};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=new Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]];}
return pairs;};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i];}
return result;};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop];}}});return obj;};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key];});return copy;};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key];}
return copy;};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop];}}});return obj;};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1 / a==1 / b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case'[object String]':return a==String(b);case'[object Number]':return a!=+a?b!=+b:(a==0?1 / a==1 / b:a==+b);case'[object Date]':case'[object Boolean]':return+a==+b;case'[object RegExp]':return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase;}
if(typeof a!='object'||typeof b!='object')return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b;}
var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&(aCtor instanceof aCtor)&&_.isFunction(bCtor)&&(bCtor instanceof bCtor))&&('constructor'in a&&'constructor'in b)){return false;}
aStack.push(a);bStack.push(b);var size=0,result=true;if(className=='[object Array]'){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break;}}}else{for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break;}}
if(result){for(key in b){if(_.has(b,key)&&!(size--))break;}
result=!size;}}
aStack.pop();bStack.pop();return result;};_.isEqual=function(a,b){return eq(a,b,[],[]);};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType===1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=='[object Array]';};_.isObject=function(obj){return obj===Object(obj);};each(['Arguments','Function','String','Number','Date','RegExp'],function(name){_['is'+name]=function(obj){return toString.call(obj)=='[object '+name+']';};});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,'callee'));};}
if(typeof(/./)!=='function'){_.isFunction=function(obj){return typeof obj==='function';};}
_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj));};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=='[object Boolean]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.constant=function(value){return function(){return value;};};_.property=function(key){return function(obj){return obj[key];};};_.matches=function(attrs){return function(obj){if(obj===attrs)return true;for(var key in attrs){if(attrs[key]!==obj[key])
return false;}
return true;}};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum;};_.random=function(min,max){if(max==null){max=min;min=0;}
return min+Math.floor(Math.random()*(max-min+1));};_.now=Date.now||function(){return new Date().getTime();};var entityMap={escape:{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;'}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp('['+_.keys(entityMap.escape).join('')+']','g'),unescape:new RegExp('('+_.keys(entityMap.unescape).join('|')+')','g')};_.each(['escape','unescape'],function(method){_[method]=function(string){if(string==null)return'';return(''+string).replace(entityRegexes[method],function(match){return entityMap[method][match];});};});_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value;};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args));};});};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+'';return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'",'\\':'\\','\r':'r','\n':'n','\t':'t','\u2028':'u2028','\u2029':'u2029'};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join('|')+'|$','g');var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return'\\'+escapes[match];});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";}
if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";}
if(evaluate){source+="';\n"+evaluate+"\n__p+='";}
index=offset+match.length;return match;});source+="';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+
source+"return __p;\n";try{render=new Function(settings.variable||'obj','_',source);}catch(e){e.source=source;throw e;}
if(data)return render(data,_);var template=function(data){return render.call(this,data,_);};template.source='function('+(settings.variable||'obj')+'){\n'+source+'}';return template;};_.chain=function(obj){return _(obj).chain();};var result=function(obj){return this._chain?_(obj).chain():obj;};_.mixin(_);each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=='shift'||name=='splice')&&obj.length===0)delete obj[0];return result.call(this,obj);};});each(['concat','join','slice'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments));};});_.extend(_.prototype,{chain:function(){this._chain=true;return this;},value:function(){return this._wrapped;}});if(typeof define==='function'&&define.amd){define('underscore',[],function(){return _;});}}).call(this);(function(){'use strict';angular.module('ui.tree',[]).constant('treeConfig',{treeClass:'angular-ui-tree',emptyTreeClass:'angular-ui-tree-empty',hiddenClass:'angular-ui-tree-hidden',nodesClass:'angular-ui-tree-nodes',nodeClass:'angular-ui-tree-node',handleClass:'angular-ui-tree-handle',placeHolderClass:'angular-ui-tree-placeholder',dragClass:'angular-ui-tree-drag',dragThreshold:3,levelThreshold:30});})();(function(){'use strict';angular.module('ui.tree').factory('$uiTreeHelper',['$document','$window',function($document,$window){return{nodesData:{},setNodeAttribute:function(scope,attrName,val){var data=this.nodesData[scope.$modelValue.$$hashKey];if(!data){data={};this.nodesData[scope.$modelValue.$$hashKey]=data;}
data[attrName]=val;},getNodeAttribute:function(scope,attrName){var data=this.nodesData[scope.$modelValue.$$hashKey];if(data){return data[attrName];}
return null;},nodrag:function(targetElm){return(typeof targetElm.attr('data-nodrag'))!="undefined";},eventObj:function(e){var obj=e;if(e.targetTouches!==undefined){obj=e.targetTouches.item(0);}else if(e.originalEvent!==undefined&&e.originalEvent.targetTouches!==undefined){obj=e.originalEvent.targetTouches.item(0);}
return obj;},dragInfo:function(node){return{source:node,sourceInfo:{nodeScope:node,index:node.index(),nodesScope:node.$parentNodesScope},index:node.index(),siblings:node.siblings().slice(0),parent:node.$parentNodesScope,moveTo:function(parent,siblings,index){this.parent=parent;this.siblings=siblings.slice(0);var i=this.siblings.indexOf(this.source);if(i>-1){this.siblings.splice(i,1);if(this.source.index()<index){index--;}}
this.siblings.splice(index,0,this.source);this.index=index;},parentNode:function(){return this.parent.$nodeScope;},prev:function(){if(this.index>0){return this.siblings[this.index-1];}
return null;},next:function(){if(this.index<this.siblings.length-1){return this.siblings[this.index+1];}
return null;},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index;},eventArgs:function(elements,pos){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:elements,pos:pos};},apply:function(){var nodeData=this.source.$modelValue;this.source.remove();this.parent.insertNode(this.index,nodeData);}};},height:function(element){return element.prop('scrollHeight');},width:function(element){return element.prop('scrollWidth');},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:element.prop('offsetWidth'),height:element.prop('offsetHeight'),top:boundingClientRect.top+($window.pageYOffset||$document[0].body.scrollTop||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].body.scrollLeft||$document[0].documentElement.scrollLeft)};},positionStarted:function(e,target){var pos={};pos.offsetX=e.pageX-this.offset(target).left;pos.offsetY=e.pageY-this.offset(target).top;pos.startX=pos.lastX=e.pageX;pos.startY=pos.lastY=e.pageY;pos.nowX=pos.nowY=pos.distX=pos.distY=pos.dirAx=0;pos.dirX=pos.dirY=pos.lastDirX=pos.lastDirY=pos.distAxX=pos.distAxY=0;return pos;},positionMoved:function(e,pos,firstMoving){pos.lastX=pos.nowX;pos.lastY=pos.nowY;pos.nowX=e.pageX;pos.nowY=e.pageY;pos.distX=pos.nowX-pos.lastX;pos.distY=pos.nowY-pos.lastY;pos.lastDirX=pos.dirX;pos.lastDirY=pos.dirY;pos.dirX=pos.distX===0?0:pos.distX>0?1:-1;pos.dirY=pos.distY===0?0:pos.distY>0?1:-1;var newAx=Math.abs(pos.distX)>Math.abs(pos.distY)?1:0;if(firstMoving){pos.dirAx=newAx;pos.moving=true;return;}
if(pos.dirAx!==newAx){pos.distAxX=0;pos.distAxY=0;}else{pos.distAxX+=Math.abs(pos.distX);if(pos.dirX!==0&&pos.dirX!==pos.lastDirX){pos.distAxX=0;}
pos.distAxY+=Math.abs(pos.distY);if(pos.dirY!==0&&pos.dirY!==pos.lastDirY){pos.distAxY=0;}}
pos.dirAx=newAx;}};}]);})();(function(){'use strict';angular.module('ui.tree').controller('TreeController',['$scope','$element','$attrs','treeConfig',function($scope,$element,$attrs,treeConfig){this.scope=$scope;$scope.$element=$element;$scope.$nodesScope=null;$scope.$type='uiTree';$scope.$emptyElm=null;$scope.$callbacks=null;$scope.dragEnabled=true;$scope.maxDepth=0;$scope.dragDelay=0;$scope.isEmpty=function(){return($scope.$nodesScope&&$scope.$nodesScope.$modelValue&&$scope.$nodesScope.$modelValue.length===0);};$scope.place=function(placeElm){$scope.$nodesScope.$element.append(placeElm);$scope.$emptyElm.remove();};$scope.resetEmptyElement=function(){if($scope.$nodesScope.$modelValue.length===0){$element.append($scope.$emptyElm);}else{$scope.$emptyElm.remove();}};var collapseOrExpand=function(scope,collapsed){var nodes=scope.childNodes();for(var i=0;i<nodes.length;i++){collapsed?nodes[i].collapse():nodes[i].expand();var subScope=nodes[i].$childNodesScope;if(subScope){collapseOrExpand(subScope,collapsed);}}};$scope.collapseAll=function(){collapseOrExpand($scope.$nodesScope,true);};$scope.expandAll=function(){collapseOrExpand($scope.$nodesScope,false);};}]);})();(function(){'use strict';angular.module('ui.tree').controller('TreeNodesController',['$scope','$element','$timeout','treeConfig',function($scope,$element,$timeout,treeConfig){this.scope=$scope;$scope.$element=$element;$scope.$modelValue=null;$scope.$nodeScope=null;$scope.$treeScope=null;$scope.$type='uiTreeNodes';$scope.$nodesMap={};$scope.nodrop=false;$scope.maxDepth=0;$scope.initSubNode=function(subNode){$timeout(function(){$scope.$nodesMap[subNode.$modelValue.$$hashKey]=subNode;});};$scope.destroySubNode=function(subNode){$scope.$nodesMap[subNode.$modelValue.$$hashKey]=null;};$scope.accept=function(sourceNode,destIndex){return $scope.$treeScope.$callbacks.accept(sourceNode,$scope,destIndex);};$scope.isParent=function(node){return node.$parentNodesScope==$scope;};$scope.hasChild=function(){return $scope.$modelValue.length>0;};$scope.safeApply=function(fn){var phase=this.$root.$$phase;if(phase=='$apply'||phase=='$digest'){if(fn&&(typeof(fn)==='function')){fn();}}else{this.$apply(fn);}};$scope.removeNode=function(node){var index=$scope.$modelValue.indexOf(node.$modelValue);if(index>-1){$scope.safeApply(function(){$scope.$modelValue.splice(index,1)[0];});return node;}
return null;};$scope.insertNode=function(index,nodeData){$scope.safeApply(function(){$scope.$modelValue.splice(index,0,nodeData);});};$scope.childNodes=function(){var nodes=[];if($scope.$modelValue){for(var i=0;i<$scope.$modelValue.length;i++){nodes.push($scope.$nodesMap[$scope.$modelValue[i].$$hashKey]);}}
return nodes;};$scope.depth=function(){if($scope.$nodeScope){return $scope.$nodeScope.depth();}
return 0;};$scope.outOfDepth=function(sourceNode){var maxDepth=$scope.maxDepth||$scope.$treeScope.maxDepth;if(maxDepth>0){return $scope.depth()+sourceNode.maxSubDepth()+1>maxDepth;}
return false;};}]);})();(function(){'use strict';angular.module('ui.tree').controller('TreeNodeController',['$scope','$element','$attrs','treeConfig',function($scope,$element,$attrs,treeConfig){this.scope=$scope;$scope.$element=$element;$scope.$modelValue=null;$scope.$parentNodeScope=null;$scope.$childNodesScope=null;$scope.$parentNodesScope=null;$scope.$treeScope=null;$scope.$handleScope=null;$scope.$type='uiTreeNode';$scope.$$apply=false;$scope.collapsed=false;$scope.init=function(controllersArr){var treeNodesCtrl=controllersArr[0];$scope.$treeScope=controllersArr[1]?controllersArr[1].scope:null;$scope.$parentNodeScope=treeNodesCtrl.scope.$nodeScope;$scope.$modelValue=treeNodesCtrl.scope.$modelValue[$scope.$index];$scope.$parentNodesScope=treeNodesCtrl.scope;treeNodesCtrl.scope.initSubNode($scope);$element.on('$destroy',function(){treeNodesCtrl.scope.destroySubNode($scope);});};$scope.index=function(){return $scope.$parentNodesScope.$modelValue.indexOf($scope.$modelValue);};$scope.dragEnabled=function(){return!($scope.$treeScope&&!$scope.$treeScope.dragEnabled);};$scope.isSibling=function(targetNode){return $scope.$parentNodesScope==targetNode.$parentNodesScope;};$scope.isChild=function(targetNode){var nodes=$scope.childNodes();return nodes&&nodes.indexOf(targetNode)>-1;};$scope.prev=function(){var index=$scope.index();if(index>0){return $scope.siblings()[index-1];}
return null;};$scope.siblings=function(){return $scope.$parentNodesScope.childNodes();};$scope.childNodesCount=function(){return $scope.childNodes()?$scope.childNodes().length:0;};$scope.hasChild=function(){return $scope.childNodesCount()>0;};$scope.childNodes=function(){return $scope.$childNodesScope&&$scope.$childNodesScope.$modelValue?$scope.$childNodesScope.childNodes():null;};$scope.accept=function(sourceNode,destIndex){return $scope.$childNodesScope&&$scope.$childNodesScope.accept(sourceNode,destIndex);};$scope.remove=function(){return $scope.$parentNodesScope.removeNode($scope);};$scope.toggle=function(){$scope.collapsed=!$scope.collapsed;};$scope.collapse=function(){$scope.collapsed=true;};$scope.expand=function(){$scope.collapsed=false;};$scope.depth=function(){var parentNode=$scope.$parentNodeScope;if(parentNode){return parentNode.depth()+1;}
return 1;};var subDepth=0;var countSubDepth=function(scope){var count=0;var nodes=scope.childNodes();for(var i=0;i<nodes.length;i++){var childNodes=nodes[i].$childNodesScope;if(childNodes){count=1;countSubDepth(childNodes);}}
subDepth+=count;};$scope.maxSubDepth=function(){subDepth=0;if($scope.$childNodesScope){countSubDepth($scope.$childNodesScope);}
return subDepth;};}]);})();(function(){'use strict';angular.module('ui.tree').controller('TreeHandleController',['$scope','$element','$attrs','treeConfig',function($scope,$element,$attrs,treeConfig){this.scope=$scope;$scope.$element=$element;$scope.$nodeScope=null;$scope.$type='uiTreeHandle';}]);})();(function(){'use strict';angular.module('ui.tree').directive('uiTree',['treeConfig','$window',function(treeConfig,$window){return{restrict:'A',scope:true,controller:'TreeController',link:function(scope,element,attrs){var callbacks={accept:null};var config={};angular.extend(config,treeConfig);if(config.treeClass){element.addClass(config.treeClass);}
scope.$emptyElm=angular.element($window.document.createElement('div'));if(config.emptyTreeClass){scope.$emptyElm.addClass(config.emptyTreeClass);}
scope.$watch('$nodesScope.$modelValue.length',function(){if(scope.$nodesScope.$modelValue){scope.resetEmptyElement();}},true);attrs.$observe('dragEnabled',function(val){var de=scope.$eval(val);if((typeof de)=="boolean"){scope.dragEnabled=de;}});attrs.$observe('maxDepth',function(val){var md=scope.$eval(val);if((typeof md)=="number"){scope.maxDepth=md;}});attrs.$observe('dragDelay',function(val){var dd=scope.$eval(val);if((typeof dd)=="number"){scope.dragDelay=dd;}});callbacks.accept=function(sourceNodeScope,destNodesScope,destIndex){if(destNodesScope.nodrop||destNodesScope.outOfDepth(sourceNodeScope)){return false;}
return true;};callbacks.dropped=function(event){};callbacks.dragStart=function(event){};callbacks.dragMove=function(event){};callbacks.dragStop=function(event){};scope.$watch(attrs.uiTree,function(newVal,oldVal){angular.forEach(newVal,function(value,key){if(callbacks[key]){if(typeof value==="function"){callbacks[key]=value;}}});scope.$callbacks=callbacks;},true);}};}]);})();(function(){'use strict';angular.module('ui.tree').directive('uiTreeNodes',['treeConfig','$window',function(treeConfig){return{require:['ngModel','?^uiTreeNode','^uiTree'],restrict:'A',scope:true,controller:'TreeNodesController',link:function(scope,element,attrs,controllersArr){var config={};angular.extend(config,treeConfig);if(config.nodesClass){element.addClass(config.nodesClass);}
var ngModel=controllersArr[0];var treeNodeCtrl=controllersArr[1];var treeCtrl=controllersArr[2];if(treeNodeCtrl){treeNodeCtrl.scope.$childNodesScope=scope;scope.$nodeScope=treeNodeCtrl.scope;}
else{treeCtrl.scope.$nodesScope=scope;}
scope.$treeScope=treeCtrl.scope;if(ngModel){ngModel.$render=function(){if(!ngModel.$modelValue||!angular.isArray(ngModel.$modelValue)){scope.$modelValue=[];}
scope.$modelValue=ngModel.$modelValue;};}
attrs.$observe('maxDepth',function(val){var md=scope.$eval(val);if((typeof md)=="number"){scope.maxDepth=md;}});attrs.$observe('nodrop',function(val){scope.nodrop=((typeof val)!="undefined");});attrs.$observe('horizontal',function(val){scope.horizontal=((typeof val)!="undefined");});}};}]);})();(function(){'use strict';angular.module('ui.tree').directive('uiTreeNode',['treeConfig','$uiTreeHelper','$window','$document','$timeout',function(treeConfig,$uiTreeHelper,$window,$document,$timeout){return{require:['^uiTreeNodes','^uiTree'],restrict:'A',controller:'TreeNodeController',link:function(scope,element,attrs,controllersArr){var config={};angular.extend(config,treeConfig);if(config.nodeClass){element.addClass(config.nodeClass);}
scope.init(controllersArr);scope.collapsed=!!$uiTreeHelper.getNodeAttribute(scope,'collapsed');attrs.$observe('collapsed',function(val){var collapsed=scope.$eval(val);if((typeof collapsed)=="boolean"){scope.collapsed=collapsed;}});scope.$watch('collapsed',function(val){$uiTreeHelper.setNodeAttribute(scope,'collapsed',val);attrs.$set('collapsed',val);});var hasTouch='ontouchstart'in window;var startPos,firstMoving,dragInfo,pos;var placeElm,hiddenPlaceElm,dragElm;var treeScope=null;var elements;var dragTimer=null;var body=document.body,html=document.documentElement,document_height,document_width;var dragStart=function(e){if(!hasTouch&&(e.button==2||e.which==3)){return;}
if(e.uiTreeDragging||(e.originalEvent&&e.originalEvent.uiTreeDragging)){return;}
var eventElm=angular.element(e.target);var eventScope=eventElm.scope();if(!eventScope||!eventScope.$type){return;}
if(eventScope.$type!='uiTreeNode'&&eventScope.$type!='uiTreeHandle'){return;}
if(eventScope.$type=='uiTreeNode'&&eventScope.$handleScope){return;}
while(eventElm&&eventElm[0]&&eventElm[0]!=element){if($uiTreeHelper.nodrag(eventElm)){return;}
eventElm=eventElm.parent();}
e.uiTreeDragging=true;if(e.originalEvent){e.originalEvent.uiTreeDragging=true;}
e.preventDefault();var eventObj=$uiTreeHelper.eventObj(e);firstMoving=true;dragInfo=$uiTreeHelper.dragInfo(scope);var tagName=scope.$element.prop('tagName');if(tagName.toLowerCase()==='tr'){placeElm=angular.element($window.document.createElement(tagName));var tdElm=angular.element($window.document.createElement('td')).addClass(config.placeHolderClass);placeElm.append(tdElm);}else{placeElm=angular.element($window.document.createElement(tagName)).addClass(config.placeHolderClass);}
hiddenPlaceElm=angular.element($window.document.createElement(tagName));if(config.hiddenClass){hiddenPlaceElm.addClass(config.hiddenClass);}
pos=$uiTreeHelper.positionStarted(eventObj,scope.$element);placeElm.css('height',$uiTreeHelper.height(scope.$element)+'px');placeElm.css('width',$uiTreeHelper.width(scope.$element)+'px');dragElm=angular.element($window.document.createElement(scope.$parentNodesScope.$element.prop('tagName'))).addClass(scope.$parentNodesScope.$element.attr('class')).addClass(config.dragClass);dragElm.css('width',$uiTreeHelper.width(scope.$element)+'px');dragElm.css('z-index',9999);scope.$element.after(placeElm);scope.$element.after(hiddenPlaceElm);dragElm.append(scope.$element);$document.find('body').append(dragElm);dragElm.css({'left':eventObj.pageX-pos.offsetX+'px','top':eventObj.pageY-pos.offsetY+'px'});elements={placeholder:placeElm,dragging:dragElm};scope.$apply(function(){scope.$callbacks.dragStart(dragInfo.eventArgs(elements,pos));});angular.element($document).bind('touchend',dragEndEvent);angular.element($document).bind('touchcancel',dragEndEvent);angular.element($document).bind('touchmove',dragMoveEvent);angular.element($document).bind('mouseup',dragEndEvent);angular.element($document).bind('mousemove',dragMoveEvent);angular.element($document).bind('mouseleave',dragCancelEvent);document_height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight);document_width=Math.max(body.scrollWidth,body.offsetWidth,html.clientWidth,html.scrollWidth,html.offsetWidth);};var dragMove=function(e){var eventObj=$uiTreeHelper.eventObj(e);var prev,leftElmPos,topElmPos;if(dragElm){e.preventDefault();$window.getSelection().removeAllRanges();leftElmPos=eventObj.pageX-pos.offsetX;topElmPos=eventObj.pageY-pos.offsetY;if(leftElmPos<0){leftElmPos=0;}
if(topElmPos<0){topElmPos=0;}
if((topElmPos+10)>document_height){topElmPos=document_height-10;}
if((leftElmPos+10)>document_width){leftElmPos=document_width-10;}
dragElm.css({'left':leftElmPos+'px','top':topElmPos+'px'});var top_scroll=window.pageYOffset||$window.document.documentElement.scrollTop;var bottom_scroll=top_scroll+(window.innerHeight||$window.document.clientHeight||$window.document.clientHeight);if(bottom_scroll<eventObj.pageY&&bottom_scroll<=document_height){window.scrollBy(0,10);}
if(top_scroll>eventObj.pageY){window.scrollBy(0,-10);}
$uiTreeHelper.positionMoved(e,pos,firstMoving);if(firstMoving){firstMoving=false;return;}
if(pos.dirAx&&pos.distAxX>=config.levelThreshold){pos.distAxX=0;if(pos.distX>0){prev=dragInfo.prev();if(prev&&!prev.collapsed&&prev.accept(scope,prev.childNodesCount())){prev.$childNodesScope.$element.append(placeElm);dragInfo.moveTo(prev.$childNodesScope,prev.childNodes(),prev.childNodesCount());}}
if(pos.distX<0){var next=dragInfo.next();if(!next){var target=dragInfo.parentNode();if(target&&target.$parentNodesScope.accept(scope,target.index()+1)){target.$element.after(placeElm);dragInfo.moveTo(target.$parentNodesScope,target.siblings(),target.index()+1);}}}}
var decrease=($uiTreeHelper.offset(dragElm).left-$uiTreeHelper.offset(placeElm).left)>=config.threshold;var targetX=eventObj.pageX-$window.document.body.scrollLeft;var targetY=eventObj.pageY-(window.pageYOffset||$window.document.documentElement.scrollTop);if(angular.isFunction(dragElm.hide)){dragElm.hide();}
$window.document.elementFromPoint(targetX,targetY);var targetElm=angular.element($window.document.elementFromPoint(targetX,targetY));if(angular.isFunction(dragElm.show)){dragElm.show();}
if(!pos.dirAx){var targetBefore,targetNode;targetNode=targetElm.scope();var isEmpty=false;if(!targetNode){return;}
if(targetNode.$type=='uiTree'&&targetNode.dragEnabled){isEmpty=targetNode.isEmpty();}
if(targetNode.$type=='uiTreeHandle'){targetNode=targetNode.$nodeScope;}
if(targetNode.$type!='uiTreeNode'&&!isEmpty){return;}
if(treeScope&&placeElm.parent()[0]!=treeScope.$element[0]){treeScope.resetEmptyElement();treeScope=null;}
if(isEmpty){treeScope=targetNode;if(targetNode.$nodesScope.accept(scope,0)){targetNode.place(placeElm);dragInfo.moveTo(targetNode.$nodesScope,targetNode.$nodesScope.childNodes(),0);}}else if(targetNode.dragEnabled()){targetElm=targetNode.$element;var targetOffset=$uiTreeHelper.offset(targetElm);targetBefore=targetNode.horizontal?eventObj.pageX<(targetOffset.left+$uiTreeHelper.width(targetElm)/ 2):eventObj.pageY<(targetOffset.top+$uiTreeHelper.height(targetElm)/ 2);if(targetNode.$parentNodesScope.accept(scope,targetNode.index())){if(targetBefore){targetElm[0].parentNode.insertBefore(placeElm[0],targetElm[0]);dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index());}else{targetElm.after(placeElm);dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index()+1);}}
else if(!targetBefore&&targetNode.accept(scope,targetNode.childNodesCount())){targetNode.$childNodesScope.$element.append(placeElm);dragInfo.moveTo(targetNode.$childNodesScope,targetNode.childNodes(),targetNode.childNodesCount());}}}
scope.$apply(function(){scope.$callbacks.dragMove(dragInfo.eventArgs(elements,pos));});}};var dragEnd=function(e){e.preventDefault();if(dragElm){hiddenPlaceElm.replaceWith(scope.$element);placeElm.remove();dragElm.remove();dragElm=null;if(scope.$$apply){dragInfo.apply();scope.$treeScope.$apply(function(){scope.$callbacks.dropped(dragInfo.eventArgs(elements,pos));});}else{bindDrag();}
scope.$treeScope.$apply(function(){scope.$callbacks.dragStop(dragInfo.eventArgs(elements,pos));});scope.$$apply=false;dragInfo=null;}
angular.element($document).unbind('touchend',dragEndEvent);angular.element($document).unbind('touchcancel',dragEndEvent);angular.element($document).unbind('touchmove',dragMoveEvent);angular.element($document).unbind('mouseup',dragEndEvent);angular.element($document).unbind('mousemove',dragMoveEvent);angular.element($window.document.body).unbind('mouseleave',dragCancelEvent);};var dragStartEvent=function(e){if(scope.dragEnabled()){dragStart(e);}};var dragMoveEvent=function(e){dragMove(e);};var dragEndEvent=function(e){scope.$$apply=true;dragEnd(e);};var dragCancelEvent=function(e){dragEnd(e);};var bindDrag=function(){element.bind('touchstart',dragStartEvent);element.bind('mousedown',function(e){dragTimer=$timeout(function(){dragStartEvent(e);},scope.dragDelay);});element.bind('mouseup',function(){$timeout.cancel(dragTimer);});};bindDrag();angular.element($window.document.body).bind("keydown",function(e){if(e.keyCode==27){scope.$$apply=false;dragEnd(e);}});}};}]);})();(function(){'use strict';angular.module('ui.tree').directive('uiTreeHandle',['treeConfig','$window',function(treeConfig){return{require:'^uiTreeNode',restrict:'A',scope:true,controller:'TreeHandleController',link:function(scope,element,attrs,treeNodeCtrl){var config={};angular.extend(config,treeConfig);if(config.handleClass){element.addClass(config.handleClass);}
if(scope!=treeNodeCtrl.scope){scope.$nodeScope=treeNodeCtrl.scope;treeNodeCtrl.scope.$handleScope=scope;}}};}]);})();(function()
{var parent,ink,d,x,y;$(document).delegate('.btn-ripple','click',function(e){$self=$(this);if($self.find(".ink").length==0)
$self.prepend("<span class='ink'></span>");ink=$self.find(".ink");ink.removeClass("animate");if(!ink.height()&&!ink.width())
{d=Math.max($self.outerWidth(),$self.outerHeight());ink.css({height:d,width:d});}
x=e.pageX-$self.offset().left-ink.width()/2;y=e.pageY-$self.offset().top-ink.height()/2;ink.css({top:y+'px',left:x+'px'}).addClass("animate");})})();(function(c){function m(a,c,d){if((a[c]||a[d])&&a[c]===a[d])throw Error("(Link) '"+c+"' can't match '"+d+"'.'");}function r(a){void 0===a&&(a={});if("object"!==typeof a)throw Error("(Format) 'format' option must be an object.");var h={};c(u).each(function(c,n){if(void 0===a[n])h[n]=A[c];else if(typeof a[n]===typeof A[c]){if("decimals"===n&&(0>a[n]||7<a[n]))throw Error("(Format) 'format.decimals' option must be between 0 and 7.");h[n]=a[n]}else throw Error("(Format) 'format."+n+"' must be a "+typeof A[c]+".");});m(h,"mark","thousand");m(h,"prefix","negative");m(h,"prefix","negativeBefore");this.r=h}function k(a,h){"object"!==typeof a&&c.error("(Link) Initialize with an object.");return new k.prototype.p(a.target||function(){},a.method,a.format||{},h)}var u="decimals mark thousand prefix postfix encoder decoder negative negativeBefore to from".split(" "),A=[2,".","","","",function(a){return a},function(a){return a},"-","",function(a){return a},function(a){return a}];r.prototype.a=function(a){return this.r[a]};r.prototype.L=function(a){function c(a){return a.split("").reverse().join("")}a=this.a("encoder")(a);var d=this.a("decimals"),n="",k="",m="",r="";0===parseFloat(a.toFixed(d))&&(a="0");0>a&&(n=this.a("negative"),k=this.a("negativeBefore"));a=Math.abs(a).toFixed(d).toString();a=a.split(".");this.a("thousand")?(m=c(a[0]).match(/.{1,3}/g),m=c(m.join(c(this.a("thousand"))))):m=a[0];this.a("mark")&&1<a.length&&(r=this.a("mark")+a[1]);return this.a("to")(k+this.a("prefix")+n+m+r+this.a("postfix"))};r.prototype.w=function(a){function c(a){return a.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var d;if(null===a||void 0===a)return!1;a=this.a("from")(a);a=a.toString();d=a.replace(RegExp("^"+c(this.a("negativeBefore"))),"");a!==d?(a=d,d="-"):d="";a=a.replace(RegExp("^"+c(this.a("prefix"))),"");this.a("negative")&&(d="",a=a.replace(RegExp("^"+c(this.a("negative"))),"-"));a=a.replace(RegExp(c(this.a("postfix"))+"$"),"").replace(RegExp(c(this.a("thousand")),"g"),"").replace(this.a("mark"),".");a=this.a("decoder")(parseFloat(d+
a));return isNaN(a)?!1:a};k.prototype.K=function(a,h){this.method=h||"html";this.j=c(a.replace("-tooltip-","")||"<div/>")[0]};k.prototype.H=function(a){this.method="val";this.j=document.createElement("input");this.j.name=a;this.j.type="hidden"};k.prototype.G=function(a){function h(a,c){return[c?null:a,c?a:null]}var d=this;this.method="val";this.target=a.on("change",function(a){d.B.val(h(c(a.target).val(),d.t),{link:d,set:!0})})};k.prototype.p=function(a,h,d,k){this.g=d;this.update=!k;if("string"===typeof a&&0===a.indexOf("-tooltip-"))this.K(a,h);else if("string"===typeof a&&0!==a.indexOf("-"))this.H(a);else if("function"===typeof a)this.target=!1,this.method=a;else{if(a instanceof c||c.zepto&&c.zepto.isZ(a)){if(!h){if(a.is("input, select, textarea")){this.G(a);return}h="html"}if("function"===typeof h||"string"===typeof h&&a[h]){this.method=h;this.target=a;return}}throw new RangeError("(Link) Invalid Link.");}};k.prototype.write=function(a,c,d,k){if(!this.update||!1!==k)if(this.u=a,this.F=a=this.format(a),"function"===typeof this.method)this.method.call(this.target[0]||d[0],a,c,d);else this.target[this.method](a,c,d)};k.prototype.q=function(a){this.g=new r(c.extend({},a,this.g instanceof r?this.g.r:this.g))};k.prototype.J=function(a){this.B=a};k.prototype.I=function(a){this.t=a};k.prototype.format=function(a){return this.g.L(a)};k.prototype.A=function(a){return this.g.w(a)};k.prototype.p.prototype=k.prototype;c.Link=k})(window.jQuery||window.Zepto);(function(c){function m(e){return"number"===typeof e&&!isNaN(e)&&isFinite(e)}function r(e){return c.isArray(e)?e:[e]}function k(e,b){e.addClass(b);setTimeout(function(){e.removeClass(b)},300)}function u(e,b){return 100*b/(e[1]-e[0])}function A(e,b){if(b>=e.d.slice(-1)[0])return 100;for(var a=1,c,f,d;b>=e.d[a];)a++;c=e.d[a-1];f=e.d[a];d=e.c[a-1];c=[c,f];return d+u(c,0>c[0]?b+Math.abs(c[0]):b-c[0])/(100/(e.c[a]-d))}function a(e,b){if(100<=b)return e.d.slice(-1)[0];for(var a=1,c,f,d;b>=e.c[a];)a++;c=e.d[a-1];f=e.d[a];d=e.c[a-1];c=[c,f];return 100/(e.c[a]-d)*(b-d)*(c[1]-c[0])/100+c[0]}function h(a,b){for(var c=1,g;(a.dir?100-b:b)>=a.c[c];)c++;if(a.m)return g=a.c[c-1],c=a.c[c],b-g>(c-g)/2?c:g;a.h[c-1]?(g=a.h[c-1],c=a.c[c-1]+Math.round((b-a.c[c-1])/g)*g):c=b;return c}function d(a,b){if(!m(b))throw Error("noUiSlider: 'step' is not numeric.");a.h[0]=b}function n(a,b){if("object"!==typeof b||c.isArray(b))throw Error("noUiSlider: 'range' is not an object.");if(void 0===b.min||void 0===b.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");c.each(b,function(b,g){var d;"number"===typeof g&&(g=[g]);if(!c.isArray(g))throw Error("noUiSlider: 'range' contains invalid value.");d="min"===b?0:"max"===b?100:parseFloat(b);if(!m(d)||!m(g[0]))throw Error("noUiSlider: 'range' value isn't numeric.");a.c.push(d);a.d.push(g[0]);d?a.h.push(isNaN(g[1])?!1:g[1]):isNaN(g[1])||(a.h[0]=g[1])});c.each(a.h,function(b,c){if(!c)return!0;a.h[b]=u([a.d[b],a.d[b+1]],c)/(100/(a.c[b+1]-a.c[b]))})}function E(a,b){"number"===typeof b&&(b=[b]);if(!c.isArray(b)||!b.length||2<b.length)throw Error("noUiSlider: 'start' option is incorrect.");a.b=b.length;a.start=b}function I(a,b){a.m=b;if("boolean"!==typeof b)throw Error("noUiSlider: 'snap' option must be a boolean.");}function J(a,b){if("lower"===b&&1===a.b)a.i=1;else if("upper"===b&&1===a.b)a.i=2;else if(!0===b&&2===a.b)a.i=3;else if(!1===b)a.i=0;else throw Error("noUiSlider: 'connect' option doesn't match handle count.");}function D(a,b){switch(b){case"horizontal":a.k=0;break;case"vertical":a.k=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.");}}function K(a,b){if(2<a.c.length)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.");a.margin=u(a.d,b);if(!m(b))throw Error("noUiSlider: 'margin' option must be numeric.");}function L(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1;a.i=[0,2,1,3][a.i];break;default:throw Error("noUiSlider: 'direction' option was not recognized.");}}function M(a,b){if("string"!==typeof b)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var c=0<=b.indexOf("snap");a.n={s:0<=b.indexOf("tap")||c,extend:0<=b.indexOf("extend"),v:0<=b.indexOf("drag"),fixed:0<=b.indexOf("fixed"),m:c}}function N(a,b,d){a.o=[b.lower,b.upper];a.g=b.format;c.each(a.o,function(a,e){if(!c.isArray(e))throw Error("noUiSlider: 'serialization."+(a?"upper":"lower")+"' must be an array.");c.each(e,function(){if(!(this instanceof c.Link))throw Error("noUiSlider: 'serialization."+(a?"upper":"lower")+"' can only contain Link instances.");this.I(a);this.J(d);this.q(b.format)})});a.dir&&1<a.b&&a.o.reverse()}
function O(a,b){var f={c:[],d:[],h:[!1],margin:0},g;g={step:{e:!1,f:d},start:{e:!0,f:E},connect:{e:!0,f:J},direction:{e:!0,f:L},range:{e:!0,f:n},snap:{e:!1,f:I},orientation:{e:!1,f:D},margin:{e:!1,f:K},behaviour:{e:!0,f:M},serialization:{e:!0,f:N}};a=c.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},a);a.serialization=c.extend({lower:[],upper:[],format:{}},a.serialization);c.each(g,function(c,d){if(void 0===a[c]){if(d.e)throw Error("noUiSlider: '"+c+"' is required.");return!0}d.f(f,a[c],b)});f.style=f.k?"top":"left";return f}function P(a,b){var d=c("<div><div/></div>").addClass(f[2]),g=["-lower","-upper"];a.dir&&g.reverse();d.children().addClass(f[3]+" "+f[3]+g[b]);return d}function Q(a,b){b.j&&(b=new c.Link({target:c(b.j).clone().appendTo(a),method:b.method,format:b.g},!0));return b}function R(a,b){var d,f=[];for(d=0;d<a.b;d++){var k=f,h=d,m=a.o[d],n=b[d].children(),r=a.g,s=void 0,v=[],s=new c.Link({},!0);s.q(r);v.push(s);for(s=0;s<m.length;s++)v.push(Q(n,m[s]));k[h]=v}return f}function S(a,b,c){switch(a){case 1:b.addClass(f[7]);c[0].addClass(f[6]);break;case 3:c[1].addClass(f[6]);case 2:c[0].addClass(f[7]);case 0:b.addClass(f[6])}}function T(a,b){var c,d=[];for(c=0;c<a.b;c++)d.push(P(a,c).appendTo(b));return d}function U(a,b){b.addClass([f[0],f[8+a.dir],f[4+a.k]].join(" "));return c("<div/>").appendTo(b).addClass(f[1])}function V(d,b,m){function g(){return t[["width","height"][b.k]]()}function n(a){var b,c=[q.val()];for(b=0;b<a.length;b++)q.trigger(a[b],c)}function u(d,p,e){var g=d[0]!==l[0][0]?1:0,H=x[0]+b.margin,k=x[1]-b.margin;e&&1<l.length&&(p=g?Math.max(p,H):Math.min(p,k));100>p&&(p=h(b,p));p=Math.max(Math.min(parseFloat(p.toFixed(7)),100),0);if(p===x[g])return 1===l.length?!1:p===H||p===k?0:!1;d.css(b.style,p+"%");d.is(":first-child")&&d.toggleClass(f[17],50<p);x[g]=p;b.dir&&(p=100-p);c(y[g]).each(function(){this.write(a(b,p),d.children(),q)});return!0}function B(a,b,c){c||k(q,f[14]);u(a,b,!1);n(["slide","set","change"])}function w(a,c,d,e){a=a.replace(/\s/g,".nui ")+".nui";c.on(a,function(a){var c=q.attr("disabled");if(q.hasClass(f[14])||void 0!==c&&null!==c)return!1;a.preventDefault();var c=0===a.type.indexOf("touch"),p=0===a.type.indexOf("mouse"),F=0===a.type.indexOf("pointer"),g,k,l=a;0===a.type.indexOf("MSPointer")&&(F=!0);a.originalEvent&&(a=a.originalEvent);c&&(g=a.changedTouches[0].pageX,k=a.changedTouches[0].pageY);if(p||F)F||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),g=a.clientX+window.pageXOffset,k=a.clientY+window.pageYOffset;l.C=[g,k];l.cursor=p;a=l;a.l=a.C[b.k];d(a,e)})}function C(a,c){var b=c.b||l,d,e=!1,e=100*(a.l-c.start)/g(),f=b[0][0]!==l[0][0]?1:0;var k=c.D;d=e+k[0];e+=k[1];1<b.length?(0>d&&(e+=Math.abs(d)),100<e&&(d-=e-100),d=[Math.max(Math.min(d,100),0),Math.max(Math.min(e,100),0)]):d=[d,e];e=u(b[0],d[f],1===b.length);1<b.length&&(e=u(b[1],d[f?0:1],!1)||e);e&&n(["slide"])}function s(a){c("."+f[15]).removeClass(f[15]);a.cursor&&c("body").css("cursor","").off(".nui");G.off(".nui");q.removeClass(f[12]);n(["set","change"])}function v(a,b){1===b.b.length&&b.b[0].children().addClass(f[15]);a.stopPropagation();w(z.move,G,C,{start:a.l,b:b.b,D:[x[0],x[l.length-1]]});w(z.end,G,s,null);a.cursor&&(c("body").css("cursor",c(a.target).css("cursor")),1<l.length&&q.addClass(f[12]),c("body").on("selectstart.nui",!1))}function D(a){var d=a.l,e=0;a.stopPropagation();c.each(l,function(){e+=this.offset()[b.style]});e=d<e/2||1===l.length?0:1;d-=t.offset()[b.style];d=100*d/g();B(l[e],d,b.n.m);b.n.m&&v(a,{b:[l[e]]})}function E(a){var c=(a=a.l<t.offset()[b.style])?0:100;a=a?0:l.length-1;B(l[a],c,!1)}var q=c(d),x=[-1,-1],t,y,l;if(q.hasClass(f[0]))throw Error("Slider was already initialized.");t=U(b,q);l=T(b,t);y=R(b,l);S(b.i,q,l);(function(a){var b;if(!a.fixed)for(b=0;b<l.length;b++)w(z.start,l[b].children(),v,{b:[l[b]]});a.s&&w(z.start,t,D,{b:l});a.extend&&(q.addClass(f[16]),a.s&&w(z.start,q,E,{b:l}));a.v&&(b=t.find("."+f[7]).addClass(f[10]),a.fixed&&(b=b.add(t.children().not(b).children())),w(z.start,b,v,{b:l}))})(b.n);d.vSet=function(){var a=Array.prototype.slice.call(arguments,0),d,e,g,h,m,s,t=r(a[0]);"object"===typeof a[1]?(d=a[1].set,e=a[1].link,g=a[1].update,h=a[1].animate):!0===a[1]&&(d=!0);b.dir&&1<b.b&&t.reverse();h&&k(q,f[14]);a=1<l.length?3:1;1===t.length&&(a=1);for(m=0;m<a;m++)h=e||y[m%2][0],h=h.A(t[m%2]),!1!==h&&(h=A(b,h),b.dir&&(h=100-h),!0!==u(l[m%2],h,!0)&&c(y[m%2]).each(function(a){if(!a)return s=this.u,!0;this.write(s,l[m%2].children(),q,g)}));!0===d&&n(["set"]);return this};d.vGet=function(){var a,c=[];for(a=0;a<b.b;a++)c[a]=y[a][0].F;return 1===c.length?c[0]:b.dir?c.reverse():c};d.destroy=function(){c.each(y,function(){c.each(this,function(){this.target&&this.target.off(".nui")})});c(this).off(".nui").removeClass(f.join(" ")).empty();return m};q.val(b.start)}function W(a){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var b=O(a,this);return this.each(function(){V(this,b,a)})}function X(a){return this.each(function(){var b=c(this).val(),d=this.destroy(),f=c.extend({},d,a);c(this).noUiSlider(f);d.start===f.start&&c(this).val(b)})}function B(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var G=c(document),C=c.fn.val,z=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},f="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active noUi-extended noUi-stacking".split(" ");c.fn.val=function(){var a=arguments,b=c(this[0]);return arguments.length?this.each(function(){(c(this).hasClass(f[0])?B:C).apply(c(this),a)}):(b.hasClass(f[0])?B:C).call(b)};c.noUiSlider={Link:c.Link};c.fn.noUiSlider=function(a,b){return(b?X:W).call(this,a)}})(window.jQuery||window.Zepto);'use strict';angular.module('nouislider',[]).directive('slider',function(){return{restrict:'A',scope:{start:'@',step:'@',end:'@',callback:'@',margin:'@',ngModel:'=',ngFrom:'=',ngTo:'='},link:function(scope,element,attrs){var callback,fromParsed,parsedValue,slider,toParsed;slider=$(element);callback=scope.callback?scope.callback:'slide';if(scope.ngFrom!=null&&scope.ngTo!=null){fromParsed=null;toParsed=null;slider.noUiSlider({start:[scope.ngFrom||scope.start,scope.ngTo||scope.end],step:parseFloat(scope.step||1),connect:true,margin:parseFloat(scope.margin||0),range:{min:[parseFloat(scope.start)],max:[parseFloat(scope.end)]}});slider.on(callback,function(){var from,to,_ref;_ref=slider.val(),from=_ref[0],to=_ref[1];fromParsed=parseFloat(from);toParsed=parseFloat(to);return scope.$apply(function(){scope.ngFrom=fromParsed;return scope.ngTo=toParsed;});});scope.$watch('ngFrom',function(newVal,oldVal){if(newVal!==fromParsed){return slider.val([newVal,null]);}});return scope.$watch('ngTo',function(newVal,oldVal){if(newVal!==toParsed){return slider.val([null,newVal]);}});}else{parsedValue=null;slider.noUiSlider({start:[scope.ngModel||scope.start],step:parseFloat(scope.step||1),range:{min:[parseFloat(scope.start)],max:[parseFloat(scope.end)]}});slider.on(callback,function(){parsedValue=parseFloat(slider.val());return scope.$apply(function(){return scope.ngModel=parsedValue;});});return scope.$watch('ngModel',function(newVal,oldVal){if(newVal!==parsedValue){return slider.val(newVal);}});}}};});angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=function(e,f){function g(){if(!l){if(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element){e.$element.addClass(f);{e.$element[0].offsetWidth}angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)}else h(e,i.currentSlide);i.currentSlide=e,k=m,d()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?b>=j.length?i.select(j[b-1]):i.select(j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?(k.$setValidity("date",!1),void 0):(k.$setValidity("date",!0),b)}return k.$setValidity("date",!1),void 0}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!z||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return b.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),A(),b.tt_isOpen=!0,b.$digest(),A):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),b.tt_animation?u=g(s,500):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var a,d,e,f;switch(a=w?j.offset(c):j.position(c),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),b.tt_placement){case"right":f={top:a.top+a.height/2-e/2,left:a.left+a.width};break;case"bottom":f={top:a.top+a.height,left:a.left+a.width/2-d/2};break;case"left":f={top:a.top+a.height/2-e/2,left:a.left-d};break;default:f={top:a.top-e,left:a.left+a.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(c.unbind(x.show,k),c.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m)),y=!0});var C=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=angular.isDefined(b.ratingStates)?this.createRateObjects(angular.copy(a.$parent.$eval(b.ratingStates))):this.createRateObjects(new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?(l.$setValidity("editable",!1),void 0):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n   <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="fa fa-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="fa fa-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n <li ng-transclude></li>\n"+' <li ng-show="showButtonBar" style="padding:10px 9px 2px">\n  <span class="btn-group">\n   <button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n   <button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n   <button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n  <button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button></span> </li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n <tbody>\n  <tr class="text-center">\n   <td><a ng-click="incrementHours()" class="btn btn-link"><span class="fa fa-chevron-up"></span></a></td>\n   <td>&nbsp;</td>\n   <td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="fa fa-chevron-up"></span></a></td>\n   <td ng-show="showMeridian"></td>\n  </tr>\n  <tr>\n   <td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n    <input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n   </td>\n   <td>:</td>\n   <td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n    <input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n   </td>\n   <td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n  </tr>\n  <tr class="text-center">\n   <td><a ng-click="decrementHours()" class="btn btn-link"><span class="fa fa-chevron-down"></span></a></td>\n   <td>&nbsp;</td>\n   <td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="fa fa-chevron-down"></span></a></td>\n   <td ng-show="showMeridian"></td>\n  </tr>\n </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]);angular.module('ui.tinymce',[]).value('uiTinymceConfig',{}).directive('uiTinymce',['uiTinymceConfig',function(uiTinymceConfig){uiTinymceConfig=uiTinymceConfig||{};var generatedIds=0;return{require:'ngModel',link:function(scope,elm,attrs,ngModel){var expression,options,tinyInstance,updateView=function(){ngModel.$setViewValue(elm.val());if(!scope.$root.$$phase){scope.$apply();}};if(!attrs.id){attrs.$set('id','uiTinymce'+generatedIds++);}
if(attrs.uiTinymce){expression=scope.$eval(attrs.uiTinymce);}else{expression={};}
options={setup:function(ed){var args;ed.on('init',function(args){ngModel.$render();});ed.on('ExecCommand',function(e){ed.save();updateView();});ed.on('KeyUp',function(e){ed.save();updateView();});ed.on('SetContent',function(e){if(!e.initial){ed.save();updateView();}});if(expression.setup){scope.$eval(expression.setup);delete expression.setup;}},mode:'exact',elements:attrs.id};angular.extend(options,uiTinymceConfig,expression);setTimeout(function(){tinymce.init(options);});ngModel.$render=function(){if(!tinyInstance){tinyInstance=tinymce.get(attrs.id);}
tinyInstance.setContent(ngModel.$viewValue||'');if(tinyInstance){tinyInstance.setContent(ngModel.$viewValue||'');}};}};}]);angular.module('ui.ace',[]).constant('uiAceConfig',{}).directive('uiAce',['uiAceConfig',function(uiAceConfig){if(angular.isUndefined(window.ace)){throw new Error('ui-ace need ace to work... (o rly?)');}
return{restrict:'EA',require:'?ngModel',link:function(scope,elm,attrs,ngModel){var options,opts,acee,session,onChange;options=uiAceConfig.ace||{};opts=angular.extend({},options,scope.$eval(attrs.uiAce));acee=window.ace.edit(elm[0]);session=acee.getSession();onChange=function(callback){return function(e){var newValue=session.getValue();if(newValue!==scope.$eval(attrs.value)&&!scope.$$phase&&!scope.$root.$$phase){if(angular.isDefined(ngModel)){scope.$apply(function(){ngModel.$setViewValue(newValue);});}
if(angular.isDefined(callback)){scope.$apply(function(){if(angular.isFunction(callback)){callback(e,acee);}
else{throw new Error('ui-ace use a function as callback.');}});}}};};if(angular.isDefined(opts.showGutter)){acee.renderer.setShowGutter(opts.showGutter);}
if(angular.isDefined(opts.useWrapMode)){session.setUseWrapMode(opts.useWrapMode);}
if(angular.isFunction(opts.onLoad)){opts.onLoad(acee);}
if(angular.isString(opts.theme)){acee.setTheme("ace/theme/"+opts.theme);}
if(angular.isString(opts.mode)){session.setMode("ace/mode/"+opts.mode);}
attrs.$observe('readonly',function(value){acee.setReadOnly(value==='true');});if(angular.isDefined(ngModel)){ngModel.$formatters.push(function(value){if(angular.isUndefined(value)||value===null){return'';}
else if(angular.isObject(value)||angular.isArray(value)){throw new Error('ui-ace cannot use an object or an array as a model');}
return value;});ngModel.$render=function(){session.setValue(ngModel.$viewValue);};}
session.on('change',onChange(opts.onChange));}};}]);(function($){if(typeof $.fn.each2=="undefined"){$.extend($.fn,{each2:function(c){var j=$([0]),i=-1,l=this.length;while(++i<l&&(j.context=j[0]=this[i])&&c.call(j[0],i,j)!==false);return this;}});}})(jQuery);(function($,undefined){"use strict";if(window.Select2!==undefined){return;}
var KEY,AbstractSelect2,SingleSelect2,MultiSelect2,nextUid,sizer,lastMousePosition={x:0,y:0},$document,scrollBarDimensions,KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(k){k=k.which?k.which:k;switch(k){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:return true;}
return false;},isControl:function(e){var k=e.which;switch(k){case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return true;}
if(e.metaKey)return true;return false;},isFunctionKey:function(k){k=k.which?k.which:k;return k>=112&&k<=123;}},MEASURE_SCROLLBAR_TEMPLATE="<div class='select2-measure-scrollbar'></div>",DIACRITICS={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z"};$document=$(document);nextUid=(function(){var counter=1;return function(){return counter++;};}());function stripDiacritics(str){var ret,i,l,c;if(!str||str.length<1)return str;ret="";for(i=0,l=str.length;i<l;i++){c=str.charAt(i);ret+=DIACRITICS[c]||c;}
return ret;}
function indexOf(value,array){var i=0,l=array.length;for(;i<l;i=i+1){if(equal(value,array[i]))return i;}
return-1;}
function measureScrollbar(){var $template=$(MEASURE_SCROLLBAR_TEMPLATE);$template.appendTo('body');var dim={width:$template.width()-$template[0].clientWidth,height:$template.height()-$template[0].clientHeight};$template.remove();return dim;}
function equal(a,b){if(a===b)return true;if(a===undefined||b===undefined)return false;if(a===null||b===null)return false;if(a.constructor===String)return a+''===b+'';if(b.constructor===String)return b+''===a+'';return false;}
function splitVal(string,separator){var val,i,l;if(string===null||string.length<1)return[];val=string.split(separator);for(i=0,l=val.length;i<l;i=i+1)val[i]=$.trim(val[i]);return val;}
function getSideBorderPadding(element){return element.outerWidth(false)-element.width();}
function installKeyUpChangeEvent(element){var key="keyup-change-value";element.on("keydown",function(){if($.data(element,key)===undefined){$.data(element,key,element.val());}});element.on("keyup",function(){var val=$.data(element,key);if(val!==undefined&&element.val()!==val){$.removeData(element,key);element.trigger("keyup-change");}});}
$document.on("mousemove",function(e){lastMousePosition.x=e.pageX;lastMousePosition.y=e.pageY;});function installFilteredMouseMove(element){element.on("mousemove",function(e){var lastpos=lastMousePosition;if(lastpos===undefined||lastpos.x!==e.pageX||lastpos.y!==e.pageY){$(e.target).trigger("mousemove-filtered",e);}});}
function debounce(quietMillis,fn,ctx){ctx=ctx||undefined;var timeout;return function(){var args=arguments;window.clearTimeout(timeout);timeout=window.setTimeout(function(){fn.apply(ctx,args);},quietMillis);};}
function thunk(formula){var evaluated=false,value;return function(){if(evaluated===false){value=formula();evaluated=true;}
return value;};};function installDebouncedScroll(threshold,element){var notify=debounce(threshold,function(e){element.trigger("scroll-debounced",e);});element.on("scroll",function(e){if(indexOf(e.target,element.get())>=0)notify(e);});}
function focus($el){if($el[0]===document.activeElement)return;window.setTimeout(function(){var el=$el[0],pos=$el.val().length,range;$el.focus();if($el.is(":visible")&&el===document.activeElement){if(el.setSelectionRange)
{el.setSelectionRange(pos,pos);}
else if(el.createTextRange){range=el.createTextRange();range.collapse(false);range.select();}}},0);}
function getCursorInfo(el){el=$(el)[0];var offset=0;var length=0;if('selectionStart'in el){offset=el.selectionStart;length=el.selectionEnd-offset;}else if('selection'in document){el.focus();var sel=document.selection.createRange();length=document.selection.createRange().text.length;sel.moveStart('character',-el.value.length);offset=sel.text.length-length;}
return{offset:offset,length:length};}
function killEvent(event){event.preventDefault();event.stopPropagation();}
function killEventImmediately(event){event.preventDefault();event.stopImmediatePropagation();}
function measureTextWidth(e){if(!sizer){var style=e[0].currentStyle||window.getComputedStyle(e[0],null);sizer=$(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:style.fontSize,fontFamily:style.fontFamily,fontStyle:style.fontStyle,fontWeight:style.fontWeight,letterSpacing:style.letterSpacing,textTransform:style.textTransform,whiteSpace:"nowrap"});sizer.attr("class","select2-sizer");$("body").append(sizer);}
sizer.text(e.val());return sizer.width();}
function syncCssClasses(dest,src,adapter){var classes,replacements=[],adapted;classes=dest.attr("class");if(classes){classes=''+classes;$(classes.split(" ")).each2(function(){if(this.indexOf("select2-")===0){replacements.push(this);}});}
classes=src.attr("class");if(classes){classes=''+classes;$(classes.split(" ")).each2(function(){if(this.indexOf("select2-")!==0){adapted=adapter(this);if(adapted){replacements.push(adapted);}}});}
dest.attr("class",replacements.join(" "));}
function markMatch(text,term,markup,escapeMarkup){var match=stripDiacritics(text.toUpperCase()).indexOf(stripDiacritics(term.toUpperCase())),tl=term.length;if(match<0){markup.push(escapeMarkup(text));return;}
markup.push(escapeMarkup(text.substring(0,match)));markup.push("<span class='select2-match'>");markup.push(escapeMarkup(text.substring(match,match+tl)));markup.push("</span>");markup.push(escapeMarkup(text.substring(match+tl,text.length)));}
function defaultEscapeMarkup(markup){var replace_map={'\\':'&#92;','&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;',"/":'&#47;'};return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replace_map[match];});}
function ajax(options){var timeout,handler=null,quietMillis=options.quietMillis||100,ajaxUrl=options.url,self=this;return function(query){window.clearTimeout(timeout);timeout=window.setTimeout(function(){var data=options.data,url=ajaxUrl,transport=options.transport||$.fn.select2.ajaxDefaults.transport,deprecated={type:options.type||'GET',cache:options.cache||false,jsonpCallback:options.jsonpCallback||undefined,dataType:options.dataType||"json"},params=$.extend({},$.fn.select2.ajaxDefaults.params,deprecated);data=data?data.call(self,query.term,query.page,query.context):null;url=(typeof url==='function')?url.call(self,query.term,query.page,query.context):url;if(handler){handler.abort();}
if(options.params){if($.isFunction(options.params)){$.extend(params,options.params.call(self));}else{$.extend(params,options.params);}}
$.extend(params,{url:url,dataType:options.dataType,data:data,success:function(data){var results=options.results(data,query.page);query.callback(results);}});handler=transport.call(self,params);},quietMillis);};}
function local(options){var data=options,dataText,tmp,text=function(item){return""+item.text;};if($.isArray(data)){tmp=data;data={results:tmp};}
if($.isFunction(data)===false){tmp=data;data=function(){return tmp;};}
var dataItem=data();if(dataItem.text){text=dataItem.text;if(!$.isFunction(text)){dataText=dataItem.text;text=function(item){return item[dataText];};}}
return function(query){var t=query.term,filtered={results:[]},process;if(t===""){query.callback(data());return;}
process=function(datum,collection){var group,attr;datum=datum[0];if(datum.children){group={};for(attr in datum){if(datum.hasOwnProperty(attr))group[attr]=datum[attr];}
group.children=[];$(datum.children).each2(function(i,childDatum){process(childDatum,group.children);});if(group.children.length||query.matcher(t,text(group),datum)){collection.push(group);}}else{if(query.matcher(t,text(datum),datum)){collection.push(datum);}}};$(data().results).each2(function(i,datum){process(datum,filtered.results);});query.callback(filtered);};}
function tags(data){var isFunc=$.isFunction(data);return function(query){var t=query.term,filtered={results:[]};$(isFunc?data():data).each(function(){var isObject=this.text!==undefined,text=isObject?this.text:this;if(t===""||query.matcher(t,text)){filtered.results.push(isObject?this:{id:this,text:this});}});query.callback(filtered);};}
function checkFormatter(formatter,formatterName){if($.isFunction(formatter))return true;if(!formatter)return false;throw new Error(formatterName+" must be a function or a falsy value");}
function evaluate(val){return $.isFunction(val)?val():val;}
function countResults(results){var count=0;$.each(results,function(i,item){if(item.children){count+=countResults(item.children);}else{count++;}});return count;}
function defaultTokenizer(input,selection,selectCallback,opts){var original=input,dupe=false,token,index,i,l,separator;if(!opts.createSearchChoice||!opts.tokenSeparators||opts.tokenSeparators.length<1)return undefined;while(true){index=-1;for(i=0,l=opts.tokenSeparators.length;i<l;i++){separator=opts.tokenSeparators[i];index=input.indexOf(separator);if(index>=0)break;}
if(index<0)break;token=input.substring(0,index);input=input.substring(index+separator.length);if(token.length>0){token=opts.createSearchChoice.call(this,token,selection);if(token!==undefined&&token!==null&&opts.id(token)!==undefined&&opts.id(token)!==null){dupe=false;for(i=0,l=selection.length;i<l;i++){if(equal(opts.id(token),opts.id(selection[i]))){dupe=true;break;}}
if(!dupe)selectCallback(token);}}}
if(original!==input)return input;}
function clazz(SuperClass,methods){var constructor=function(){};constructor.prototype=new SuperClass;constructor.prototype.constructor=constructor;constructor.prototype.parent=SuperClass.prototype;constructor.prototype=$.extend(constructor.prototype,methods);return constructor;}
AbstractSelect2=clazz(Object,{bind:function(func){var self=this;return function(){func.apply(self,arguments);};},init:function(opts){var results,search,resultsSelector=".select2-results";this.opts=opts=this.prepareOpts(opts);this.id=opts.id;if(opts.element.data("select2")!==undefined&&opts.element.data("select2")!==null){opts.element.data("select2").destroy();}
this.container=this.createContainer();this.containerId="s2id_"+(opts.element.attr("id")||"autogen"+nextUid());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,'\\$1');this.container.attr("id",this.containerId);this.body=thunk(function(){return opts.element.closest("body");});syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",opts.element.attr("style"));this.container.css(evaluate(opts.containerCss));this.container.addClass(evaluate(opts.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",killEvent);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(evaluate(opts.dropdownCssClass));this.dropdown.data("select2",this);this.dropdown.on("click",killEvent);this.results=results=this.container.find(resultsSelector);this.search=search=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",killEvent);installFilteredMouseMove(this.results);this.dropdown.on("mousemove-filtered touchstart touchmove touchend",resultsSelector,this.bind(this.highlightUnderEvent));installDebouncedScroll(80,this.results);this.dropdown.on("scroll-debounced",resultsSelector,this.bind(this.loadMoreIfNeeded));$(this.container).on("change",".select2-input",function(e){e.stopPropagation();});$(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation();});if($.fn.mousewheel){results.mousewheel(function(e,delta,deltaX,deltaY){var top=results.scrollTop();if(deltaY>0&&top-deltaY<=0){results.scrollTop(0);killEvent(e);}else if(deltaY<0&&results.get(0).scrollHeight-results.scrollTop()+deltaY<=results.height()){results.scrollTop(results.get(0).scrollHeight-results.height());killEvent(e);}});}
installKeyUpChangeEvent(search);search.on("keyup-change input paste",this.bind(this.updateResults));search.on("focus",function(){search.addClass("select2-focused");});search.on("blur",function(){search.removeClass("select2-focused");});this.dropdown.on("mouseup",resultsSelector,this.bind(function(e){if($(e.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(e);this.selectHighlighted(e);}}));this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation();});if($.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource();}
if(opts.maximumInputLength!==null){this.search.attr("maxlength",opts.maximumInputLength);}
var disabled=opts.element.prop("disabled");if(disabled===undefined)disabled=false;this.enable(!disabled);var readonly=opts.element.prop("readonly");if(readonly===undefined)readonly=false;this.readonly(readonly);scrollBarDimensions=scrollBarDimensions||measureScrollbar();this.autofocus=opts.element.prop("autofocus");opts.element.prop("autofocus",false);if(this.autofocus)this.focus();this.nextSearchTerm=undefined;},destroy:function(){var element=this.opts.element,select2=element.data("select2");this.close();if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null;}
if(select2!==undefined){select2.container.remove();select2.dropdown.remove();element.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||false);if(this.elementTabIndex){element.attr({tabindex:this.elementTabIndex});}else{element.removeAttr("tabindex");}
element.show();}},optionToData:function(element){if(element.is("option")){return{id:element.prop("value"),text:element.text(),element:element.get(),css:element.attr("class"),disabled:element.prop("disabled"),locked:equal(element.attr("locked"),"locked")||equal(element.data("locked"),true)};}else if(element.is("optgroup")){return{text:element.attr("label"),children:[],element:element.get(),css:element.attr("class")};}},prepareOpts:function(opts){var element,select,idKey,ajaxUrl,self=this;element=opts.element;if(element.get(0).tagName.toLowerCase()==="select"){this.select=select=opts.element;}
if(select){$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in opts){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");}});}
opts=$.extend({},{populateResults:function(container,results,query){var populate,id=this.opts.id;populate=function(results,container,depth){var i,l,result,selectable,disabled,compound,node,label,innerContainer,formatted;results=opts.sortResults(results,container,query);for(i=0,l=results.length;i<l;i=i+1){result=results[i];disabled=(result.disabled===true);selectable=(!disabled)&&(id(result)!==undefined);compound=result.children&&result.children.length>0;node=$("<li></li>");node.addClass("select2-results-dept-"+depth);node.addClass("select2-result");node.addClass(selectable?"select2-result-selectable":"select2-result-unselectable");if(disabled){node.addClass("select2-disabled");}
if(compound){node.addClass("select2-result-with-children");}
node.addClass(self.opts.formatResultCssClass(result));label=$(document.createElement("div"));label.addClass("select2-result-label");formatted=opts.formatResult(result,label,query,self.opts.escapeMarkup);if(formatted!==undefined){label.html(formatted);}
node.append(label);if(compound){innerContainer=$("<ul></ul>");innerContainer.addClass("select2-result-sub");populate(result.children,innerContainer,depth+1);node.append(innerContainer);}
node.data("select2-data",result);container.append(node);}};populate(results,container,0);}},$.fn.select2.defaults,opts);if(typeof(opts.id)!=="function"){idKey=opts.id;opts.id=function(e){return e[idKey];};}
if($.isArray(opts.element.data("select2Tags"))){if("tags"in opts){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+opts.element.attr("id");}
opts.tags=opts.element.data("select2Tags");}
if(select){opts.query=this.bind(function(query){var data={results:[],more:false},term=query.term,children,placeholderOption,process;process=function(element,collection){var group;if(element.is("option")){if(query.matcher(term,element.text(),element)){collection.push(self.optionToData(element));}}else if(element.is("optgroup")){group=self.optionToData(element);element.children().each2(function(i,elm){process(elm,group.children);});if(group.children.length>0){collection.push(group);}}};children=element.children();if(this.getPlaceholder()!==undefined&&children.length>0){placeholderOption=this.getPlaceholderOption();if(placeholderOption){children=children.not(placeholderOption);}}
children.each2(function(i,elm){process(elm,data.results);});query.callback(data);});opts.id=function(e){return e.id;};opts.formatResultCssClass=function(data){return data.css;};}else{if(!("query"in opts)){if("ajax"in opts){ajaxUrl=opts.element.data("ajax-url");if(ajaxUrl&&ajaxUrl.length>0){opts.ajax.url=ajaxUrl;}
opts.query=ajax.call(opts.element,opts.ajax);}else if("data"in opts){opts.query=local(opts.data);}else if("tags"in opts){opts.query=tags(opts.tags);if(opts.createSearchChoice===undefined){opts.createSearchChoice=function(term){return{id:$.trim(term),text:$.trim(term)};};}
if(opts.initSelection===undefined){opts.initSelection=function(element,callback){var data=[];$(splitVal(element.val(),opts.separator)).each(function(){var obj={id:this,text:this},tags=opts.tags;if($.isFunction(tags))tags=tags();$(tags).each(function(){if(equal(this.id,obj.id)){obj=this;return false;}});data.push(obj);});callback(data);};}}}}
if(typeof(opts.query)!=="function"){throw"query function not defined for Select2 "+opts.element.attr("id");}
return opts;},monitorSource:function(){var el=this.opts.element,sync,observer;el.on("change.select2",this.bind(function(e){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection();}}));sync=this.bind(function(){var disabled=el.prop("disabled");if(disabled===undefined)disabled=false;this.enable(!disabled);var readonly=el.prop("readonly");if(readonly===undefined)readonly=false;this.readonly(readonly);syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(evaluate(this.opts.containerCssClass));syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(evaluate(this.opts.dropdownCssClass));});el.on("propertychange.select2",sync);if(this.mutationCallback===undefined){this.mutationCallback=function(mutations){mutations.forEach(sync);}}
observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(observer!==undefined){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null;}
this.propertyObserver=new observer(this.mutationCallback);this.propertyObserver.observe(el.get(0),{attributes:true,subtree:false});}},triggerSelect:function(data){var evt=$.Event("select2-selecting",{val:this.id(data),object:data});this.opts.element.trigger(evt);return!evt.isDefaultPrevented();},triggerChange:function(details){details=details||{};details=$.extend({},details,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(details);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange)
this.opts.element.blur();},isInterfaceEnabled:function()
{return this.enabledInterface===true;},enableInterface:function(){var enabled=this._enabled&&!this._readonly,disabled=!enabled;if(enabled===this.enabledInterface)return false;this.container.toggleClass("select2-container-disabled",disabled);this.close();this.enabledInterface=enabled;return true;},enable:function(enabled){if(enabled===undefined)enabled=true;if(this._enabled===enabled)return;this._enabled=enabled;this.opts.element.prop("disabled",!enabled);this.enableInterface();},disable:function(){this.enable(false);},readonly:function(enabled){if(enabled===undefined)enabled=false;if(this._readonly===enabled)return false;this._readonly=enabled;this.opts.element.prop("readonly",enabled);this.enableInterface();return true;},opened:function(){return this.container.hasClass("select2-dropdown-open");},positionDropdown:function(){var $dropdown=this.dropdown,offset=this.container.offset(),height=this.container.outerHeight(false),width=this.container.outerWidth(false),dropHeight=$dropdown.outerHeight(false),$window=$(window),windowWidth=$window.width(),windowHeight=$window.height(),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,dropTop=offset.top+height,dropLeft=offset.left,enoughRoomBelow=dropTop+dropHeight<=viewportBottom,enoughRoomAbove=(offset.top-dropHeight)>=this.body().scrollTop(),dropWidth=$dropdown.outerWidth(false),enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight,aboveNow=$dropdown.hasClass("select2-drop-above"),bodyOffset,above,changeDirection,css,resultsListNode;if(aboveNow){above=true;if(!enoughRoomAbove&&enoughRoomBelow){changeDirection=true;above=false;}}else{above=false;if(!enoughRoomBelow&&enoughRoomAbove){changeDirection=true;above=true;}}
if(changeDirection){$dropdown.hide();offset=this.container.offset();height=this.container.outerHeight(false);width=this.container.outerWidth(false);dropHeight=$dropdown.outerHeight(false);viewPortRight=$window.scrollLeft()+windowWidth;viewportBottom=$window.scrollTop()+windowHeight;dropTop=offset.top+height;dropLeft=offset.left;dropWidth=$dropdown.outerWidth(false);enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight;$dropdown.show();}
if(this.opts.dropdownAutoWidth){resultsListNode=$('.select2-results',$dropdown)[0];$dropdown.addClass('select2-drop-auto-width');$dropdown.css('width','');dropWidth=$dropdown.outerWidth(false)+(resultsListNode.scrollHeight===resultsListNode.clientHeight?0:scrollBarDimensions.width);dropWidth>width?width=dropWidth:dropWidth=width;enoughRoomOnRight=dropLeft+dropWidth<=viewPortRight;}
else{this.container.removeClass('select2-drop-auto-width');}
if(this.body().css('position')!=='static'){bodyOffset=this.body().offset();dropTop-=bodyOffset.top;dropLeft-=bodyOffset.left;}
if(!enoughRoomOnRight){dropLeft=offset.left+width-dropWidth;}
css={left:dropLeft,width:width};if(above){css.bottom=windowHeight-offset.top;css.top='auto';this.container.addClass("select2-drop-above");$dropdown.addClass("select2-drop-above");}
else{css.top=dropTop;css.bottom='auto';this.container.removeClass("select2-drop-above");$dropdown.removeClass("select2-drop-above");}
css=$.extend(css,evaluate(this.opts.dropdownCss));$dropdown.css(css);},shouldOpen:function(){var event;if(this.opened())return false;if(this._enabled===false||this._readonly===true)return false;event=$.Event("select2-opening");this.opts.element.trigger(event);return!event.isDefaultPrevented();},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above");},open:function(){if(!this.shouldOpen())return false;this.opening();return true;},opening:function(){var cid=this.containerId,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid,mask;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body());}
mask=$("#select2-drop-mask");if(mask.length==0){mask=$(document.createElement("div"));mask.attr("id","select2-drop-mask").attr("class","select2-drop-mask");mask.hide();mask.appendTo(this.body());mask.on("mousedown touchstart click",function(e){var dropdown=$("#select2-drop"),self;if(dropdown.length>0){self=dropdown.data("select2");if(self.opts.selectOnBlur){self.selectHighlighted({noFocus:true});}
self.close({focus:true});e.preventDefault();e.stopPropagation();}});}
if(this.dropdown.prev()[0]!==mask[0]){this.dropdown.before(mask);}
$("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");mask.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var that=this;this.container.parents().add(window).each(function(){$(this).on(resize+" "+scroll+" "+orient,function(e){that.positionDropdown();});});},close:function(){if(!this.opened())return;var cid=this.containerId,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.parents().add(window).each(function(){$(this).off(scroll).off(resize).off(orient);});this.clearDropdownAlignmentPreference();$("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger($.Event("select2-close"));},externalSearch:function(term){this.open();this.search.val(term);this.updateResults(false);},clearSearch:function(){},getMaximumSelectionSize:function(){return evaluate(this.opts.maximumSelectionSize);},ensureHighlightVisible:function(){var results=this.results,children,index,child,hb,rb,y,more;index=this.highlight();if(index<0)return;if(index==0){results.scrollTop(0);return;}
children=this.findHighlightableChoices().find('.select2-result-label');child=$(children[index]);hb=child.offset().top+child.outerHeight(true);if(index===children.length-1){more=results.find("li.select2-more-results");if(more.length>0){hb=more.offset().top+more.outerHeight(true);}}
rb=results.offset().top+results.outerHeight(true);if(hb>rb){results.scrollTop(results.scrollTop()+(hb-rb));}
y=child.offset().top-results.offset().top;if(y<0&&child.css('display')!='none'){results.scrollTop(results.scrollTop()+y);}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)");},moveHighlight:function(delta){var choices=this.findHighlightableChoices(),index=this.highlight();while(index>-1&&index<choices.length){index+=delta;var choice=$(choices[index]);if(choice.hasClass("select2-result-selectable")&&!choice.hasClass("select2-disabled")&&!choice.hasClass("select2-selected")){this.highlight(index);break;}}},highlight:function(index){var choices=this.findHighlightableChoices(),choice,data;if(arguments.length===0){return indexOf(choices.filter(".select2-highlighted")[0],choices.get());}
if(index>=choices.length)index=choices.length-1;if(index<0)index=0;this.removeHighlight();choice=$(choices[index]);choice.addClass("select2-highlighted");this.ensureHighlightVisible();data=choice.data("select2-data");if(data){this.opts.element.trigger({type:"select2-highlight",val:this.id(data),choice:data});}},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted");},countSelectableResults:function(){return this.findHighlightableChoices().length;},highlightUnderEvent:function(event){var el=$(event.target).closest(".select2-result-selectable");if(el.length>0&&!el.is(".select2-highlighted")){var choices=this.findHighlightableChoices();this.highlight(choices.index(el));}else if(el.length==0){this.removeHighlight();}},loadMoreIfNeeded:function(){var results=this.results,more=results.find("li.select2-more-results"),below,page=this.resultsPage+1,self=this,term=this.search.val(),context=this.context;if(more.length===0)return;below=more.offset().top-results.offset().top-results.height();if(below<=this.opts.loadMorePadding){more.addClass("select2-active");this.opts.query({element:this.opts.element,term:term,page:page,context:context,matcher:this.opts.matcher,callback:this.bind(function(data){if(!self.opened())return;self.opts.populateResults.call(this,results,data.results,{term:term,page:page,context:context});self.postprocessResults(data,false,false);if(data.more===true){more.detach().appendTo(results).text(self.opts.formatLoadMore(page+1));window.setTimeout(function(){self.loadMoreIfNeeded();},10);}else{more.remove();}
self.positionDropdown();self.resultsPage=page;self.context=data.context;this.opts.element.trigger({type:"select2-loaded",items:data});})});}},tokenize:function(){},updateResults:function(initial){var search=this.search,results=this.results,opts=this.opts,data,self=this,input,term=search.val(),lastTerm=$.data(this.container,"select2-last-term"),queryNumber;if(initial!==true&&lastTerm&&equal(term,lastTerm))return;$.data(this.container,"select2-last-term",term);if(initial!==true&&(this.showSearchInput===false||!this.opened())){return;}
function postRender(){search.removeClass("select2-active");self.positionDropdown();}
function render(html){results.html(html);postRender();}
queryNumber=++this.queryCount;var maxSelSize=this.getMaximumSelectionSize();if(maxSelSize>=1){data=this.data();if($.isArray(data)&&data.length>=maxSelSize&&checkFormatter(opts.formatSelectionTooBig,"formatSelectionTooBig")){render("<li class='select2-selection-limit'>"+opts.formatSelectionTooBig(maxSelSize)+"</li>");return;}}
if(search.val().length<opts.minimumInputLength){if(checkFormatter(opts.formatInputTooShort,"formatInputTooShort")){render("<li class='select2-no-results'>"+opts.formatInputTooShort(search.val(),opts.minimumInputLength)+"</li>");}else{render("");}
if(initial&&this.showSearch)this.showSearch(true);return;}
if(opts.maximumInputLength&&search.val().length>opts.maximumInputLength){if(checkFormatter(opts.formatInputTooLong,"formatInputTooLong")){render("<li class='select2-no-results'>"+opts.formatInputTooLong(search.val(),opts.maximumInputLength)+"</li>");}else{render("");}
return;}
if(opts.formatSearching&&this.findHighlightableChoices().length===0){render("<li class='select2-searching'>"+opts.formatSearching()+"</li>");}
search.addClass("select2-active");this.removeHighlight();input=this.tokenize();if(input!=undefined&&input!=null){search.val(input);}
this.resultsPage=1;opts.query({element:opts.element,term:search.val(),page:this.resultsPage,context:null,matcher:opts.matcher,callback:this.bind(function(data){var def;if(queryNumber!=this.queryCount){return;}
if(!this.opened()){this.search.removeClass("select2-active");return;}
this.context=(data.context===undefined)?null:data.context;if(this.opts.createSearchChoice&&search.val()!==""){def=this.opts.createSearchChoice.call(self,search.val(),data.results);if(def!==undefined&&def!==null&&self.id(def)!==undefined&&self.id(def)!==null){if($(data.results).filter(function(){return equal(self.id(this),self.id(def));}).length===0){data.results.unshift(def);}}}
if(data.results.length===0&&checkFormatter(opts.formatNoMatches,"formatNoMatches")){render("<li class='select2-no-results'>"+opts.formatNoMatches(search.val())+"</li>");return;}
results.empty();self.opts.populateResults.call(this,results,data.results,{term:search.val(),page:this.resultsPage,context:null});if(data.more===true&&checkFormatter(opts.formatLoadMore,"formatLoadMore")){results.append("<li class='select2-more-results'>"+self.opts.escapeMarkup(opts.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){self.loadMoreIfNeeded();},10);}
this.postprocessResults(data,initial);postRender();this.opts.element.trigger({type:"select2-loaded",items:data});})});},cancel:function(){this.close();},blur:function(){if(this.opts.selectOnBlur)
this.selectHighlighted({noFocus:true});this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur();}
this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");},focusSearch:function(){focus(this.search);},selectHighlighted:function(options){var index=this.highlight(),highlighted=this.results.find(".select2-highlighted"),data=highlighted.closest('.select2-result').data("select2-data");if(data){this.highlight(index);this.onSelect(data,options);}else if(options&&options.noFocus){this.close();}},getPlaceholder:function(){var placeholderOption;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((placeholderOption=this.getPlaceholderOption())!==undefined?placeholderOption.text():undefined);},getPlaceholderOption:function(){if(this.select){var firstOption=this.select.children('option').first();if(this.opts.placeholderOption!==undefined){return(this.opts.placeholderOption==="first"&&firstOption)||(typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select));}else if(firstOption.text()===""&&firstOption.val()===""){return firstOption;}}},initContainerWidth:function(){function resolveContainerWidth(){var style,attrs,matches,i,l,attr;if(this.opts.width==="off"){return null;}else if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?'auto':this.opts.element.outerWidth(false)+'px';}else if(this.opts.width==="copy"||this.opts.width==="resolve"){style=this.opts.element.attr('style');if(style!==undefined){attrs=style.split(';');for(i=0,l=attrs.length;i<l;i=i+1){attr=attrs[i].replace(/\s/g,'');matches=attr.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(matches!==null&&matches.length>=1)
return matches[1];}}
if(this.opts.width==="resolve"){style=this.opts.element.css('width');if(style.indexOf("%")>0)return style;return(this.opts.element.outerWidth(false)===0?'auto':this.opts.element.outerWidth(false)+'px');}
return null;}else if($.isFunction(this.opts.width)){return this.opts.width();}else{return this.opts.width;}};var width=resolveContainerWidth.call(this);if(width!==null){this.container.css("width",width);}}});SingleSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=$(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return container;},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled());}},opening:function(){var el,range,len;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true);}
this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val());}
this.search.focus();el=this.search.get(0);if(el.createTextRange){range=el.createTextRange();range.collapse(false);range.select();}else if(el.setSelectionRange){len=this.search.val().length;el.setSelectionRange(len,len);}
if(this.search.val()===""){if(this.nextSearchTerm!=undefined){this.search.val(this.nextSearchTerm);this.search.select();}}
this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger($.Event("select2-open"));},close:function(params){if(!this.opened())return;this.parent.close.apply(this,arguments);params=params||{focus:true};this.focusser.removeAttr("disabled");if(params.focus){this.focusser.focus();}},focus:function(){if(this.opened()){this.close();}else{this.focusser.removeAttr("disabled");this.focusser.focus();}},isFocused:function(){return this.container.hasClass("select2-container-active");},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus();},destroy:function(){$("label[for='"+this.focusser.attr('id')+"']").attr('for',this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);},initContainer:function(){var selection,container=this.container,dropdown=this.dropdown;if(this.opts.minimumResultsForSearch<0){this.showSearch(false);}else{this.showSearch(true);}
this.selection=selection=container.find(".select2-choice");this.focusser=container.find(".select2-focusser");this.focusser.attr("id","s2id_autogen"+nextUid());$("label[for='"+this.opts.element.attr("id")+"']").attr('for',this.focusser.attr('id'));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN){killEvent(e);return;}
switch(e.which){case KEY.UP:case KEY.DOWN:this.moveHighlight((e.which===KEY.UP)?-1:1);killEvent(e);return;case KEY.ENTER:this.selectHighlighted();killEvent(e);return;case KEY.TAB:this.selectHighlighted({noFocus:true});return;case KEY.ESC:this.cancel(e);killEvent(e);return;}}));this.search.on("blur",this.bind(function(e){if(document.activeElement===this.body().get(0)){window.setTimeout(this.bind(function(){this.search.focus();}),0);}}));this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.ESC){return;}
if(this.opts.openOnEnter===false&&e.which===KEY.ENTER){killEvent(e);return;}
if(e.which==KEY.DOWN||e.which==KEY.UP||(e.which==KEY.ENTER&&this.opts.openOnEnter)){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open();killEvent(e);return;}
if(e.which==KEY.DELETE||e.which==KEY.BACKSPACE){if(this.opts.allowClear){this.clear();}
killEvent(e);return;}}));installKeyUpChangeEvent(this.focusser);this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open();}}));selection.on("mousedown","abbr",this.bind(function(e){if(!this.isInterfaceEnabled())return;this.clear();killEventImmediately(e);this.close();this.selection.focus();}));selection.on("mousedown",this.bind(function(e){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger($.Event("select2-focus"));}
if(this.opened()){this.close();}else if(this.isInterfaceEnabled()){this.open();}
killEvent(e);}));dropdown.on("mousedown",this.bind(function(){this.search.focus();}));selection.on("focus",this.bind(function(e){killEvent(e);}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger($.Event("select2-focus"));}
this.container.addClass("select2-container-active");})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger($.Event("select2-blur"));}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger($.Event("select2-focus"));}
this.container.addClass("select2-container-active");}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder();},clear:function(triggerChange){var data=this.selection.data("select2-data");if(data){var evt=$.Event("select2-clearing");this.opts.element.trigger(evt);if(evt.isDefaultPrevented()){return;}
var placeholderOption=this.getPlaceholderOption();this.opts.element.val(placeholderOption?placeholderOption.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(triggerChange!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data});this.triggerChange({removed:data});}}},initSelection:function(){var selected;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);this.close();this.setPlaceholder();}else{var self=this;this.opts.initSelection.call(null,this.opts.element,function(selected){if(selected!==undefined&&selected!==null){self.updateSelection(selected);self.close();self.setPlaceholder();}});}},isPlaceholderOptionSelected:function(){var placeholderOption;if(!this.getPlaceholder())return false;return((placeholderOption=this.getPlaceholderOption())!==undefined&&placeholderOption.prop("selected"))||(this.opts.element.val()==="")||(this.opts.element.val()===undefined)||(this.opts.element.val()===null);},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;if(opts.element.get(0).tagName.toLowerCase()==="select"){opts.initSelection=function(element,callback){var selected=element.find("option").filter(function(){return this.selected});callback(self.optionToData(selected));};}else if("data"in opts){opts.initSelection=opts.initSelection||function(element,callback){var id=element.val();var match=null;opts.query({matcher:function(term,text,el){var is_match=equal(id,opts.id(el));if(is_match){match=el;}
return is_match;},callback:!$.isFunction(callback)?$.noop:function(){callback(match);}});};}
return opts;},getPlaceholder:function(){if(this.select){if(this.getPlaceholderOption()===undefined){return undefined;}}
return this.parent.getPlaceholder.apply(this,arguments);},setPlaceholder:function(){var placeholder=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&placeholder!==undefined){if(this.select&&this.getPlaceholderOption()===undefined)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(placeholder));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear");}},postprocessResults:function(data,initial,noHighlightUpdate){var selected=0,self=this,showSearchInput=true;this.findHighlightableChoices().each2(function(i,elm){if(equal(self.id(elm.data("select2-data")),self.opts.element.val())){selected=i;return false;}});if(noHighlightUpdate!==false){if(initial===true&&selected>=0){this.highlight(selected);}else{this.highlight(0);}}
if(initial===true){var min=this.opts.minimumResultsForSearch;if(min>=0){this.showSearch(countResults(data.results)>=min);}}},showSearch:function(showSearchInput){if(this.showSearchInput===showSearchInput)return;this.showSearchInput=showSearchInput;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!showSearchInput);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!showSearchInput);$(this.dropdown,this.container).toggleClass("select2-with-searchbox",showSearchInput);},onSelect:function(data,options){if(!this.triggerSelect(data)){return;}
var old=this.opts.element.val(),oldData=this.data();this.opts.element.val(this.id(data));this.updateSelection(data);this.opts.element.trigger({type:"select2-selected",val:this.id(data),choice:data});this.nextSearchTerm=this.opts.nextSearchTerm(data,this.search.val());this.close();if(!options||!options.noFocus)
this.focusser.focus();if(!equal(old,this.id(data))){this.triggerChange({added:data,removed:oldData});}},updateSelection:function(data){var container=this.selection.find(".select2-chosen"),formatted,cssClass;this.selection.data("select2-data",data);container.empty();if(data!==null){formatted=this.opts.formatSelection(data,container,this.opts.escapeMarkup);}
if(formatted!==undefined){container.append(formatted);}
cssClass=this.opts.formatSelectionCssClass(data,container);if(cssClass!==undefined){container.addClass(cssClass);}
this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==undefined){this.container.addClass("select2-allowclear");}},val:function(){var val,triggerChange=false,data=null,self=this,oldData=this.data();if(arguments.length===0){return this.opts.element.val();}
val=arguments[0];if(arguments.length>1){triggerChange=arguments[1];}
if(this.select){this.select.val(val).find("option").filter(function(){return this.selected}).each2(function(i,elm){data=self.optionToData(elm);return false;});this.updateSelection(data);this.setPlaceholder();if(triggerChange){this.triggerChange({added:data,removed:oldData});}}else{if(!val&&val!==0){this.clear(triggerChange);return;}
if(this.opts.initSelection===undefined){throw new Error("cannot call val() if initSelection() is not defined");}
this.opts.element.val(val);this.opts.initSelection(this.opts.element,function(data){self.opts.element.val(!data?"":self.id(data));self.updateSelection(data);self.setPlaceholder();if(triggerChange){self.triggerChange({added:data,removed:oldData});}});}},clearSearch:function(){this.search.val("");this.focusser.val("");},data:function(value){var data,triggerChange=false;if(arguments.length===0){data=this.selection.data("select2-data");if(data==undefined)data=null;return data;}else{if(arguments.length>1){triggerChange=arguments[1];}
if(!value){this.clear(triggerChange);}else{data=this.data();this.opts.element.val(!value?"":this.id(value));this.updateSelection(value);if(triggerChange){this.triggerChange({added:value,removed:data});}}}}});MultiSelect2=clazz(AbstractSelect2,{createContainer:function(){var container=$(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return container;},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;if(opts.element.get(0).tagName.toLowerCase()==="select"){opts.initSelection=function(element,callback){var data=[];element.find("option").filter(function(){return this.selected}).each2(function(i,elm){data.push(self.optionToData(elm));});callback(data);};}else if("data"in opts){opts.initSelection=opts.initSelection||function(element,callback){var ids=splitVal(element.val(),opts.separator);var matches=[];opts.query({matcher:function(term,text,el){var is_match=$.grep(ids,function(id){return equal(id,opts.id(el));}).length;if(is_match){matches.push(el);}
return is_match;},callback:!$.isFunction(callback)?$.noop:function(){var ordered=[];for(var i=0;i<ids.length;i++){var id=ids[i];for(var j=0;j<matches.length;j++){var match=matches[j];if(equal(id,opts.id(match))){ordered.push(match);matches.splice(j,1);break;}}}
callback(ordered);}});};}
return opts;},selectChoice:function(choice){var selected=this.container.find(".select2-search-choice-focus");if(selected.length&&choice&&choice[0]==selected[0]){}else{if(selected.length){this.opts.element.trigger("choice-deselected",selected);}
selected.removeClass("select2-search-choice-focus");if(choice&&choice.length){this.close();choice.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",choice);}}},destroy:function(){$("label[for='"+this.search.attr('id')+"']").attr('for',this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);},initContainer:function(){var selector=".select2-choices",selection;this.searchContainer=this.container.find(".select2-search-field");this.selection=selection=this.container.find(selector);var _this=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){_this.search[0].focus();_this.selectChoice($(this));});this.search.attr("id","s2id_autogen"+nextUid());$("label[for='"+this.opts.element.attr("id")+"']").attr('for',this.search.attr('id'));this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled())return;if(!this.opened()){this.open();}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var selected=selection.find(".select2-search-choice-focus");var prev=selected.prev(".select2-search-choice:not(.select2-locked)");var next=selected.next(".select2-search-choice:not(.select2-locked)");var pos=getCursorInfo(this.search);if(selected.length&&(e.which==KEY.LEFT||e.which==KEY.RIGHT||e.which==KEY.BACKSPACE||e.which==KEY.DELETE||e.which==KEY.ENTER)){var selectedChoice=selected;if(e.which==KEY.LEFT&&prev.length){selectedChoice=prev;}
else if(e.which==KEY.RIGHT){selectedChoice=next.length?next:null;}
else if(e.which===KEY.BACKSPACE){this.unselect(selected.first());this.search.width(10);selectedChoice=prev.length?prev:next;}else if(e.which==KEY.DELETE){this.unselect(selected.first());this.search.width(10);selectedChoice=next.length?next:null;}else if(e.which==KEY.ENTER){selectedChoice=null;}
this.selectChoice(selectedChoice);killEvent(e);if(!selectedChoice||!selectedChoice.length){this.open();}
return;}else if(((e.which===KEY.BACKSPACE&&this.keydowns==1)||e.which==KEY.LEFT)&&(pos.offset==0&&!pos.length)){this.selectChoice(selection.find(".select2-search-choice:not(.select2-locked)").last());killEvent(e);return;}else{this.selectChoice(null);}
if(this.opened()){switch(e.which){case KEY.UP:case KEY.DOWN:this.moveHighlight((e.which===KEY.UP)?-1:1);killEvent(e);return;case KEY.ENTER:this.selectHighlighted();killEvent(e);return;case KEY.TAB:this.selectHighlighted({noFocus:true});this.close();return;case KEY.ESC:this.cancel(e);killEvent(e);return;}}
if(e.which===KEY.TAB||KEY.isControl(e)||KEY.isFunctionKey(e)||e.which===KEY.BACKSPACE||e.which===KEY.ESC){return;}
if(e.which===KEY.ENTER){if(this.opts.openOnEnter===false){return;}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey){return;}}
this.open();if(e.which===KEY.PAGE_UP||e.which===KEY.PAGE_DOWN){killEvent(e);}
if(e.which===KEY.ENTER){killEvent(e);}}));this.search.on("keyup",this.bind(function(e){this.keydowns=0;this.resizeSearch();}));this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened())this.clearSearch();e.stopImmediatePropagation();this.opts.element.trigger($.Event("select2-blur"));}));this.container.on("click",selector,this.bind(function(e){if(!this.isInterfaceEnabled())return;if($(e.target).closest(".select2-search-choice").length>0){return;}
this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger($.Event("select2-focus"));}
this.open();this.focusSearch();e.preventDefault();}));this.container.on("focus",selector,this.bind(function(){if(!this.isInterfaceEnabled())return;if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger($.Event("select2-focus"));}
this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder();}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch();},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled());}},initSelection:function(){var data;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch();}
if(this.select||this.opts.element.val()!==""){var self=this;this.opts.initSelection.call(null,this.opts.element,function(data){if(data!==undefined&&data!==null){self.updateSelection(data);self.close();self.clearSearch();}});}},clearSearch:function(){var placeholder=this.getPlaceholder(),maxWidth=this.getMaxSearchWidth();if(placeholder!==undefined&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(placeholder).addClass("select2-default");this.search.width(maxWidth>0?maxWidth:this.container.css("width"));}else{this.search.val("").width(10);}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default");}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(true);this.search.focus();this.opts.element.trigger($.Event("select2-open"));},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments);},focus:function(){this.close();this.search.focus();},isFocused:function(){return this.search.hasClass("select2-focused");},updateSelection:function(data){var ids=[],filtered=[],self=this;$(data).each(function(){if(indexOf(self.id(this),ids)<0){ids.push(self.id(this));filtered.push(this);}});data=filtered;this.selection.find(".select2-search-choice").remove();$(data).each(function(){self.addSelectedChoice(this);});self.postprocessResults();},tokenize:function(){var input=this.search.val();input=this.opts.tokenizer.call(this,input,this.data(),this.bind(this.onSelect),this.opts);if(input!=null&&input!=undefined){this.search.val(input);if(input.length>0){this.open();}}},onSelect:function(data,options){if(!this.triggerSelect(data)){return;}
this.addSelectedChoice(data);this.opts.element.trigger({type:"selected",val:this.id(data),choice:data});if(this.select||!this.opts.closeOnSelect)this.postprocessResults(data,false,this.opts.closeOnSelect===true);if(this.opts.closeOnSelect){this.close();this.search.width(10);}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true);}
this.positionDropdown();}else{this.close();this.search.width(10);}}
this.triggerChange({added:data});if(!options||!options.noFocus)
this.focusSearch();},cancel:function(){this.close();this.focusSearch();},addSelectedChoice:function(data){var enableChoice=!data.locked,enabledItem=$("<li class='select2-search-choice'>"+"    <div></div>"+"    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a>"+"</li>"),disabledItem=$("<li class='select2-search-choice select2-locked'>"+"<div></div>"+"</li>");var choice=enableChoice?enabledItem:disabledItem,id=this.id(data),val=this.getVal(),formatted,cssClass;formatted=this.opts.formatSelection(data,choice.find("div"),this.opts.escapeMarkup);if(formatted!=undefined){choice.find("div").replaceWith("<div>"+formatted+"</div>");}
cssClass=this.opts.formatSelectionCssClass(data,choice.find("div"));if(cssClass!=undefined){choice.addClass(cssClass);}
if(enableChoice){choice.find(".select2-search-choice-close").on("mousedown",killEvent).on("click dblclick",this.bind(function(e){if(!this.isInterfaceEnabled())return;$(e.target).closest(".select2-search-choice").fadeOut('fast',this.bind(function(){this.unselect($(e.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch();})).dequeue();killEvent(e);})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");}));}
choice.data("select2-data",data);choice.insertBefore(this.searchContainer);val.push(id);this.setVal(val);},unselect:function(selected){var val=this.getVal(),data,index;selected=selected.closest(".select2-search-choice");if(selected.length===0){throw"Invalid argument: "+selected+". Must be .select2-search-choice";}
data=selected.data("select2-data");if(!data){return;}
while((index=indexOf(this.id(data),val))>=0){val.splice(index,1);this.setVal(val);if(this.select)this.postprocessResults();}
var evt=$.Event("select2-removing");evt.val=this.id(data);evt.choice=data;this.opts.element.trigger(evt);if(evt.isDefaultPrevented()){return;}
selected.remove();this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data});this.triggerChange({removed:data});},postprocessResults:function(data,initial,noHighlightUpdate){var val=this.getVal(),choices=this.results.find(".select2-result"),compound=this.results.find(".select2-result-with-children"),self=this;choices.each2(function(i,choice){var id=self.id(choice.data("select2-data"));if(indexOf(id,val)>=0){choice.addClass("select2-selected");choice.find(".select2-result-selectable").addClass("select2-selected");}});compound.each2(function(i,choice){if(!choice.is('.select2-result-selectable')&&choice.find(".select2-result-selectable:not(.select2-selected)").length===0){choice.addClass("select2-selected");}});if(this.highlight()==-1&&noHighlightUpdate!==false){self.highlight(0);}
if(!this.opts.createSearchChoice&&!choices.filter('.select2-result:not(.select2-selected)').length>0){if(!data||data&&!data.more&&this.results.find(".select2-no-results").length===0){if(checkFormatter(self.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+self.opts.formatNoMatches(self.search.val())+"</li>");}}}},getMaxSearchWidth:function(){return this.selection.width()-getSideBorderPadding(this.search);},resizeSearch:function(){var minimumWidth,left,maxWidth,containerLeft,searchWidth,sideBorderPadding=getSideBorderPadding(this.search);minimumWidth=measureTextWidth(this.search)+10;left=this.search.offset().left;maxWidth=this.selection.width();containerLeft=this.selection.offset().left;searchWidth=maxWidth-(left-containerLeft)-sideBorderPadding;if(searchWidth<minimumWidth){searchWidth=maxWidth-sideBorderPadding;}
if(searchWidth<40){searchWidth=maxWidth-sideBorderPadding;}
if(searchWidth<=0){searchWidth=minimumWidth;}
this.search.width(Math.floor(searchWidth));},getVal:function(){var val;if(this.select){val=this.select.val();return val===null?[]:val;}else{val=this.opts.element.val();return splitVal(val,this.opts.separator);}},setVal:function(val){var unique;if(this.select){this.select.val(val);}else{unique=[];$(val).each(function(){if(indexOf(this,unique)<0)unique.push(this);});this.opts.element.val(unique.length===0?"":unique.join(this.opts.separator));}},buildChangeDetails:function(old,current){var current=current.slice(0),old=old.slice(0);for(var i=0;i<current.length;i++){for(var j=0;j<old.length;j++){if(equal(this.opts.id(current[i]),this.opts.id(old[j]))){current.splice(i,1);if(i>0){i--;}
old.splice(j,1);j--;}}}
return{added:current,removed:old};},val:function(val,triggerChange){var oldData,self=this;if(arguments.length===0){return this.getVal();}
oldData=this.data();if(!oldData.length)oldData=[];if(!val&&val!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(triggerChange){this.triggerChange({added:this.data(),removed:oldData});}
return;}
this.setVal(val);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(triggerChange){this.triggerChange(this.buildChangeDetails(oldData,this.data()));}}else{if(this.opts.initSelection===undefined){throw new Error("val() cannot be called if initSelection() is not defined");}
this.opts.initSelection(this.opts.element,function(data){var ids=$.map(data,self.id);self.setVal(ids);self.updateSelection(data);self.clearSearch();if(triggerChange){self.triggerChange(self.buildChangeDetails(oldData,self.data()));}});}
this.clearSearch();},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");}
this.search.width(0);this.searchContainer.hide();},onSortEnd:function(){var val=[],self=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){val.push(self.opts.id($(this).data("select2-data")));});this.setVal(val);this.triggerChange();},data:function(values,triggerChange){var self=this,ids,old;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return $(this).data("select2-data");}).get();}else{old=this.data();if(!values){values=[];}
ids=$.map(values,function(e){return self.opts.id(e);});this.setVal(ids);this.updateSelection(values);this.clearSearch();if(triggerChange){this.triggerChange(this.buildChangeDetails(old,this.data()));}}}});$.fn.select2=function(){var args=Array.prototype.slice.call(arguments,0),opts,select2,method,value,multiple,allowedMethods=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],valueMethods=["opened","isFocused","container","dropdown"],propertyMethods=["val","data"],methodsMap={search:"externalSearch"};this.each(function(){if(args.length===0||typeof(args[0])==="object"){opts=args.length===0?{}:$.extend({},args[0]);opts.element=$(this);if(opts.element.get(0).tagName.toLowerCase()==="select"){multiple=opts.element.prop("multiple");}else{multiple=opts.multiple||false;if("tags"in opts){opts.multiple=multiple=true;}}
select2=multiple?new MultiSelect2():new SingleSelect2();select2.init(opts);}else if(typeof(args[0])==="string"){if(indexOf(args[0],allowedMethods)<0){throw"Unknown method: "+args[0];}
value=undefined;select2=$(this).data("select2");if(select2===undefined)return;method=args[0];if(method==="container"){value=select2.container;}else if(method==="dropdown"){value=select2.dropdown;}else{if(methodsMap[method])method=methodsMap[method];value=select2[method].apply(select2,args.slice(1));}
if(indexOf(args[0],valueMethods)>=0||(indexOf(args[0],propertyMethods)&&args.length==1)){return false;}}else{throw"Invalid arguments to select2 plugin: "+args;}});return(value===undefined)?this:value;};$.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(result,container,query,escapeMarkup){var markup=[];markMatch(result.text,query.term,markup,escapeMarkup);return markup.join("");},formatSelection:function(data,container,escapeMarkup){return data?escapeMarkup(data.text):undefined;},sortResults:function(results,container,query){return results;},formatResultCssClass:function(data){return undefined;},formatSelectionCssClass:function(data,container){return undefined;},formatNoMatches:function(){return"No matches found";},formatInputTooShort:function(input,min){var n=min-input.length;return"Please enter "+n+" more character"+(n==1?"":"s");},formatInputTooLong:function(input,max){var n=input.length-max;return"Please delete "+n+" character"+(n==1?"":"s");},formatSelectionTooBig:function(limit){return"You can only select "+limit+" item"+(limit==1?"":"s");},formatLoadMore:function(pageNumber){return"Loading more results...";},formatSearching:function(){return"Searching...";},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id;},matcher:function(term,text){return stripDiacritics(''+text).toUpperCase().indexOf(stripDiacritics(''+term).toUpperCase())>=0;},separator:",",tokenSeparators:[],tokenizer:defaultTokenizer,escapeMarkup:defaultEscapeMarkup,blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(c){return c;},adaptDropdownCssClass:function(c){return null;},nextSearchTerm:function(selectedObject,currentSearchTerm){return undefined;}};$.fn.select2.ajaxDefaults={transport:$.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:ajax,local:local,tags:tags},util:{debounce:debounce,markMatch:markMatch,escapeMarkup:defaultEscapeMarkup,stripDiacritics:stripDiacritics},"class":{"abstract":AbstractSelect2,"single":SingleSelect2,"multi":MultiSelect2}};}(jQuery));angular.module('ui.select2',[]).value('uiSelect2Config',{}).directive('uiSelect2',['uiSelect2Config','$timeout',function(uiSelect2Config,$timeout){var options={};if(uiSelect2Config){angular.extend(options,uiSelect2Config);}
return{require:'ngModel',priority:1,compile:function(tElm,tAttrs){var watch,repeatOption,repeatAttr,isSelect=tElm.is('select'),isMultiple=angular.isDefined(tAttrs.multiple);if(tElm.is('select')){repeatOption=tElm.find('option[ng-repeat], option[data-ng-repeat]');if(repeatOption.length){repeatAttr=repeatOption.attr('ng-repeat')||repeatOption.attr('data-ng-repeat');watch=jQuery.trim(repeatAttr.split('|')[0]).split(' ').pop();}}
return function(scope,elm,attrs,controller){var opts=angular.extend({},options,scope.$eval(attrs.uiSelect2));var convertToAngularModel=function(select2_data){var model;if(opts.simple_tags){model=[];angular.forEach(select2_data,function(value,index){model.push(value.id);});}else{model=select2_data;}
return model;};var convertToSelect2Model=function(angular_data){var model=[];if(!angular_data){return model;}
if(opts.simple_tags){model=[];angular.forEach(angular_data,function(value,index){model.push({'id':value,'text':value});});}else{model=angular_data;}
return model;};if(isSelect){delete opts.multiple;delete opts.initSelection;}else if(isMultiple){opts.multiple=true;}
if(controller){scope.$watch(tAttrs.ngModel,function(current,old){if(!current){return;}
if(current===old){return;}
controller.$render();},true);controller.$render=function(){if(isSelect){elm.select2('val',controller.$viewValue);}else{if(opts.multiple){var viewValue=controller.$viewValue;if(angular.isString(viewValue)){viewValue=viewValue.split(',');}
elm.select2('data',convertToSelect2Model(viewValue));}else{if(angular.isObject(controller.$viewValue)){elm.select2('data',controller.$viewValue);}else if(!controller.$viewValue){elm.select2('data',null);}else{elm.select2('val',controller.$viewValue);}}}};if(watch){scope.$watch(watch,function(newVal,oldVal,scope){if(angular.equals(newVal,oldVal)){return;}
$timeout(function(){elm.select2('val',controller.$viewValue);elm.trigger('change');if(newVal&&!oldVal&&controller.$setPristine){controller.$setPristine(true);}});});}
controller.$parsers.push(function(value){var div=elm.prev();div.toggleClass('ng-invalid',!controller.$valid).toggleClass('ng-valid',controller.$valid).toggleClass('ng-invalid-required',!controller.$valid).toggleClass('ng-valid-required',controller.$valid).toggleClass('ng-dirty',controller.$dirty).toggleClass('ng-pristine',controller.$pristine);return value;});if(!isSelect){elm.bind("change",function(e){e.stopImmediatePropagation();if(scope.$$phase||scope.$root.$$phase){return;}
scope.$apply(function(){controller.$setViewValue(convertToAngularModel(elm.select2('data')));});});if(opts.initSelection){var initSelection=opts.initSelection;opts.initSelection=function(element,callback){initSelection(element,function(value){var isPristine=controller.$pristine;controller.$setViewValue(convertToAngularModel(value));callback(value);if(isPristine){controller.$setPristine();}
elm.prev().toggleClass('ng-pristine',controller.$pristine);});};}}}
elm.bind("$destroy",function(){elm.select2("destroy");});attrs.$observe('disabled',function(value){elm.select2('enable',!value);});attrs.$observe('readonly',function(value){elm.select2('readonly',!!value);});if(attrs.ngMultiple){scope.$watch(attrs.ngMultiple,function(newVal){attrs.$set('multiple',!!newVal);elm.select2(opts);});}
$timeout(function(){elm.select2(opts);elm.val(controller.$viewValue);controller.$render();if(!opts.initSelection&&!isSelect){controller.$setViewValue(convertToAngularModel(elm.select2('data')));}});};}};}]);angular.module('ui.sortable',[]).value('uiSortableConfig',{}).directive('uiSortable',['uiSortableConfig','$timeout','$log',function(uiSortableConfig,$timeout,$log){return{require:'?ngModel',link:function(scope,element,attrs,ngModel){var savedNodes;function combineCallbacks(first,second){if(second&&(typeof second==='function')){return function(e,ui){first(e,ui);second(e,ui);};}
return first;}
var opts={};var callbacks={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(opts,uiSortableConfig);if(ngModel){scope.$watch(attrs.ngModel+'.length',function(){$timeout(function(){if(!!element.data('ui-sortable')){element.sortable('refresh');}});});callbacks.start=function(e,ui){ui.item.sortable={index:ui.item.index(),cancel:function(){ui.item.sortable._isCanceled=true;},isCanceled:function(){return ui.item.sortable._isCanceled;},_isCanceled:false};};callbacks.activate=function(){savedNodes=element.contents();var placeholder=element.sortable('option','placeholder');if(placeholder&&placeholder.element&&typeof placeholder.element==='function'){var phElement=placeholder.element();if(!phElement.jquery){phElement=angular.element(phElement);}
var excludes=element.find('[class="'+phElement.attr('class')+'"]');savedNodes=savedNodes.not(excludes);}};callbacks.update=function(e,ui){if(!ui.item.sortable.received){ui.item.sortable.dropindex=ui.item.index();ui.item.sortable.droptarget=ui.item.parent();element.sortable('cancel');}
if(element.sortable('option','helper')==='clone'){savedNodes=savedNodes.not(savedNodes.last());}
savedNodes.appendTo(element);if(ui.item.sortable.received&&!ui.item.sortable.isCanceled()){scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ui.item.sortable.moved);});}};callbacks.stop=function(e,ui){if(!ui.item.sortable.received&&('dropindex'in ui.item.sortable)&&!ui.item.sortable.isCanceled()){scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ngModel.$modelValue.splice(ui.item.sortable.index,1)[0]);});}else{if((!('dropindex'in ui.item.sortable)||ui.item.sortable.isCanceled())&&element.sortable('option','helper')!=='clone'){savedNodes.appendTo(element);}}};callbacks.receive=function(e,ui){ui.item.sortable.received=true;};callbacks.remove=function(e,ui){if(!ui.item.sortable.isCanceled()){scope.$apply(function(){ui.item.sortable.moved=ngModel.$modelValue.splice(ui.item.sortable.index,1)[0];});}};scope.$watch(attrs.uiSortable,function(newVal){angular.forEach(newVal,function(value,key){if(callbacks[key]){if(key==='stop'){value=combineCallbacks(value,function(){scope.$apply();});}
value=combineCallbacks(callbacks[key],value);}
element.sortable('option',key,value);});},true);angular.forEach(callbacks,function(value,key){opts[key]=combineCallbacks(value,opts[key]);});}else{$log.info('ui.sortable: ngModel not provided!',element);}
element.sortable(opts);}};}])
/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
;if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",f.resetText||d.data("resetText",d[e]()),d[e](f[b]||this.options[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});return this.$element.trigger(j),j.isDefaultPrevented()?void 0:(this.sliding=!0,f&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),f&&this.cycle(),this)};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&"show"==c&&(c=!c),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());c.is("a")&&b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=-2*b.left,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);{var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})}},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(b.RESET).addClass("affix");var a=this.$window.scrollTop(),c=this.$element.offset();return this.pinnedOffset=c.top-a},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"top"==this.affixed&&(e.top+=d),"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:c-h-this.$element.height()}))}}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery)
/*!
 * jQuery blockUI plugin
 * Version 2.59.0-2013.04.05
 * @requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
;;(function(){"use strict";function setup($){$.fn._fadeIn=$.fn.fadeIn;var noOp=$.noop||function(){};var msie=/MSIE/.test(navigator.userAgent);var ie6=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var mode=document.documentMode||0;var setExpr=$.isFunction(document.createElement('div').style.setExpression);$.blockUI=function(opts){install(window,opts);};$.unblockUI=function(opts){remove(window,opts);};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');if(title)$m.append('<h1>'+title+'</h1>');if(message)$m.append('<h2>'+message+'</h2>');if(timeout===undefined)timeout=3000;$.blockUI({message:$m,fadeIn:700,fadeOut:1000,centerY:false,timeout:timeout,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS});};$.fn.block=function(opts){if(this[0]===window){$.blockUI(opts);return this;}
var fullOpts=$.extend({},$.blockUI.defaults,opts||{});this.each(function(){var $el=$(this);if(fullOpts.ignoreIfBlocked&&$el.data('blockUI.isBlocked'))
return;$el.unblock({fadeOut:0});});return this.each(function(){if($.css(this,'position')=='static'){this.style.position='relative';$(this).data('blockUI.static',true);}
this.style.zoom=1;install(this,opts);});};$.fn.unblock=function(opts){if(this[0]===window){$.unblockUI(opts);return this;}
return this.each(function(){remove(this,opts);});};$.blockUI.version=2.59;$.blockUI.defaults={message:'<h1>Please wait...</h1>',title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:'30%',top:'40%',left:'35%',textAlign:'center',color:'#000',border:'3px solid #aaa',backgroundColor:'#fff',cursor:'wait'},themedCSS:{width:'30%',top:'40%',left:'35%'},overlayCSS:{backgroundColor:'#000',opacity:0.6,cursor:'wait'},cursorReset:'default',growlCSS:{width:'350px',top:'10px',left:'',right:'10px',border:'none',padding:'5px',opacity:0.6,cursor:'default',color:'#fff',backgroundColor:'#000','-webkit-border-radius':'10px','-moz-border-radius':'10px','border-radius':'10px'},iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank',forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:80,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:'blockMsg',ignoreIfBlocked:false};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var css,themedCSS;var full=(el==window);var msg=(opts&&opts.message!==undefined?opts.message:undefined);opts=$.extend({},$.blockUI.defaults,opts||{});if(opts.ignoreIfBlocked&&$(el).data('blockUI.isBlocked'))
return;opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});css=$.extend({},$.blockUI.defaults.css,opts.css||{});if(opts.onOverlayClick)
opts.overlayCSS.cursor='pointer';themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock)
remove(window,{fadeOut:0});if(msg&&typeof msg!='string'&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data('blockUI.history',data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent)
data.parent.removeChild(node);}
$(el).data('blockUI.onUnblock',opts.onUnblock);var z=opts.baseZ;var lyr1,lyr2,lyr3,s;if(msie||opts.forceIframe)
lyr1=$('<iframe class="blockUI" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>');else
lyr1=$('<div class="blockUI" style="display:none"></div>');if(opts.theme)
lyr2=$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(z++)+';display:none"></div>');else
lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');if(opts.theme&&full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||'&nbsp;')+'</div>';}
s+='<div class="ui-widget-content ui-dialog-content"></div>';s+='</div>';}
else if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">';if(opts.title){s+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||'&nbsp;')+'</div>';}
s+='<div class="ui-widget-content ui-dialog-content"></div>';s+='</div>';}
else if(full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>';}
else{s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>';}
lyr3=$(s);if(msg){if(opts.theme){lyr3.css(themedCSS);lyr3.addClass('ui-widget-content');}
else
lyr3.css(css);}
if(!opts.theme)
lyr2.css(opts.overlayCSS);lyr2.css('position',full?'fixed':'absolute');if(msie||opts.forceIframe)
lyr1.css('opacity',0.0);var layers=[lyr1,lyr2,lyr3],$par=full?$('body'):$(el);$.each(layers,function(){this.appendTo($par);});if(opts.theme&&opts.draggable&&$.fn.draggable){lyr3.draggable({handle:'.ui-dialog-titlebar',cancel:'li'});}
var expr=setExpr&&(!$.support.boxModel||$('object,embed',full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.support.boxModel)
$('html,body').css('height','100%');if((ie6||!$.support.boxModel)&&!full){var t=sz(el,'borderTopWidth'),l=sz(el,'borderLeftWidth');var fixT=t?'(0 - '+t+')':0;var fixL=l?'(0 - '+l+')':0;}
$.each(layers,function(i,o){var s=o[0].style;s.position='absolute';if(i<2){if(full)
s.setExpression('height','Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:'+opts.quirksmodeOffsetHack+') + "px"');else
s.setExpression('height','this.parentNode.offsetHeight + "px"');if(full)
s.setExpression('width','jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"');else
s.setExpression('width','this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression('left',fixL);if(fixT)s.setExpression('top',fixT);}
else if(opts.centerY){if(full)s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');s.marginTop=0;}
else if(!opts.centerY&&full){var top=(opts.css&&opts.css.top)?parseInt(opts.css.top,10):0;var expression='((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + '+top+') + "px"';s.setExpression('top',expression);}});}
if(msg){if(opts.theme)
lyr3.find('.ui-widget-content').append(msg);else
lyr3.append(msg);if(msg.jquery||msg.nodeType)
$(msg).show();}
if((msie||opts.forceIframe)&&opts.showOverlay)
lyr1.show();if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp;var cb1=(opts.showOverlay&&!msg)?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay)
lyr2._fadeIn(opts.fadeIn,cb1);if(msg)
lyr3._fadeIn(opts.fadeIn,cb2);}
else{if(opts.showOverlay)
lyr2.show();if(msg)
lyr3.show();if(opts.onBlock)
opts.onBlock();}
bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(':input:enabled:visible',pageBlock);if(opts.focusInput)
setTimeout(focus,20);}
else
center(lyr3[0],opts.centerX,opts.centerY);if(opts.timeout){var to=setTimeout(function(){if(full)
$.unblockUI(opts);else
$(el).unblock(opts);},opts.timeout);$(el).data('blockUI.timeout',to);}}
function remove(el,opts){var count;var full=(el==window);var $el=$(el);var data=$el.data('blockUI.history');var to=$el.data('blockUI.timeout');if(to){clearTimeout(to);$el.removeData('blockUI.timeout');}
opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data('blockUI.onUnblock');$el.removeData('blockUI.onUnblock');}
var els;if(full)
els=$('body').children().filter('.blockUI').add('body > .blockUI');else
els=$el.find('>.blockUI');if(opts.cursorReset){if(els.length>1)
els[1].style.cursor=opts.cursorReset;if(els.length>2)
els[2].style.cursor=opts.cursorReset;}
if(full)
pageBlock=pageBlockEls=null;if(opts.fadeOut){count=els.length;els.fadeOut(opts.fadeOut,function(){if(--count===0)
reset(els,data,opts,el);});}
else
reset(els,data,opts,el);}
function reset(els,data,opts,el){var $el=$(el);els.each(function(i,o){if(this.parentNode)
this.parentNode.removeChild(this);});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;if(data.parent)
data.parent.appendChild(data.el);$el.removeData('blockUI.history');}
if($el.data('blockUI.static')){$el.css('position','static');}
if(typeof opts.onUnblock=='function')
opts.onUnblock(el,opts);var body=$(document.body),w=body.width(),cssW=body[0].style.width;body.width(w-1).width(w);body[0].style.width=cssW;}
function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data('blockUI.isBlocked')))
return;$el.data('blockUI.isBlocked',b);if(!full||!opts.bindEvents||(b&&!opts.showOverlay))
return;var events='mousedown mouseup keydown keypress keyup touchstart touchend touchmove';if(b)
$(document).bind(events,opts,handler);else
$(document).unbind(events,handler);}
function handler(e){if(e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back);},10);return false;}}}
var opts=e.data;var target=$(e.target);if(target.hasClass('blockOverlay')&&opts.onOverlayClick)
opts.onOverlayClick();if(target.parents('div.'+opts.blockMsgClass).length>0)
return true;return target.parents().children().filter('div.blockUI').length===0;}
function focus(back){if(!pageBlockEls)
return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)
e.focus();}
function center(el,x,y){var p=el.parentNode,s=el.style;var l=((p.offsetWidth-el.offsetWidth)/2)-sz(p,'borderLeftWidth');var t=((p.offsetHeight-el.offsetHeight)/2)-sz(p,'borderTopWidth');if(x)s.left=l>0?(l+'px'):'0';if(y)s.top=t>0?(t+'px'):'0';}
function sz(el,p){return parseInt($.css(el,p),10)||0;}}
if(typeof define==='function'&&define.amd&&define.amd.jQuery){define(['jquery'],setup);}else{setup(jQuery);}})();(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else if(typeof exports==="object"){module.exports=factory(require("jquery"));}else{root.bootbox=factory(root.jQuery);}}(this,function init($,undefined){"use strict";var templates={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-body'><div class='bootbox-body'></div></div>"+"</div>"+"</div>"+"</div>",header:"<div class='modal-header'>"+"<h4 class='modal-title'></h4>"+"</div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}};var defaults={locale:"en",backdrop:true,animate:true,className:null,closeButton:true,show:true,container:"body"};var exports={};function _t(key){var locale=locales[defaults.locale];return locale?locale[key]:locales.en[key];}
function processCallback(e,dialog,callback){e.stopPropagation();e.preventDefault();var preserveDialog=$.isFunction(callback)&&callback(e)===false;if(!preserveDialog){dialog.modal("hide");}}
function getKeyLength(obj){var k,t=0;for(k in obj){t++;}
return t;}
function each(collection,iterator){var index=0;$.each(collection,function(key,value){iterator(key,value,index++);});}
function sanitize(options){var buttons;var total;if(typeof options!=="object"){throw new Error("Please supply an object of options");}
if(!options.message){throw new Error("Please specify a message");}
options=$.extend({},defaults,options);if(!options.buttons){options.buttons={};}
options.backdrop=options.backdrop?"static":false;buttons=options.buttons;total=getKeyLength(buttons);each(buttons,function(key,button,index){if($.isFunction(button)){button=buttons[key]={callback:button};}
if($.type(button)!=="object"){throw new Error("button with key "+key+" must be an object");}
if(!button.label){button.label=key;}
if(!button.className){if(total<=2&&index===total-1){button.className="btn-primary";}else{button.className="btn-default";}}});return options;}
function mapArguments(args,properties){var argn=args.length;var options={};if(argn<1||argn>2){throw new Error("Invalid argument length");}
if(argn===2||typeof args[0]==="string"){options[properties[0]]=args[0];options[properties[1]]=args[1];}else{options=args[0];}
return options;}
function mergeArguments(defaults,args,properties){return $.extend(true,{},defaults,mapArguments(args,properties));}
function mergeDialogOptions(className,labels,properties,args){var baseOptions={className:"bootbox-"+className,buttons:createLabels.apply(null,labels)};return validateButtons(mergeArguments(baseOptions,args,properties),labels);}
function createLabels(){var buttons={};for(var i=0,j=arguments.length;i<j;i++){var argument=arguments[i];var key=argument.toLowerCase();var value=argument.toUpperCase();buttons[key]={label:_t(value)};}
return buttons;}
function validateButtons(options,buttons){var allowedButtons={};each(buttons,function(key,value){allowedButtons[value]=true;});each(options.buttons,function(key){if(allowedButtons[key]===undefined){throw new Error("button key "+key+" is not allowed (options are "+buttons.join("\n")+")");}});return options;}
exports.alert=function(){var options;options=mergeDialogOptions("alert",["ok"],["message","callback"],arguments);if(options.callback&&!$.isFunction(options.callback)){throw new Error("alert requires callback property to be a function when provided");}
options.buttons.ok.callback=options.onEscape=function(){if($.isFunction(options.callback)){return options.callback();}
return true;};return exports.dialog(options);};exports.confirm=function(){var options;options=mergeDialogOptions("confirm",["cancel","confirm"],["message","callback"],arguments);options.buttons.cancel.callback=options.onEscape=function(){return options.callback(false);};options.buttons.confirm.callback=function(){return options.callback(true);};if(!$.isFunction(options.callback)){throw new Error("confirm requires a callback");}
return exports.dialog(options);};exports.prompt=function(){var options;var defaults;var dialog;var form;var input;var shouldShow;var inputOptions;form=$(templates.form);defaults={className:"bootbox-prompt",buttons:createLabels("cancel","confirm"),value:"",inputType:"text"};options=validateButtons(mergeArguments(defaults,arguments,["title","callback"]),["cancel","confirm"]);shouldShow=(options.show===undefined)?true:options.show;var html5inputs=["date","time","number"];var i=document.createElement("input");i.setAttribute("type",options.inputType);if(html5inputs[options.inputType]){options.inputType=i.type;}
options.message=form;options.buttons.cancel.callback=options.onEscape=function(){return options.callback(null);};options.buttons.confirm.callback=function(){var value;switch(options.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":value=input.val();break;case"checkbox":var checkedItems=input.find("input:checked");value=[];each(checkedItems,function(_,item){value.push($(item).val());});break;}
return options.callback(value);};options.show=false;if(!options.title){throw new Error("prompt requires a title");}
if(!$.isFunction(options.callback)){throw new Error("prompt requires a callback");}
if(!templates.inputs[options.inputType]){throw new Error("invalid prompt type");}
input=$(templates.inputs[options.inputType]);switch(options.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":input.val(options.value);break;case"select":var groups={};inputOptions=options.inputOptions||[];if(!inputOptions.length){throw new Error("prompt with select requires options");}
each(inputOptions,function(_,option){var elem=input;if(option.value===undefined||option.text===undefined){throw new Error("given options in wrong format");}
if(option.group){if(!groups[option.group]){groups[option.group]=$("<optgroup/>").attr("label",option.group);}
elem=groups[option.group];}
elem.append("<option value='"+option.value+"'>"+option.text+"</option>");});each(groups,function(_,group){input.append(group);});input.val(options.value);break;case"checkbox":var values=$.isArray(options.value)?options.value:[options.value];inputOptions=options.inputOptions||[];if(!inputOptions.length){throw new Error("prompt with checkbox requires options");}
if(!inputOptions[0].value||!inputOptions[0].text){throw new Error("given options in wrong format");}
input=$("<div/>");each(inputOptions,function(_,option){var checkbox=$(templates.inputs[options.inputType]);checkbox.find("input").attr("value",option.value);checkbox.find("label").append(option.text);each(values,function(_,value){if(value===option.value){checkbox.find("input").prop("checked",true);}});input.append(checkbox);});break;}
if(options.placeholder){input.attr("placeholder",options.placeholder);}
if(options.pattern){input.attr("pattern",options.pattern);}
form.append(input);form.on("submit",function(e){e.preventDefault();dialog.find(".btn-primary").click();});dialog=exports.dialog(options);dialog.off("shown.bs.modal");dialog.on("shown.bs.modal",function(){input.focus();});if(shouldShow===true){dialog.modal("show");}
return dialog;};exports.dialog=function(options){options=sanitize(options);var dialog=$(templates.dialog);var body=dialog.find(".modal-body");var buttons=options.buttons;var buttonStr="";var callbacks={onEscape:options.onEscape};each(buttons,function(key,button){buttonStr+="<button data-bb-handler='"+key+"' type='button' class='btn "+button.className+"'>"+button.label+"</button>";callbacks[key]=button.callback;});body.find(".bootbox-body").html(options.message);if(options.animate===true){dialog.addClass("fade");}
if(options.className){dialog.addClass(options.className);}
if(options.title){body.before(templates.header);}
if(options.closeButton){var closeButton=$(templates.closeButton);if(options.title){dialog.find(".modal-header").prepend(closeButton);}else{closeButton.css("margin-top","-10px").prependTo(body);}}
if(options.title){dialog.find(".modal-title").html(options.title);}
if(buttonStr.length){body.after(templates.footer);dialog.find(".modal-footer").html(buttonStr);}
dialog.on("hidden.bs.modal",function(e){if(e.target===this){dialog.remove();}});dialog.on("shown.bs.modal",function(){dialog.find(".btn-primary:first").focus();});dialog.on("escape.close.bb",function(e){if(callbacks.onEscape){processCallback(e,dialog,callbacks.onEscape);}});dialog.on("click",".modal-footer button",function(e){var callbackKey=$(this).data("bb-handler");processCallback(e,dialog,callbacks[callbackKey]);});dialog.on("click",".bootbox-close-button",function(e){processCallback(e,dialog,callbacks.onEscape);});dialog.on("keyup",function(e){if(e.which===27){dialog.trigger("escape.close.bb");}});$(options.container).append(dialog);dialog.modal({backdrop:options.backdrop,keyboard:false,show:false});if(options.show){dialog.modal("show");}
return dialog;};exports.setDefaults=function(){var values={};if(arguments.length===2){values[arguments[0]]=arguments[1];}else{values=arguments[0];}
$.extend(defaults,values);};exports.hideAll=function(){$(".bootbox").modal("hide");};var locales={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};exports.init=function(_$){return init(_$||$);};return exports;}));"use strict";angular.module("ui.checkbox",[]).directive("checkbox",function(){return{scope:{},require:"ngModel",restrict:"E",replace:"true",template:"<button type=\"button\" ng-style=\"stylebtn\" class=\"btn btn-default\" ng-class=\"{'btn-xs': size==='default', 'btn-sm': size==='large', 'btn-lg': size==='largest'}\">"+"<span ng-style=\"styleicon\" class=\"fa\" ng-class=\"{'fa-check': checked===true}\"></span>"+"</button>",link:function(scope,elem,attrs,modelCtrl){scope.size="default";scope.stylebtn={};scope.styleicon={"width":"10px","left":"-1px"};if(attrs.large!==undefined){scope.size="large";scope.stylebtn={"padding-top":"2px","padding-bottom":"2px","height":"30px"};scope.styleicon={"width":"8px","left":"-5px","font-size":"17px"};}
if(attrs.larger!==undefined){scope.size="larger";scope.stylebtn={"padding-top":"2px","padding-bottom":"2px","height":"34px"};scope.styleicon={"width":"8px","left":"-8px","font-size":"22px"};}
if(attrs.largest!==undefined){scope.size="largest";scope.stylebtn={"padding-top":"2px","padding-bottom":"2px","height":"45px"};scope.styleicon={"width":"11px","left":"-11px","font-size":"30px"};}
var trueValue=true;var falseValue=false;if(attrs.ngTrueValue!==undefined){trueValue=attrs.ngTrueValue;}
if(attrs.ngFalseValue!==undefined){falseValue=attrs.ngFalseValue;}
if(scope.name!==undefined){elem.name=scope.name;}
scope.$watch(function(){if(modelCtrl.$modelValue===trueValue||modelCtrl.$modelValue===true){modelCtrl.$setViewValue(trueValue);}else{modelCtrl.$setViewValue(falseValue);}
return modelCtrl.$modelValue;},function(newVal,oldVal){scope.checked=modelCtrl.$modelValue===trueValue;},true);elem.bind("click",function(){scope.$apply(function(){if(modelCtrl.$modelValue===falseValue){modelCtrl.$setViewValue(trueValue);}else{modelCtrl.$setViewValue(falseValue);}});});}};});(function(document,window){'use strict';angular.module('googlechart',[]).constant('googleChartApiConfig',{version:'1',optionalSettings:{packages:['corechart']}}).provider('googleJsapiUrl',function(){var protocol='';var url='//www.google.com/jsapi';this.setProtocol=function(newProtocol){protocol=newProtocol;};this.setUrl=function(newUrl){url=newUrl;};this.$get=function(){return(protocol?protocol:'')+url;};}).factory('googleChartApiProxy',['$rootScope','$q','googleChartApiConfig','googleJsapiUrl',function($rootScope,$q,apiConfig,googleJsapiUrl){var apiReady=$q.defer(),onLoad=function(){var settings={callback:function(){var oldCb=apiConfig.optionalSettings.callback;$rootScope.$apply(function(){apiReady.resolve();});if(angular.isFunction(oldCb)){oldCb.call(this);}}};settings=angular.extend({},apiConfig.optionalSettings,settings);window.google.load('visualization',apiConfig.version,settings);};jQuery.getScript(googleJsapiUrl,onLoad);return function(fn,context){var args=Array.prototype.slice.call(arguments,2);return function(){apiReady.promise.then(function(){fn.apply(context,args.concat(Array.prototype.slice.call(arguments)));});};};}]).directive('googleChart',['$timeout','$window','$rootScope','googleChartApiProxy',function($timeout,$window,$rootScope,apiProxy){return{restrict:'A',scope:{chart:'=chart',onReady:'&',select:'&'},link:function($scope,$elm,$attr){$scope.$watch('chart',function(){draw();},true);$rootScope.$on('resizeMsg',function(e){$timeout(function(){if($scope.chartWrapper){$scope.chartWrapper.draw();}});});function applyFormat(formatType,formatClass,dataTable){if(typeof($scope.chart.formatters[formatType])!='undefined'){if($scope.formatters[formatType]==null){$scope.formatters[formatType]=new Array();if(formatType==='color'){for(var cIdx=0;cIdx<$scope.chart.formatters[formatType].length;cIdx++){var colorFormat=new formatClass();for(var i=0;i<$scope.chart.formatters[formatType][cIdx].formats.length;i++){var data=$scope.chart.formatters[formatType][cIdx].formats[i];if(typeof(data.fromBgColor)!='undefined'&&typeof(data.toBgColor)!='undefined')
colorFormat.addGradientRange(data.from,data.to,data.color,data.fromBgColor,data.toBgColor);else
colorFormat.addRange(data.from,data.to,data.color,data.bgcolor);}
$scope.formatters[formatType].push(colorFormat)}}else{for(var i=0;i<$scope.chart.formatters[formatType].length;i++){$scope.formatters[formatType].push(new formatClass($scope.chart.formatters[formatType][i]));}}}
for(var i=0;i<$scope.formatters[formatType].length;i++){if($scope.chart.formatters[formatType][i].columnNum<dataTable.getNumberOfColumns())
$scope.formatters[formatType][i].format(dataTable,$scope.chart.formatters[formatType][i].columnNum);}
if(formatType==='arrow'||formatType==='bar'||formatType==='color')
$scope.chart.options.allowHtml=true;}}
function draw(){if(!draw.triggered&&($scope.chart!=undefined)){draw.triggered=true;$timeout(function(){draw.triggered=false;if(typeof($scope.formatters)==='undefined')
$scope.formatters={};var dataTable;if($scope.chart.data instanceof google.visualization.DataTable)
dataTable=$scope.chart.data;else if(jQuery.isArray($scope.chart.data))
dataTable=google.visualization.arrayToDataTable($scope.chart.data);else
dataTable=new google.visualization.DataTable($scope.chart.data,0.5);if(typeof($scope.chart.formatters)!='undefined'){applyFormat("number",google.visualization.NumberFormat,dataTable);applyFormat("arrow",google.visualization.ArrowFormat,dataTable);applyFormat("date",google.visualization.DateFormat,dataTable);applyFormat("bar",google.visualization.BarFormat,dataTable);applyFormat("color",google.visualization.ColorFormat,dataTable);}
var chartWrapperArgs={chartType:$scope.chart.type,dataTable:dataTable,view:$scope.chart.view,options:$scope.chart.options,containerId:$elm[0]};if($scope.chartWrapper==null){$scope.chartWrapper=new google.visualization.ChartWrapper(chartWrapperArgs);google.visualization.events.addListener($scope.chartWrapper,'ready',function(){$scope.chart.displayed=true;$scope.$apply(function(scope){scope.onReady({chartWrapper:scope.chartWrapper});});});google.visualization.events.addListener($scope.chartWrapper,'error',function(err){console.log("Chart not displayed due to error: "+err.message);});google.visualization.events.addListener($scope.chartWrapper,'select',function(){var selectedItem=$scope.chartWrapper.getChart().getSelection()[0];if(selectedItem){$scope.$apply(function(){$scope.select({selectedItem:selectedItem});});}});}
else{$scope.chartWrapper.setChartType($scope.chart.type);$scope.chartWrapper.setDataTable(dataTable);$scope.chartWrapper.setView($scope.chart.view);$scope.chartWrapper.setOptions($scope.chart.options);}
$timeout(function(){$scope.chartWrapper.draw();});},0,true);}}
draw=apiProxy(draw,this);}};}]).run(['$rootScope','$window',function($rootScope,$window){angular.element($window).bind('resize',function(){$rootScope.$emit('resizeMsg');});}]);})(document,window);(function($){$.fn.showModal=function(){$(this).fadeIn().css('top','20%');}
$.fn.minSize=function()
{var self=$(this),top=self.offset().top,bottom=$(window).height(),height=bottom-top;self.css('height',height);$(window).resize(function()
{bottom=$(window).height();height=bottom-top;self.css('height',height);});}})(jQuery);function hideModal()
{$('.modal.fade').fadeOut().css('top','-25%');}
function menuControl(activeMenu){var currentMenu=document.getElementsByClassName('active')[0];if(currentMenu&&currentMenu!=activeMenu){currentMenu.classList.remove('active');};if(activeMenu!='dashboard'&&currentMenu!=activeMenu){var activeMenu=document.getElementById(activeMenu);activeMenu.classList.add('active');}}
function block()
{$('#container').block({message:'<div class="spinner"></div>',css:{backgroundColor:'transparent',border:0,opacity:0.6},overlayCSS:{backgroundColor:'#fff'}});$('body').addClass('loading');}
function unBlock(){$('#container').unblock();$('body').removeClass('loading');}
function init_page(){unBlock();$('a[href*="#"]').click(function(){var currentHash=window.location.hash,newHash=$(this).attr('href');if(currentHash!=newHash){block();if($('body').hasClass('open'))$('body').removeClass('open');};});if(window.location.hash!='#/'){clearInterval(dashboardRefresh);};}
function showFadeAlert()
{$('#mainAlert').addClass('show');setTimeout(function(){$('#mainAlert').removeClass('show');},3000);}
function showAlert()
{$('#mainAlert').addClass('show');}
function fadeAlert()
{$('#mainAlert').removeClass('show');}
$.fn.scrollTo=function()
{var offset=$(this).offset();$(window).animate({scrollTop:offset.top+40},2000,'easeInOutCubic');}
jQuery(document).ready(function($){$('#loading').fadeOut();$('[data-toggle="tooltip"]').tooltip();$('#quick-action-modal a').click(function()
{$('#quick-action-modal').modal('hide');});$('#assetTogle, #closeAssets').click(function()
{$('#assets-manager').fadeToggle();})
$(".draggable").draggable();$(".resizable").resizable();});$('#toggle-menu').click(function()
{$('body').toggleClass('open');});function flushCache(cacheType)
{if(confirm("Voulez vous supprimer tout le cache de l'application ?")){$.ajax({url:"/maintenance/flush_cache/"+cacheType}).done(function(data){console.log(data);});}}
function setGUID()
{return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:r&0x3|0x8;return v.toString(16);});}
function checkSession()
{$.getJSON("/index.php/session/is_connected",function(data)
{console.log(data);if(data==0){alert('Votre session a expiré, veuillez vous identifier');window.location.reload();};});};var checkSessionHandler=setInterval(function()
{checkSession();},10000);function friendly_url(str,max){if(max===undefined)max=32;var a_chars=new Array(new Array("a",/[áàâãªÁÀÂÃ]/g),new Array("e",/[éèêÉÈÊ]/g),new Array("i",/[íìîÍÌÎ]/g),new Array("o",/[òóôõºÓÒÔÕ]/g),new Array("u",/[úùûÚÙÛ]/g),new Array("c",/[çÇ]/g),new Array("n",/[Ññ]/g));for(var i=0;i<a_chars.length;i++)
str=str.replace(a_chars[i][1],a_chars[i][0]);return str.replace(/\s+/g,'-').toLowerCase().replace(/[^a-z0-9\-]/g,'').replace(/\-{2,}/g,'-').replace(/(^\s*)|(\s*$)/g,'').substr(0,max);}
function clone(srcInstance)
{if(typeof(srcInstance)!='object'||srcInstance==null)
{return srcInstance;}
var newInstance=srcInstance.constructor();for(var i in srcInstance)
{newInstance[i]=clone(srcInstance[i]);}
return newInstance;}
(function($){$.Jcrop=function(obj,opt){var options=$.extend({},$.Jcrop.defaults),docOffset,_ua=navigator.userAgent.toLowerCase(),is_msie=/msie/.test(_ua),ie6mode=/msie [1-6]\./.test(_ua);function px(n){return Math.round(n)+'px';}
function cssClass(cl){return options.baseClass+'-'+cl;}
function supportsColorFade(){return $.fx.step.hasOwnProperty('backgroundColor');}
function getPos(obj)
{var pos=$(obj).offset();return[pos.left,pos.top];}
function mouseAbs(e)
{return[(e.pageX-docOffset[0]),(e.pageY-docOffset[1])];}
function setOptions(opt)
{if(typeof(opt)!=='object')opt={};options=$.extend(options,opt);$.each(['onChange','onSelect','onRelease','onDblClick'],function(i,e){if(typeof(options[e])!=='function')options[e]=function(){};});}
function startDragMode(mode,pos,touch)
{docOffset=getPos($img);Tracker.setCursor(mode==='move'?mode:mode+'-resize');if(mode==='move'){return Tracker.activateHandlers(createMover(pos),doneSelect,touch);}
var fc=Coords.getFixed();var opp=oppLockCorner(mode);var opc=Coords.getCorner(oppLockCorner(opp));Coords.setPressed(Coords.getCorner(opp));Coords.setCurrent(opc);Tracker.activateHandlers(dragmodeHandler(mode,fc),doneSelect,touch);}
function dragmodeHandler(mode,f)
{return function(pos){if(!options.aspectRatio){switch(mode){case'e':pos[1]=f.y2;break;case'w':pos[1]=f.y2;break;case'n':pos[0]=f.x2;break;case's':pos[0]=f.x2;break;}}else{switch(mode){case'e':pos[1]=f.y+1;break;case'w':pos[1]=f.y+1;break;case'n':pos[0]=f.x+1;break;case's':pos[0]=f.x+1;break;}}
Coords.setCurrent(pos);Selection.update();};}
function createMover(pos)
{var lloc=pos;KeyManager.watchKeys();return function(pos){Coords.moveOffset([pos[0]-lloc[0],pos[1]-lloc[1]]);lloc=pos;Selection.update();};}
function oppLockCorner(ord)
{switch(ord){case'n':return'sw';case's':return'nw';case'e':return'nw';case'w':return'ne';case'ne':return'sw';case'nw':return'se';case'se':return'nw';case'sw':return'ne';}}
function createDragger(ord)
{return function(e){if(options.disabled){return false;}
if((ord==='move')&&!options.allowMove){return false;}
docOffset=getPos($img);btndown=true;startDragMode(ord,mouseAbs(e));e.stopPropagation();e.preventDefault();return false;};}
function presize($obj,w,h)
{var nw=$obj.width(),nh=$obj.height();if((nw>w)&&w>0){nw=w;nh=(w / $obj.width())*$obj.height();}
if((nh>h)&&h>0){nh=h;nw=(h / $obj.height())*$obj.width();}
xscale=$obj.width()/ nw;yscale=$obj.height()/ nh;$obj.width(nw).height(nh);}
function unscale(c)
{return{x:c.x*xscale,y:c.y*yscale,x2:c.x2*xscale,y2:c.y2*yscale,w:c.w*xscale,h:c.h*yscale};}
function doneSelect(pos)
{var c=Coords.getFixed();if((c.w>options.minSelect[0])&&(c.h>options.minSelect[1])){Selection.enableHandles();Selection.done();}else{Selection.release();}
Tracker.setCursor(options.allowSelect?'crosshair':'default');}
function newSelection(e)
{if(options.disabled){return false;}
if(!options.allowSelect){return false;}
btndown=true;docOffset=getPos($img);Selection.disableHandles();Tracker.setCursor('crosshair');var pos=mouseAbs(e);Coords.setPressed(pos);Selection.update();Tracker.activateHandlers(selectDrag,doneSelect,e.type.substring(0,5)==='touch');KeyManager.watchKeys();e.stopPropagation();e.preventDefault();return false;}
function selectDrag(pos)
{Coords.setCurrent(pos);Selection.update();}
function newTracker()
{var trk=$('<div></div>').addClass(cssClass('tracker'));if(is_msie){trk.css({opacity:0,backgroundColor:'white'});}
return trk;}
if(typeof(obj)!=='object'){obj=$(obj)[0];}
if(typeof(opt)!=='object'){opt={};}
setOptions(opt);var img_css={border:'none',visibility:'visible',margin:0,padding:0,position:'absolute',top:0,left:0};var $origimg=$(obj),img_mode=true;if(obj.tagName=='IMG'){if($origimg[0].width!=0&&$origimg[0].height!=0){$origimg.width($origimg[0].width);$origimg.height($origimg[0].height);}else{var tempImage=new Image();tempImage.src=$origimg[0].src;$origimg.width(tempImage.width);$origimg.height(tempImage.height);}
var $img=$origimg.clone().removeAttr('id').css(img_css).show();$img.width($origimg.width());$img.height($origimg.height());$origimg.after($img).hide();}else{$img=$origimg.css(img_css).show();img_mode=false;if(options.shade===null){options.shade=true;}}
presize($img,options.boxWidth,options.boxHeight);var boundx=$img.width(),boundy=$img.height(),$div=$('<div />').width(boundx).height(boundy).addClass(cssClass('holder')).css({position:'relative',backgroundColor:options.bgColor}).insertAfter($origimg).append($img);if(options.addClass){$div.addClass(options.addClass);}
var $img2=$('<div />'),$img_holder=$('<div />').width('100%').height('100%').css({zIndex:310,position:'absolute',overflow:'hidden'}),$hdl_holder=$('<div />').width('100%').height('100%').css('zIndex',320),$sel=$('<div />').css({position:'absolute',zIndex:600}).dblclick(function(){var c=Coords.getFixed();options.onDblClick.call(api,c);}).insertBefore($img).append($img_holder,$hdl_holder);if(img_mode){$img2=$('<img />').attr('src',$img.attr('src')).css(img_css).width(boundx).height(boundy),$img_holder.append($img2);}
if(ie6mode){$sel.css({overflowY:'hidden'});}
var bound=options.boundary;var $trk=newTracker().width(boundx+(bound*2)).height(boundy+(bound*2)).css({position:'absolute',top:px(-bound),left:px(-bound),zIndex:290}).mousedown(newSelection);var bgcolor=options.bgColor,bgopacity=options.bgOpacity,xlimit,ylimit,xmin,ymin,xscale,yscale,enabled=true,btndown,animating,shift_down;docOffset=getPos($img);var Touch=(function(){function hasTouchSupport(){var support={},events=['touchstart','touchmove','touchend'],el=document.createElement('div'),i;try{for(i=0;i<events.length;i++){var eventName=events[i];eventName='on'+eventName;var isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,'return;');isSupported=typeof el[eventName]=='function';}
support[events[i]]=isSupported;}
return support.touchstart&&support.touchend&&support.touchmove;}
catch(err){return false;}}
function detectSupport(){if((options.touchSupport===true)||(options.touchSupport===false))return options.touchSupport;else return hasTouchSupport();}
return{createDragger:function(ord){return function(e){if(options.disabled){return false;}
if((ord==='move')&&!options.allowMove){return false;}
docOffset=getPos($img);btndown=true;startDragMode(ord,mouseAbs(Touch.cfilter(e)),true);e.stopPropagation();e.preventDefault();return false;};},newSelection:function(e){return newSelection(Touch.cfilter(e));},cfilter:function(e){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;return e;},isSupported:hasTouchSupport,support:detectSupport()};}());var Coords=(function(){var x1=0,y1=0,x2=0,y2=0,ox,oy;function setPressed(pos)
{pos=rebound(pos);x2=x1=pos[0];y2=y1=pos[1];}
function setCurrent(pos)
{pos=rebound(pos);ox=pos[0]-x2;oy=pos[1]-y2;x2=pos[0];y2=pos[1];}
function getOffset()
{return[ox,oy];}
function moveOffset(offset)
{var ox=offset[0],oy=offset[1];if(0>x1+ox){ox-=ox+x1;}
if(0>y1+oy){oy-=oy+y1;}
if(boundy<y2+oy){oy+=boundy-(y2+oy);}
if(boundx<x2+ox){ox+=boundx-(x2+ox);}
x1+=ox;x2+=ox;y1+=oy;y2+=oy;}
function getCorner(ord)
{var c=getFixed();switch(ord){case'ne':return[c.x2,c.y];case'nw':return[c.x,c.y];case'se':return[c.x2,c.y2];case'sw':return[c.x,c.y2];}}
function getFixed()
{if(!options.aspectRatio){return getRect();}
var aspect=options.aspectRatio,min_x=options.minSize[0]/ xscale,max_x=options.maxSize[0]/ xscale,max_y=options.maxSize[1]/ yscale,rw=x2-x1,rh=y2-y1,rwa=Math.abs(rw),rha=Math.abs(rh),real_ratio=rwa / rha,xx,yy,w,h;if(max_x===0){max_x=boundx*10;}
if(max_y===0){max_y=boundy*10;}
if(real_ratio<aspect){yy=y2;w=rha*aspect;xx=rw<0?x1-w:w+x1;if(xx<0){xx=0;h=Math.abs((xx-x1)/ aspect);yy=rh<0?y1-h:h+y1;}else if(xx>boundx){xx=boundx;h=Math.abs((xx-x1)/ aspect);yy=rh<0?y1-h:h+y1;}}else{xx=x2;h=rwa / aspect;yy=rh<0?y1-h:y1+h;if(yy<0){yy=0;w=Math.abs((yy-y1)*aspect);xx=rw<0?x1-w:w+x1;}else if(yy>boundy){yy=boundy;w=Math.abs(yy-y1)*aspect;xx=rw<0?x1-w:w+x1;}}
if(xx>x1){if(xx-x1<min_x){xx=x1+min_x;}else if(xx-x1>max_x){xx=x1+max_x;}
if(yy>y1){yy=y1+(xx-x1)/ aspect;}else{yy=y1-(xx-x1)/ aspect;}}else if(xx<x1){if(x1-xx<min_x){xx=x1-min_x;}else if(x1-xx>max_x){xx=x1-max_x;}
if(yy>y1){yy=y1+(x1-xx)/ aspect;}else{yy=y1-(x1-xx)/ aspect;}}
if(xx<0){x1-=xx;xx=0;}else if(xx>boundx){x1-=xx-boundx;xx=boundx;}
if(yy<0){y1-=yy;yy=0;}else if(yy>boundy){y1-=yy-boundy;yy=boundy;}
return makeObj(flipCoords(x1,y1,xx,yy));}
function rebound(p)
{if(p[0]<0)p[0]=0;if(p[1]<0)p[1]=0;if(p[0]>boundx)p[0]=boundx;if(p[1]>boundy)p[1]=boundy;return[Math.round(p[0]),Math.round(p[1])];}
function flipCoords(x1,y1,x2,y2)
{var xa=x1,xb=x2,ya=y1,yb=y2;if(x2<x1){xa=x2;xb=x1;}
if(y2<y1){ya=y2;yb=y1;}
return[xa,ya,xb,yb];}
function getRect()
{var xsize=x2-x1,ysize=y2-y1,delta;if(xlimit&&(Math.abs(xsize)>xlimit)){x2=(xsize>0)?(x1+xlimit):(x1-xlimit);}
if(ylimit&&(Math.abs(ysize)>ylimit)){y2=(ysize>0)?(y1+ylimit):(y1-ylimit);}
if(ymin / yscale&&(Math.abs(ysize)<ymin / yscale)){y2=(ysize>0)?(y1+ymin / yscale):(y1-ymin / yscale);}
if(xmin / xscale&&(Math.abs(xsize)<xmin / xscale)){x2=(xsize>0)?(x1+xmin / xscale):(x1-xmin / xscale);}
if(x1<0){x2-=x1;x1-=x1;}
if(y1<0){y2-=y1;y1-=y1;}
if(x2<0){x1-=x2;x2-=x2;}
if(y2<0){y1-=y2;y2-=y2;}
if(x2>boundx){delta=x2-boundx;x1-=delta;x2-=delta;}
if(y2>boundy){delta=y2-boundy;y1-=delta;y2-=delta;}
if(x1>boundx){delta=x1-boundy;y2-=delta;y1-=delta;}
if(y1>boundy){delta=y1-boundy;y2-=delta;y1-=delta;}
return makeObj(flipCoords(x1,y1,x2,y2));}
function makeObj(a)
{return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]};}
return{flipCoords:flipCoords,setPressed:setPressed,setCurrent:setCurrent,getOffset:getOffset,moveOffset:moveOffset,getCorner:getCorner,getFixed:getFixed};}());var Shade=(function(){var enabled=false,holder=$('<div />').css({position:'absolute',zIndex:240,opacity:0}),shades={top:createShade(),left:createShade().height(boundy),right:createShade().height(boundy),bottom:createShade()};function resizeShades(w,h){shades.left.css({height:px(h)});shades.right.css({height:px(h)});}
function updateAuto()
{return updateShade(Coords.getFixed());}
function updateShade(c)
{shades.top.css({left:px(c.x),width:px(c.w),height:px(c.y)});shades.bottom.css({top:px(c.y2),left:px(c.x),width:px(c.w),height:px(boundy-c.y2)});shades.right.css({left:px(c.x2),width:px(boundx-c.x2)});shades.left.css({width:px(c.x)});}
function createShade(){return $('<div />').css({position:'absolute',backgroundColor:options.shadeColor||options.bgColor}).appendTo(holder);}
function enableShade(){if(!enabled){enabled=true;holder.insertBefore($img);updateAuto();Selection.setBgOpacity(1,0,1);$img2.hide();setBgColor(options.shadeColor||options.bgColor,1);if(Selection.isAwake())
{setOpacity(options.bgOpacity,1);}
else setOpacity(1,1);}}
function setBgColor(color,now){colorChangeMacro(getShades(),color,now);}
function disableShade(){if(enabled){holder.remove();$img2.show();enabled=false;if(Selection.isAwake()){Selection.setBgOpacity(options.bgOpacity,1,1);}else{Selection.setBgOpacity(1,1,1);Selection.disableHandles();}
colorChangeMacro($div,0,1);}}
function setOpacity(opacity,now){if(enabled){if(options.bgFade&&!now){holder.animate({opacity:1-opacity},{queue:false,duration:options.fadeTime});}
else holder.css({opacity:1-opacity});}}
function refreshAll(){options.shade?enableShade():disableShade();if(Selection.isAwake())setOpacity(options.bgOpacity);}
function getShades(){return holder.children();}
return{update:updateAuto,updateRaw:updateShade,getShades:getShades,setBgColor:setBgColor,enable:enableShade,disable:disableShade,resize:resizeShades,refresh:refreshAll,opacity:setOpacity};}());var Selection=(function(){var awake,hdep=370,borders={},handle={},dragbar={},seehandles=false;function insertBorder(type)
{var jq=$('<div />').css({position:'absolute',opacity:options.borderOpacity}).addClass(cssClass(type));$img_holder.append(jq);return jq;}
function dragDiv(ord,zi)
{var jq=$('<div />').mousedown(createDragger(ord)).css({cursor:ord+'-resize',position:'absolute',zIndex:zi}).addClass('ord-'+ord);if(Touch.support){jq.bind('touchstart.jcrop',Touch.createDragger(ord));}
$hdl_holder.append(jq);return jq;}
function insertHandle(ord)
{var hs=options.handleSize,div=dragDiv(ord,hdep++).css({opacity:options.handleOpacity}).addClass(cssClass('handle'));if(hs){div.width(hs).height(hs);}
return div;}
function insertDragbar(ord)
{return dragDiv(ord,hdep++).addClass('jcrop-dragbar');}
function createDragbars(li)
{var i;for(i=0;i<li.length;i++){dragbar[li[i]]=insertDragbar(li[i]);}}
function createBorders(li)
{var cl,i;for(i=0;i<li.length;i++){switch(li[i]){case'n':cl='hline';break;case's':cl='hline bottom';break;case'e':cl='vline right';break;case'w':cl='vline';break;}
borders[li[i]]=insertBorder(cl);}}
function createHandles(li)
{var i;for(i=0;i<li.length;i++){handle[li[i]]=insertHandle(li[i]);}}
function moveto(x,y)
{if(!options.shade){$img2.css({top:px(-y),left:px(-x)});}
$sel.css({top:px(y),left:px(x)});}
function resize(w,h)
{$sel.width(Math.round(w)).height(Math.round(h));}
function refresh()
{var c=Coords.getFixed();Coords.setPressed([c.x,c.y]);Coords.setCurrent([c.x2,c.y2]);updateVisible();}
function updateVisible(select)
{if(awake){return update(select);}}
function update(select)
{var c=Coords.getFixed();resize(c.w,c.h);moveto(c.x,c.y);if(options.shade)Shade.updateRaw(c);awake||show();if(select){options.onSelect.call(api,unscale(c));}else{options.onChange.call(api,unscale(c));}}
function setBgOpacity(opacity,force,now)
{if(!awake&&!force)return;if(options.bgFade&&!now){$img.animate({opacity:opacity},{queue:false,duration:options.fadeTime});}else{$img.css('opacity',opacity);}}
function show()
{$sel.show();if(options.shade)Shade.opacity(bgopacity);else setBgOpacity(bgopacity,true);awake=true;}
function release()
{disableHandles();$sel.hide();if(options.shade)Shade.opacity(1);else setBgOpacity(1);awake=false;options.onRelease.call(api);}
function showHandles()
{if(seehandles){$hdl_holder.show();}}
function enableHandles()
{seehandles=true;if(options.allowResize){$hdl_holder.show();return true;}}
function disableHandles()
{seehandles=false;$hdl_holder.hide();}
function animMode(v)
{if(v){animating=true;disableHandles();}else{animating=false;enableHandles();}}
function done()
{animMode(false);refresh();}
if(options.dragEdges&&$.isArray(options.createDragbars))
createDragbars(options.createDragbars);if($.isArray(options.createHandles))
createHandles(options.createHandles);if(options.drawBorders&&$.isArray(options.createBorders))
createBorders(options.createBorders);$(document).bind('touchstart.jcrop-ios',function(e){if($(e.currentTarget).hasClass('jcrop-tracker'))e.stopPropagation();});var $track=newTracker().mousedown(createDragger('move')).css({cursor:'move',position:'absolute',zIndex:360});if(Touch.support){$track.bind('touchstart.jcrop',Touch.createDragger('move'));}
$img_holder.append($track);disableHandles();return{updateVisible:updateVisible,update:update,release:release,refresh:refresh,isAwake:function(){return awake;},setCursor:function(cursor){$track.css('cursor',cursor);},enableHandles:enableHandles,enableOnly:function(){seehandles=true;},showHandles:showHandles,disableHandles:disableHandles,animMode:animMode,setBgOpacity:setBgOpacity,done:done};}());var Tracker=(function(){var onMove=function(){},onDone=function(){},trackDoc=options.trackDocument;function toFront(touch)
{$trk.css({zIndex:450});if(touch)
$(document).bind('touchmove.jcrop',trackTouchMove).bind('touchend.jcrop',trackTouchEnd);else if(trackDoc)
$(document).bind('mousemove.jcrop',trackMove).bind('mouseup.jcrop',trackUp);}
function toBack()
{$trk.css({zIndex:290});$(document).unbind('.jcrop');}
function trackMove(e)
{onMove(mouseAbs(e));return false;}
function trackUp(e)
{e.preventDefault();e.stopPropagation();if(btndown){btndown=false;onDone(mouseAbs(e));if(Selection.isAwake()){options.onSelect.call(api,unscale(Coords.getFixed()));}
toBack();onMove=function(){};onDone=function(){};}
return false;}
function activateHandlers(move,done,touch)
{btndown=true;onMove=move;onDone=done;toFront(touch);return false;}
function trackTouchMove(e)
{onMove(mouseAbs(Touch.cfilter(e)));return false;}
function trackTouchEnd(e)
{return trackUp(Touch.cfilter(e));}
function setCursor(t)
{$trk.css('cursor',t);}
if(!trackDoc){$trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp);}
$img.before($trk);return{activateHandlers:activateHandlers,setCursor:setCursor};}());var KeyManager=(function(){var $keymgr=$('<input type="radio" />').css({position:'fixed',left:'-120px',width:'12px'}).addClass('jcrop-keymgr'),$keywrap=$('<div />').css({position:'absolute',overflow:'hidden'}).append($keymgr);function watchKeys()
{if(options.keySupport){$keymgr.show();$keymgr.focus();}}
function onBlur(e)
{$keymgr.hide();}
function doNudge(e,x,y)
{if(options.allowMove){Coords.moveOffset([x,y]);Selection.updateVisible(true);}
e.preventDefault();e.stopPropagation();}
function parseKey(e)
{if(e.ctrlKey||e.metaKey){return true;}
shift_down=e.shiftKey?true:false;var nudge=shift_down?10:1;switch(e.keyCode){case 37:doNudge(e,-nudge,0);break;case 39:doNudge(e,nudge,0);break;case 38:doNudge(e,0,-nudge);break;case 40:doNudge(e,0,nudge);break;case 27:if(options.allowSelect)Selection.release();break;case 9:return true;}
return false;}
if(options.keySupport){$keymgr.keydown(parseKey).blur(onBlur);if(ie6mode||!options.fixedSupport){$keymgr.css({position:'absolute',left:'-20px'});$keywrap.append($keymgr).insertBefore($img);}else{$keymgr.insertBefore($img);}}
return{watchKeys:watchKeys};}());function setClass(cname)
{$div.removeClass().addClass(cssClass('holder')).addClass(cname);}
function animateTo(a,callback)
{var x1=a[0]/ xscale,y1=a[1]/ yscale,x2=a[2]/ xscale,y2=a[3]/ yscale;if(animating){return;}
var animto=Coords.flipCoords(x1,y1,x2,y2),c=Coords.getFixed(),initcr=[c.x,c.y,c.x2,c.y2],animat=initcr,interv=options.animationDelay,ix1=animto[0]-initcr[0],iy1=animto[1]-initcr[1],ix2=animto[2]-initcr[2],iy2=animto[3]-initcr[3],pcent=0,velocity=options.swingSpeed;x1=animat[0];y1=animat[1];x2=animat[2];y2=animat[3];Selection.animMode(true);var anim_timer;function queueAnimator(){window.setTimeout(animator,interv);}
var animator=(function(){return function(){pcent+=(100-pcent)/ velocity;animat[0]=Math.round(x1+((pcent / 100)*ix1));animat[1]=Math.round(y1+((pcent / 100)*iy1));animat[2]=Math.round(x2+((pcent / 100)*ix2));animat[3]=Math.round(y2+((pcent / 100)*iy2));if(pcent>=99.8){pcent=100;}
if(pcent<100){setSelectRaw(animat);queueAnimator();}else{Selection.done();Selection.animMode(false);if(typeof(callback)==='function'){callback.call(api);}}};}());queueAnimator();}
function setSelect(rect)
{setSelectRaw([rect[0]/ xscale,rect[1]/ yscale,rect[2]/ xscale,rect[3]/ yscale]);options.onSelect.call(api,unscale(Coords.getFixed()));Selection.enableHandles();}
function setSelectRaw(l)
{Coords.setPressed([l[0],l[1]]);Coords.setCurrent([l[2],l[3]]);Selection.update();}
function tellSelect()
{return unscale(Coords.getFixed());}
function tellScaled()
{return Coords.getFixed();}
function setOptionsNew(opt)
{setOptions(opt);interfaceUpdate();}
function disableCrop()
{options.disabled=true;Selection.disableHandles();Selection.setCursor('default');Tracker.setCursor('default');}
function enableCrop()
{options.disabled=false;interfaceUpdate();}
function cancelCrop()
{Selection.done();Tracker.activateHandlers(null,null);}
function destroy()
{$div.remove();$origimg.show();$origimg.css('visibility','visible');$(obj).removeData('Jcrop');}
function setImage(src,callback)
{Selection.release();disableCrop();var img=new Image();img.onload=function(){var iw=img.width;var ih=img.height;var bw=options.boxWidth;var bh=options.boxHeight;$img.width(iw).height(ih);$img.attr('src',src);$img2.attr('src',src);presize($img,bw,bh);boundx=$img.width();boundy=$img.height();$img2.width(boundx).height(boundy);$trk.width(boundx+(bound*2)).height(boundy+(bound*2));$div.width(boundx).height(boundy);Shade.resize(boundx,boundy);enableCrop();if(typeof(callback)==='function'){callback.call(api);}};img.src=src;}
function colorChangeMacro($obj,color,now){var mycolor=color||options.bgColor;if(options.bgFade&&supportsColorFade()&&options.fadeTime&&!now){$obj.animate({backgroundColor:mycolor},{queue:false,duration:options.fadeTime});}else{$obj.css('backgroundColor',mycolor);}}
function interfaceUpdate(alt)
{if(options.allowResize){if(alt){Selection.enableOnly();}else{Selection.enableHandles();}}else{Selection.disableHandles();}
Tracker.setCursor(options.allowSelect?'crosshair':'default');Selection.setCursor(options.allowMove?'move':'default');if(options.hasOwnProperty('trueSize')){xscale=options.trueSize[0]/ boundx;yscale=options.trueSize[1]/ boundy;}
if(options.hasOwnProperty('setSelect')){setSelect(options.setSelect);Selection.done();delete(options.setSelect);}
Shade.refresh();if(options.bgColor!=bgcolor){colorChangeMacro(options.shade?Shade.getShades():$div,options.shade?(options.shadeColor||options.bgColor):options.bgColor);bgcolor=options.bgColor;}
if(bgopacity!=options.bgOpacity){bgopacity=options.bgOpacity;if(options.shade)Shade.refresh();else Selection.setBgOpacity(bgopacity);}
xlimit=options.maxSize[0]||0;ylimit=options.maxSize[1]||0;xmin=options.minSize[0]||0;ymin=options.minSize[1]||0;if(options.hasOwnProperty('outerImage')){$img.attr('src',options.outerImage);delete(options.outerImage);}
Selection.refresh();}
if(Touch.support)$trk.bind('touchstart.jcrop',Touch.newSelection);$hdl_holder.hide();interfaceUpdate(true);var api={setImage:setImage,animateTo:animateTo,setSelect:setSelect,setOptions:setOptionsNew,tellSelect:tellSelect,tellScaled:tellScaled,setClass:setClass,disable:disableCrop,enable:enableCrop,cancel:cancelCrop,release:Selection.release,destroy:destroy,focus:KeyManager.watchKeys,getBounds:function(){return[boundx*xscale,boundy*yscale];},getWidgetSize:function(){return[boundx,boundy];},getScaleFactor:function(){return[xscale,yscale];},getOptions:function(){return options;},ui:{holder:$div,selection:$sel}};if(is_msie)$div.bind('selectstart',function(){return false;});$origimg.data('Jcrop',api);return api;};$.fn.Jcrop=function(options,callback)
{var api;this.each(function(){if($(this).data('Jcrop')){if(options==='api')return $(this).data('Jcrop');else $(this).data('Jcrop').setOptions(options);}
else{if(this.tagName=='IMG')
$.Jcrop.Loader(this,function(){$(this).css({display:'block',visibility:'hidden'});api=$.Jcrop(this,options);if($.isFunction(callback))callback.call(api);});else{$(this).css({display:'block',visibility:'hidden'});api=$.Jcrop(this,options);if($.isFunction(callback))callback.call(api);}}});return this;};$.Jcrop.Loader=function(imgobj,success,error){var $img=$(imgobj),img=$img[0];function completeCheck(){if(img.complete){$img.unbind('.jcloader');if($.isFunction(success))success.call(img);}
else window.setTimeout(completeCheck,50);}
$img.bind('load.jcloader',completeCheck).bind('error.jcloader',function(e){$img.unbind('.jcloader');if($.isFunction(error))error.call(img);});if(img.complete&&$.isFunction(success)){$img.unbind('.jcloader');success.call(img);}};$.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:'jcrop',addClass:null,bgColor:'black',bgOpacity:0.6,bgFade:false,borderOpacity:0.4,handleOpacity:0.5,handleSize:null,aspectRatio:0,keySupport:true,createHandles:['n','s','e','w','nw','ne','se','sw'],createDragbars:['n','s','e','w'],createBorders:['n','s','e','w'],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}};}(jQuery));var underscore=angular.module('underscore',[]);underscore.factory('_',function(){return window._;});var tinymceConfig={plugins:["autolink link image","searchreplace visualblocks fullscreen importcss","table contextmenu paste"],skin:'light',toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image",content_css:globalVars.app_url+"front/cache/default_combined.css?"+new Date().getTime(),importcss_selector_filter:/^\.(btn|label|alert|hero-unit|well|text)/,importcss_groups:[{title:'Boutons',filter:/^\.btn/},{title:'Texte',filter:/^\.text/},{title:'Labels',filter:/^\.(label|alert)/},{title:'Block',filter:/^\.(well|hero-unit)/},]},aceeditorConfig=function(_editor)
{_editor.setReadOnly(true);ace.require("ace/ext/emmet");ace.require("ace/ext/language_tools");_editor.setOptions({enableBasicAutocompletion:true,enableEmmet:true,enableSnippets:true,});}
var templateDir;var dashboardRefresh;$('body').hasClass('mobile')?templateDir='mobile':templateDir='desktop';var admin=admin||angular.module('admin',['ngRoute','ngSanitize','nouislider','ui.checkbox','ui.sortable','ui.tinymce','ui.ace','ui.select2','googlechart','ui.bootstrap','underscore','ui.tree']).config(['$routeProvider','$httpProvider',function($routeProvider,$httpProvider){$httpProvider.interceptors.push('httpRequestInterceptor');$routeProvider.when('/',{templateUrl:'/admin/view_loader/'+templateDir+'/dashboard/dashboard/view',controller:DashboardMasterListCtrl}).when('/contacts/config',{templateUrl:'/admin/view_loader/'+templateDir+'/contacts/informations/edit',controller:ContactConfigCtrl}).when('/contacts/:filter',{templateUrl:'/admin/view_loader/'+templateDir+'/contacts/messages/list',controller:MessagesListCtrl}).when('/contacts/:filter/message/:messageId',{templateUrl:'/admin/view_loader/'+templateDir+'/contacts/messages/list',controller:MessagesListCtrl}).when('/contacts/forms/list',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:ContactFormsListCtrl}).when('/contacts/forms/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/contacts/forms/edit',controller:ContactFormsEditCtrl}).when('/pages/pages',{templateUrl:'/admin/view_loader/'+templateDir+'/pages/pages/list',controller:PagesListCtrl}).when('/pages/pages/edit/:pageId',{templateUrl:'/admin/view_loader/'+templateDir+'/pages/pages/edit',controller:PagesEditCtrl}).when('/pages/templates/',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:TemplatesListCtrl}).when('/pages/templates/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/pages/templates/edit',controller:TemplatesEditCtrl}).when('/pages/menus',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:MenusListCtrl}).when('/pages/menus/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/menus/menus/edit',controller:MenuEditCtrl}).when('/manager/comptes',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:UserListCtrl}).when('/manager/comptes/edit/:userId',{templateUrl:'/admin/view_loader/'+templateDir+'/manager/users/edit',controller:EditUser}).when('/manager/logs',{templateUrl:'/admin/view_loader/'+templateDir+'/manager/logs/list',controller:LogsList}).when('/manager/logs/:logId',{templateUrl:'/admin/view_loader/'+templateDir+'/manager/logs/details',controller:LogsDetails}).when('/portfolio/portfolios',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:PortfolioListCtrl}).when('/portfolio/portfolios/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/portfolio/portfolio/edit',controller:PortfolioEditCtrl}).when('/portfolio/categories',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:PortfolioCategoriesCtrl}).when('/portfolio/categories/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/portfolio/categories/edit',controller:PortfolioCategoriesEditCtrl}).when('/banner-zones/list',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:BannerZoneListCtrl}).when('/banner-zones/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/banners/bannerzone/edit',controller:BannerZoneEditCtrl}).when('/banner-zones/banner/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/banners/banner/edit',controller:BannerEditCtrl}).when('/banner-zones/banner/:parent_id/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/banners/banner/edit',controller:BannerEditCtrl}).when('/news/categories',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:NewsCategoriesList}).when('/news/categories/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/news/categories/edit',controller:NewsCategoriesEdit}).when('/news/list',{templateUrl:'/admin/view_loader/'+templateDir+'/shared/views/list',controller:NewsListCtrl}).when('/news/edit/:id',{templateUrl:'/admin/view_loader/'+templateDir+'/news/news/edit',controller:EditNews}).otherwise({redirectTo:'/'});}]);admin.factory('httpRequestInterceptor',function($q,$location){return{'responseError':function(rejection){console.log(rejection);if(rejection.status===404){$location.path('/404/');return $q.reject(rejection);}
if(rejection.status===401){window.location.reload();};}};});var regex={mail:/\b[a-z0-9._%-]+@[a-z0-9.-]+\.[a-z]{2,4}\b/,slug:/^[a-zA-Z0-9\-]+$/,int:/^[0-9]+$/,password:/^.{4,12}$/,phone:/^[0-9]{2,3}-? ?[0-9]{6,7}$/}
var validationError=[];validationError['fr']={mail:'Ce champ doit être au format Email.',slug:'Ce champ ne peut contenir ni espace ni carractères spéciaux.',int:'Ce champ doit être un nombre entier.',password:'Ce champ doit être un nombre entier.',phone:'Ce champ doit être au format téléphone.'}
admin.directive('validation',function(){return{require:'ngModel',link:function($scope,elm,attrs,ctrl){console.log(attrs.id);ctrl.$parsers.unshift(function(viewValue){if(regex[attrs['validation']].test(viewValue)||!viewValue){ctrl.$setValidity('validation',true);return viewValue;}else{ctrl.$setValidity('validation',false);$scope[attrs.id]=validationError['fr'][attrs['validation']];return undefined;}});}};});admin.directive('errorSumary',function(){return{template:'<div ng-if="errors" class="alert alert-danger alert-dismissable"><button type="button" ng-click="closeAlert()" class="close" aria-hidden="true">&times;</button><ul><li ng-repeat="error in errors">{{error}}</li></ul></div>',controller:function($scope,$element,$attrs,$transclude){$scope.closeAlert=function(){$scope.errors=null}},};});function ItemList($scope,$http,config)
{var orderprop,reverse=false,reorderQuery='',searchQuery='';$scope.section=config.section;menuControl(config.menu);var getTheItems=function(limit,offset)
{var separator=reorderQuery==''?'?':'&'
$http.get(config.getUrl+limit+'/'+offset+reorderQuery+separator+searchQuery).success(function(data)
{$scope.items=data.items;$scope.totalItems=data.total_items;if(typeof config.getCallBack==='function'){config.getCallBack(data)}
init_page();}).error(function(data)
{console.log(data);});}
$scope.currentPage=0;$scope.maxSize=5;$scope.itemPerPage=20;$scope.offset=0;$scope.setGetPage=function(pageNo){$scope.currentPage=pageNo;$scope.offset=$scope.currentPage*$scope.itemPerPage-$scope.itemPerPage;getTheItems($scope.itemPerPage,$scope.offset);}
$scope.getView=function(id)
{window.location.hash='/'+$scope.section+'/edit/'+id;block();}
$scope.validation=function(id){$scope.deleteId=id;$('#validation-popup').showModal();}
$scope.deleteItem=function(deleteId){bootbox.confirm('Etes vous sur de vouloir supprimer cet élément ?',function(invoke)
{if(invoke){$http.get(config.deleteUrl+deleteId).success(function(data){getTheItems($scope.itemPerPage,$scope.offset);});};})}
$scope.reorder=function(col)
{if(orderprop!=col)
{orderprop=col;reverse=false;}
else
{reverse=!reverse;}
reorderQuery='?orderprop='+orderprop+'&reverse='+reverse;getTheItems($scope.itemPerPage,0);}
$scope.search=function()
{searchQuery='search='+$scope.query;getTheItems($scope.itemPerPage,0);}
getTheItems($scope.itemPerPage,0);}admin.factory('UrlService',['$http','pagesRepository',function($http,pagesRepository){var cache={Page:false,News:{category:false,item:false},Portfolio:{category:false,item:false}}
function RouteModel(value,name)
{return{value:value,name:name}}
function getPagesElements(callback)
{if(cache.Pages){callback(cache.Pages);};pagesRepository.getPageList('fr',function(data)
{cache.Pages=data.items;callback(cache.Pages);});}
function getNewsElements(urlFunction,callback)
{if(cache.News[urlFunction]){callback(cache.News[urlFunction]);};switch(urlFunction)
{case'category':$http.get('/admin_news/categories_list').success(function(data)
{cache.News[urlFunction]=data.items;cache.News[urlFunction].unshift({id:'all',title:'Toutes'});callback(cache.News[urlFunction]);});break;case'item':$http.get('/admin_news/news_list').success(function(data)
{cache.News[urlFunction]=data.items;callback(cache.News[urlFunction]);});break;}}
function getPortfolioElements(urlFunction,callback)
{if(cache.Portfolio[urlFunction]){callback(cache.Portfolio[urlFunction]);};switch(urlFunction)
{case'category':$http.get('/admin_portfolio/categories_list').success(function(data)
{cache.Portfolio[urlFunction]=data.items;cache.Portfolio[urlFunction].unshift({id:'all',title:'Toutes'});callback(cache.Portfolio[urlFunction]);});break;case'item':$http.get('/admin_portfolio/portfolio_list').success(function(data)
{cache.Portfolio[urlFunction]=data.items;callback(cache.Portfolio[urlFunction]);});break;}}
return{GetFunctions:function(module)
{var response=[];switch(module)
{case'pages':response=[RouteModel('page','Page')];break;case'news':response=[RouteModel('category','Catégorie'),RouteModel('item','News'),]
break;case'portfolio':response=[RouteModel('category','Catégorie'),RouteModel('item','Projet'),]
break;default:response=[];break;}
return response;},GetElements:function(module,urlFunction,callback)
{switch(module)
{case'pages':getPagesElements(callback);break;case'news':response=getNewsElements(urlFunction,callback)
break;case'portfolio':response=getPortfolioElements(urlFunction,callback)
break;default:response=[];break;}}}}]);admin.factory('tagsRespository',['$http',function($http){var userInfosCache=new Array();return{tagNamesList:function(callback)
{$http.get('/admin_global/tag_name_list').success(function(data)
{callback(data);});}};}]);admin.factory('usersRespository',['$http',function($http){var userInfosCache=new Array();return{userInfos:function(id,callback){console.log(userInfosCache);if(userInfosCache['user_'+id]){callback(userInfosCache['user_'+id]);}
else
{$http.get('/admin_manager/user_infos/'+id).success(function(data)
{userInfosCache['user_'+id]=data;callback(data);});}}};}]);admin.factory('logsRepository',['$http','_',function($http){var logListCache=new Array(),logDetailsCache=new Array();return{logList:function(getOld,callback)
{var offset=0,url;if(logListCache.length>0){callback(logListCache);};if(getOld){offset=logListCache.length;};url='/admin_manager/logs_list/4/'+offset;$http.get(url).success(function(data)
{console.log(data);data.items.forEach(function(item)
{logListCache.push(item);});callback(logListCache,data.total_items);});},logDetails:function(name,callback)
{if(false){callback(logDetailsCache[name])}
else
{$http.get('/admin_manager/log_details/'+name).success(function(data)
{console.log(data);callback(data);});}},deleteLogs:function()
{$http.get('/admin_manager/delete_logs').success(function(data)
{callback(data);logListCache=new Array();});}}}]);function UserListCtrl($scope,$http,$injector)
{var config={section:"manager/comptes",menu:'manager',getUrl:'/admin_manager/users_list/',deleteUrl:'admin_manager/delete_user/',getCallBack:function(data)
{var i=0;angular.forEach($scope.items,function(item){$scope.items[i].statut=item.active==1?'success':'warning';if(item.suspend==1)$scope.items[i].statut='error';i++;});}}
$scope.table=[{title:'',param:'src',width:'60px'},{title:'Nom d\'utilisateur',param:'username',strong:true},{title:'Email',param:'email'},];$scope.pageTitle='Utilisateurs';$scope.thumbPath='users';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function EditUser($scope,$http,$routeParams){menuControl('manager');var id=$routeParams.userId;$scope.mode=id;$scope.backUrl='manager/comptes';var getTheUser=function(){if(id!='new'){$http.get('/admin_manager/user_details/'+id).success(function(data){console.log(data);$scope.item=data[0];init_page();});}};$scope.panes={profile:'active',contact_info:false,config:false}
$scope.selectPane=function(namespace,pane)
{$scope.panes={profile:false,contact_info:false,config:false}
$scope[namespace][pane]='active';}
$scope.uploader={w:240,h:300,item_id:id,folder:'assets/images/users/'+id+'/thumbs/',assetPath:'users~'+id+'~thumbs',crop:1,uniqueName:true}
$scope.save=function(returnToList){if($scope.item.pwd1&&$scope.item.pwd1!=$scope.item.pwd2)
{$scope.errors=new Array("Les mots de passe ne sont pas identiques");return false;}
$scope.alert="Sauvegarde…";showAlert();console.log($scope.item);$http({url:'/admin_manager/update_user',method:"POST",data:$scope.item,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(returnToList&&data.error==0){window.location.hash='/manager/comptes';}
else if(id=='new'&&data.error==0)
{window.location.hash='/manager/comptes/edit/'+data.user_id;}
else
{$scope.alert=data.message[data.message.length-1];if(data.message.length>1){$scope.errors=data.message;}
else
{$scope.errors=0;}
showFadeAlert();}}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();console.log(data);});}
$scope.delete=function(){$http.get('/admin_manager/users_list').success(function(data){if(data.length<=1){$scope.alert='Cet utilisateur est le dernier enregistré.';showFadeAlert();}
else{$http.get('/admin_manager/delete_user/'+id).success(function(data){window.location.hash='/manager/comptes';});}});}
if(id!='new'){getTheUser();}
else
{setTimeout("init_page()",10);}}
admin.directive('activationMessage',function(){return{template:'<div class="alert alert-warning alert-dismissable"><button type="button" data-dismiss="alert" class="close" aria-hidden="true">&times;</button>Ce compte n\'est pas encore activé. <a href="javascript:void(0)" ng-click="activateUser()">Forcer l\'activation</a></div>',controller:function($scope,$element,$attrs,$transclude,$http){$scope.activateUser=function()
{$scope.alert="Activation…";showAlert();$http({url:'/admin_manager/activate_user/'+$scope.item.user_id,method:"GET",headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);$scope.alert=data.message;$scope.item.active=1;showFadeAlert();}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();console.log(data);});}},};});admin.directive('contactInfos',function(){return{controller:function($scope,$element,$attrs,$transclude,$http){var id=$scope.item.user_id;function getContactInfos()
{$http.get('/admin_contact/get_contact_info/'+id).success(function(data)
{var i=0;angular.forEach(data,function(element){data[i].weight=parseInt(data[i].weight);data[i].id=parseInt(data[i].id);i++;});$scope.contactItems=data;console.log(data);});}
$scope.sortableOptions={stop:function(e,ui){var i=0;angular.forEach($scope.contactItems,function(item)
{if(i!=item.weight)
{$scope.contactItems[i].weight=i;updateItem($scope.contactItems[i]);}
i++;})},axis:'y',placeholder:"beingDragged",tolerance:'pointer',};$scope.addContactInfo=function()
{$scope.newContactInfo.parent_id=id;$scope.newContactInfo.weight=$scope.contactItems.length;$http({url:'/admin_contact/create_contact_info',method:"POST",data:$scope.newContactInfo,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){$scope.contactItems.push({id:data.id,name:data.name,value:data.value,target:data.target,icon:data.icon,weight:data.weight});}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';console.log(data);});$scope.newContactInfo=null;$scope.editModeOpen=false;}
$scope.switchEditMode=function(object)
{$scope.editMode=true;$scope.editedItem=object;$('#edit-from-anchor').scrollTo();}
$scope.updateContactInfo=function(object)
{$http({url:'/admin_contact/edit_contact_info',method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){var i=0;angular.forEach($scope.contactItems,function(item){if(item.id===$scope.editedItem.id){$scope.contactItems[i]=$scope.editedItem};i++;});$scope.editMode=false;})}
$scope.deleteContactInfo=function()
{$http({url:'/admin_contact/delete_contact_info',method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){if(data.error===0){$scope.editMode=false;$scope.alert=data.message;var temp=[],i=0;angular.forEach($scope.contactItems,function(item){if(item.weight>$scope.editedItem.weight)
{item.weight=item.weight-1;updateItem(item);}
console.log(item);if(item.id!=$scope.editedItem.id)temp.push(item);});$scope.contactItems=temp;};})}
function updateItem(object)
{$http({url:'/admin_contact/edit_contact_info',method:'POST',data:object,headers:{'Content-Type':'application/json'}});}
$scope.reorder=function(object,sens)
{var currentWeight=object.weight,newWeight,i=0,modified=0;function setMinus()
{angular.forEach($scope.contactItems,function(item){if(item.weight===currentWeight+1){$scope.contactItems[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.contactItems[i].weight=currentWeight+1;modified=1};i++;if(modified===1){updateItem(item)};});}
function setPlus()
{angular.forEach($scope.contactItems,function(item){if(item.weight===currentWeight-1){$scope.contactItems[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.contactItems[i].weight=currentWeight-1;modified=1};i++;if(modified===1){updateItem(item)};});}
sens=='plus'?setMinus():setPlus();}
getContactInfos();},templateUrl:'/admin/view_loader/'+templateDir+'/manager/widgets/contact_infos',};});function LogsList($scope,logsRepository,$sce)
{$scope.details=new Array();function getLogs(getOld)
{logsRepository.logList(true,function(data,total_items)
{$scope.items=data;$scope.total_items=total_items;});}
$scope.refresh=function()
{getLogs(false);}
$scope.getMore=function()
{getLogs(true)}
$scope.getDetails=function(name)
{$scope.details=new Array();$scope.details.fileName=name;logsRepository.logDetails(name,function(data)
{$scope.details.content=data.content;console.log($scope.details);})}
$scope.to_trusted=function(html_code){return $sce.trustAsHtml(html_code);}
$scope.deleteLogs=function()
{logsRepository.deleteLogs(function()
{$scope.items=null,$scope.total_items=0;$scope.details=new Array();})}
getLogs(false);}
function LogsDetails($scope,logsRepository)
{}
admin.directive('managerUserInfos',['usersRespository',function(usersRespository){return{scope:{userId:'=userid'},controller:function($scope,$element,$attrs,$transclude){console.log(usersRespository);usersRespository.userInfos($scope.userId,function(data)
{$scope.user=data;console.log($scope.user);});},restrict:'E',template:'<a href="#manager/comptes/edit/{{userId}}" >{{user.first_name}} {{user.last_name}}</a>',replace:true,};}]);admin.directive('serveUsage',['$http',function($http){return{template:'<div google-chart chart="chart" style="{{chart.cssStyle}}" on-ready="chartReady()"/>',link:function($scope,iElm,iAttrs,controller){function serverUsagePie(appSize,assetsSize,cacheSize,total)
{var chart1={};chart1.type="PieChart";chart1.displayed=false;chart1.cssStyle="height:200px; width:100%;";chart1.data={"cols":[{id:"disk",label:"Disque",type:"string"},{id:"database",label:"Base de donnée",type:"number"}],"rows":[{c:[{v:"Application"},{v:appSize,f:appSize/1000000+" Mo"}]},{c:[{v:"Données"},{v:assetsSize,f:assetsSize/1000000+" Mo"}]},{c:[{v:"Cache"},{v:cacheSize,f:cacheSize/1000000+" Mo"}]},{c:[{v:"Libre"},{v:total-appSize-assetsSize-cacheSize,f:(total-appSize-assetsSize-cacheSize)/1000000+" Mo sur "+total/1000000+" Mo"}]}]};chart1.options={"title":"Utilisation du serveur","isStacked":"true","fill":20,"pieHole":0.3,"pieSliceText":'none',"animation":{duration:1000,easing:'out',},"displayExactValues":true,slices:{0:{color:'#7FFF00'},1:{color:'#9d261d'},2:{color:'#1a1a1a'},3:{color:'#eee'}}};chart1.formatters={};$scope.chart=chart1;$scope.chartReady=function(){fixGoogleChartsBarsBootstrap();}
function fixGoogleChartsBarsBootstrap(){$(".google-visualization-table-table img[width]").each(function(index,img){$(img).css("width",$(img).attr("width")).css("height",$(img).attr("height"));});};}
$http.get('/admin_manager/server_charge').success(function(data){console.log(data);serverUsagePie(parseInt(data.appSize),parseInt(data.assetsSize),parseInt(data.cacheSize),parseInt(data.serverSize));console.log(data);});}};}]);admin.factory('contactsRepository',['$http','_',function($http){var messagesListCache=new Array();var messageDetailsCache=new Array();function storeData(data)
{}
return{messagesList:function(isSpam,callback,getOld){var max_id,offset,url;if(messagesListCache.length>0&&!getOld){callback(messagesListCache);max_id=_.max(messagesListCache,function(item){return item.id});max_id=max_id.id;};if(getOld){offset=_.min(messagesListCache,function(item){return item.id});offset=offset.id};url=max_id?'/admin_contact/messages_list/'+isSpam+'?max_id='+max_id:'/admin_contact/messages_list/'+isSpam+'/5/'+offset;$http.get(url).success(function(data)
{data.items.forEach(function(item)
{var sender=_.findWhere(item.fields[0],{field_name:'Email'});item.sender=sender?sender.field_value:'Inconnu';messagesListCache.push(item);});callback(messagesListCache,data.total_items);storeData(messagesListCache);});},searchItem:function(isSpam,query,callback,getOld)
{var url,offset;if(getOld){offset=_.min($scope.items,function(item){return item.id});offset=offset.id};url='/admin_contact/messages_list/'+isSpam+'?query='+query;$http.get(url).success(function(data)
{var i=0;data.items.forEach(function(item)
{var sender=_.findWhere(item.fields[0],{field_name:'Email'});item.sender=sender?sender.field_value:'Inconnu';data.items[i++]=item;});callback(data);});},messageDetails:function(id,callback)
{if(messageDetailsCache[id])
{callback(messageDetailsCache[id]);}
else
{$http.get('/admin_contact/message/'+id).success(function(data)
{callback(data);messageDetailsCache[id]=data;})}},unreadMessagesNbr:function(callback)
{$http.get('/admin_contact/unread_messages_nbr').success(function(data)
{data.count=parseInt(data.count);callback(data);})},lastMessage:function(callback)
{$http.get('/admin_contact/messages_list/0/2/0').success(function(data)
{var i=0;data.items.forEach(function(item)
{var sender=_.findWhere(item.fields[0],{field_name:'Email'});item.sender=sender?sender.field_value:'Inconnu';data.items[i++]=item;});callback(data);});}};}]);function MessagesListCtrl($scope,$http,contactsRepository,$routeParams,_){menuControl('messages');$scope.isSpam=$routeParams.filter=='messages'?0:1;var loadMessage=$routeParams.messageId;console.log(loadMessage);function getTheMessages(){contactsRepository.messagesList($scope.isSpam,function(data,total_items)
{$scope.items=data;$scope.total_items=total_items;$('.item-list').minSize();init_page();if(loadMessage)
{$scope.getResume(loadMessage);}});}
$scope.getMore=function()
{contactsRepository.messagesList($scope.isSpam,function(data,total_items)
{$scope.items=data;$('.item-list').minSize();},true);}
$scope.setGetPage=function(pageNo){$scope.currentPage=pageNo;$scope.offset=$scope.currentPage*$scope.itemPerPage-$scope.itemPerPage;getTheItems($scope.itemPerPage,$scope.offset);};$scope.getView=function(id)
{window.location.hash='#/contacts/messages/'+id;block();}
$scope.search=function()
{if($scope.query.length>=2)
{console.log($scope.query);contactsRepository.searchItem(0,$scope.query,function(data)
{$scope.total_items=data.total_items;$scope.items=data.items;},false);}
else
{getTheMessages();}}
$scope.getResume=function(id)
{$('.item-list').find('.active').removeClass('active');$('#item-'+id).addClass('active');contactsRepository.messageDetails(id,function(data)
{$scope.resume=_.findWhere($scope.items,{id:id});$scope.resume.fields=data.content_items;var i=0;angular.forEach($scope.items,function(item)
{if(item.id==id){$scope.items[i].read_on=true;}
i++;});});}
$scope.validation=function(id){$scope.deleteId=id;$('#validation-popup').showModal();}
$scope.deleteItem=function(id){$http.get('/admin_contact/delete_message/'+id).success(function(data)
{if(data['error']=='0'){$scope.items=_.filter($scope.items,function(item){return item.id!=id});if($scope.resume.id=id){$scope.resume=''};}});}
$scope.refresh=function(){getTheMessages();}
getTheMessages();}
ViewMessage=function($scope,$http,$location,$routeParams){var id=$routeParams.messageId;getTheMessages=function(){$http.get('/admin_contact/message/'+id).success(function(data){$scope.item=data[0];setTimeout("init_page()",10);});}
$scope.validation=function(id,index){$scope.deleteId=id;$scope.$index=index;$('#validation-popup').fadeIn();}
$scope.deleteMessage=function(id,index){$http.get('/admin_contact/delete/'+id).success(getTheMessages());}
getTheMessages();}
function ContactConfigCtrl($scope,$http){menuControl('messages');$scope.editMode=false;init_page();function getContactInfos()
{$http.get('/admin_contact/get_contact_info').success(function(data)
{var i=0;angular.forEach(data,function(element){data[i].weight=parseInt(data[i].weight);data[i].id=parseInt(data[i].id);i++;});$scope.contactItems=data;})}
$scope.addContactInfo=function()
{$scope.newContactInfo.weight=$scope.contactItems.length;$http({url:'/admin_contact/create_contact_info',method:"POST",data:$scope.newContactInfo,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){$scope.contactItems.push({id:data.id,name:data.name,value:data.value,target:data.target,icon:data.icon,weight:data.weight});}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';console.log(data);});$scope.newContactInfo='';}
$scope.switchEditMode=function(object)
{$scope.editMode=true;$scope.editedItem=object;}
$scope.updateContactInfo=function(object)
{$http({url:'/admin_contact/edit_contact_info',method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){var i=0;angular.forEach($scope.contactItems,function(item){if(item.id===$scope.editedItem.id){$scope.contactItems[i]=$scope.editedItem};i++;});$scope.editMode=false;})}
$scope.deleteContactInfo=function()
{$http({url:'/admin_contact/delete_contact_info',method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){if(data.error===0){getContactInfos();$scope.editMode=false;$scope.alert=data.message;var temp=[],i=0;angular.forEach($scope.editedItem,function(item){if(item.id!=$scope.editedItem.id)temp.push(item);});$scope.editedItem=temp;};})}
$scope.reorder=function(object,sens)
{var currentWeight=object.weight,newWeight,i=0,modified=0;function updateItem(object)
{$http({url:'/admin_contact/edit_contact_info',method:'POST',data:object,headers:{'Content-Type':'application/json'}});}
function setMinus()
{angular.forEach($scope.contactItems,function(item){if(item.weight===currentWeight+1){$scope.contactItems[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.contactItems[i].weight=currentWeight+1;modified=1};i++;if(modified===1){updateItem(item)};});}
function setPlus()
{angular.forEach($scope.contactItems,function(item){if(item.weight===currentWeight-1){$scope.contactItems[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.contactItems[i].weight=currentWeight-1;modified=1};i++;if(modified===1){updateItem(item)};});}
sens=='plus'?setMinus():setPlus();}
$scope.save=function(){console.log($scope.items);$http({url:'/admin_contact/update_config',method:"POST",data:$scope.items,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);$scope.alert='Modification enregistrées !';showFadeAlert();}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();});}
getContactInfos();}
function ContactFormsListCtrl($scope,$http,$injector)
{var config={section:"contacts/forms",menu:'messages',getUrl:'/admin_forms/forms_list/',deleteUrl:'/admin_forms/form_delete/',}
$scope.table=[{title:'Nom',param:'name'}];$scope.pageTitle='Formulaires de contact';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function ContactFormsEditCtrl($scope,$http,$routeParams)
{$scope.section="contact/forms/edit";$scope.backurl='contacts/forms/list';menuControl('messages');var id=$routeParams.id;$scope.mode=id;var getThePage=function(){$http.get('/admin_forms/form_details/'+id).success(function(data){console.log(data);$scope.item=data.items[0];init_page();});};if(id=='new')
{init_page();}
else
{getThePage();}
$scope.delete=function()
{if(confirm('Supprimer cette catégories et tout ses éléments ?')){$http.get('/admin_forms/form_delete/'+id).success(function(data){window.location.hash='/contacts/forms/list';});};}
$scope.save=function(returnToList)
{$http({url:'/admin_forms/form_edit',method:"POST",data:$scope.item,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){if(returnToList&&data.errors.length===0){window.location.hash='/contacts/forms/list';}
else if(id==='new'&&data.errors.length===0)
{window.location.hash='/contacts/forms/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;showFadeAlert();getThePage();}}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();});}}
admin.directive('formsFields',function(){return{controller:function($scope,$element,$attrs,$transclude,$http,$routeParams){var id=$routeParams.id;function getFormFields()
{$http.get('/admin_forms/fields_list/'+id).success(function(data)
{console.log('ok');console.log(data);var i=0;data=data.items;angular.forEach(data,function(element){data[i].weight=parseInt(data[i].weight);data[i].id=parseInt(data[i].id);i++;});$scope.formFields=data;});}
getFormFields();$scope.sortableOptions={connectWith:".form-preview",stop:function(e,ui){var i=0;angular.forEach($scope.formFields,function(item)
{if(i!=item.weight)
{$scope.formFields[i].weight=i;updateItem($scope.formFields[i]);}
i++;})},axis:'y',placeholder:"beingDragged",tolerance:'pointer',selector:'.item'};$scope.addField=function()
{console.log('ok');$scope.newField.parent_id=id;$scope.newField.weight=$scope.formFields.length;$http({url:'/admin_forms/field_edit',method:"POST",data:$scope.newField,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);$scope.formFields.push(data.item);$scope.alert="Modifications enregistrées";showFadeAlert();}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';console.log(data);showFadeAlert();});$scope.newField=null;$('#item-creation-popup').modal('hide');}
$scope.switchEditMode=function(object)
{$scope.editMode=true;$scope.editedItem=clone(object);$('#item-creation-popup').modal();}
$scope.closeEditModal=function()
{$scope.editMode=false;$('#item-creation-popup').modal('hide');}
$scope.updateField=function(object)
{$scope.alert='Sauvegarde';showAlert();$http({url:'/admin_forms/field_edit',method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){var i=0;angular.forEach($scope.formFields,function(item){if(item.id===$scope.editedItem.id){$scope.formFields[i]=$scope.editedItem};i++;});$scope.editMode=false;$('#item-creation-popup').modal('hide');$scope.alert="Modifications enregistrées";showFadeAlert();})}
$scope.deleteField=function()
{$http({url:'/admin_forms/field_delete/'+$scope.editedItem.id,method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){console.log(data);if(data.error==0){$scope.editMode=false;$scope.editModeOpen=false;$scope.alert=data.message;showFadeAlert();var temp=[],i=0;angular.forEach($scope.formFields,function(item){if(item.weight>$scope.editedItem.weight)
{item.weight=item.weight-1;updateItem(item);}
if(item.id!=$scope.editedItem.id)temp.push(item);});$scope.formFields=temp;};})}
function updateItem(object)
{$http({url:'/admin_forms/field_edit',method:'POST',data:object,headers:{'Content-Type':'application/json'}});}
$scope.reorder=function(object,sens)
{var currentWeight=object.weight,newWeight,i=0,modified=0;function setMinus()
{angular.forEach($scope.formFields,function(item){if(item.weight===currentWeight+1){$scope.formFields[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.formFields[i].weight=currentWeight+1;modified=1};i++;if(modified===1){updateItem(item)};});}
function setPlus()
{angular.forEach($scope.formFields,function(item){if(item.weight===currentWeight-1){$scope.formFields[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.formFields[i].weight=currentWeight-1;modified=1};i++;if(modified===1){updateItem(item)};});}
sens=='plus'?setMinus():setPlus();}
$scope.fieldvalues={add:function(object)
{if(typeof $scope[object].field_values==='object'){$scope[object].field_values.push({field_value:'valeur',field_display_value:'texte affiché'});}
else
{$scope[object].field_values=[{field_value:'valeur',field_display_value:'texte affiché'}];}},remove:function(object,index)
{$scope[object].field_values.splice(index,1);}}},templateUrl:'/admin/view_loader/'+templateDir+'/contacts/widgets/forms_fields',};});admin.directive('unreadMessagesNbr',['contactsRepository','$interval',function(contactsRepository,$interval){return{scope:{},template:'<div><span class="number">{{messagesNbr}}</span><br /><small>Nouveau(x) message(s)</small></div>',replace:true,link:function(scope,iElm,iAttrs,controller){function getData()
{contactsRepository.unreadMessagesNbr(function(data)
{scope.messagesNbr=data.count;});}
getData();var interval=$interval(function(){getData()},30000);scope.$on('$destroy',function()
{$interval.cancel(interval);})}};}]);admin.directive('lastMessages',['contactsRepository',function(contactsRepository){return{scope:{},templateUrl:'/admin/view_loader/desktop/contacts/widgets/last_messages',link:function(scope,iElm,iAttr,controller)
{function getData()
{contactsRepository.lastMessage(function(data)
{console.log(data);scope.items=data.items;});}
getData();}}}]);function PagesListCtrl($scope,$http,$injector)
{var config={section:"pages/pages",menu:'pages',getUrl:'/admin_pages/pages_list/',deleteUrl:'admin_pages/pages_delete/'}
$scope.table=[{title:'Nom',param:'name',strong:true},{title:'Langue',param:'lang'},{title:'Versions',param:'version'}];$scope.pageTitle='Pages';$scope.thumbPath='users~thumbs';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function PagesEditCtrl($rootScope,$scope,$routeParams,pagesRepository,templatesRespository,tagsRespository,_){init_page();menuControl('pages');$scope.section='pages/pages';var id=$routeParams.pageId;$scope.mode=id;var templateValues,saveIsBuzy=false;$scope.tinymceOptions=tinymceConfig;$scope.aceLoaded=function(_editor)
{aceeditorConfig(_editor);};$scope.select2Tags={'multiple':true,'simple_tags':true,'tokenSeparators':[","],initSelection:function(element)
{console.log(this);}};tagsRespository.tagNamesList(function(data)
{$scope.select2Tags.tags=data;});$scope.$watch('item.lang',function(newValue)
{pagesRepository.getPageList(newValue,function(data)
{$scope.pagesList=new Array();$scope.pagesList.push({id:0,name:'root'});$scope.pagesList=$scope.pagesList.concat(data['items']);});});function getItem(getTemplateValues)
{pagesRepository.getPage(id,function(data)
{$scope.item=data.page_data;if(data.page_data.type==='template'&&getTemplateValues){templatesRespository.getTemplateFields(data.page_data.template,function(data_sub)
{var i=0;data_sub.forEach(function(templateField)
{var fieldValue=_.findWhere(data.template_values,{field_name:templateField.full_name});if(fieldValue){data_sub[i++].fieldValue=_.findWhere(data.template_values,{field_name:templateField.full_name}).value;};});$scope.templateFields=data_sub;});};})}
function autoGenerateSlug()
{$scope.$watch("item.name",function(newValue){if($scope.editForm.slug.$pristine)
{$scope.item.slug=friendly_url(newValue);}});}
templatesRespository.getTemplateFiles(function(data)
{$scope.templateFiles=data;});templatesRespository.getTemplates(function(data)
{$scope.templates=data.items;});$scope.getTemplateFields=function()
{if($scope.item.type==='template'){templatesRespository.getTemplateFields($scope.item.template,function(data)
{$scope.templateFields=data;});};}
$scope.save=function(returnToList)
{if(!saveIsBuzy){saveIsBuzy=true;broadcast=false;$scope.alert='Sauvegarde ...';showAlert();if($scope.item.type==='file'){$scope.templateFields=false;};if(id!='new'&&($scope.item.parent_id!=$scope.item.cache.parent_id||$scope.item.weight!=$scope.item.cache.weight)){broadcast=true;};console.log($scope.item);pagesRepository.savePage($scope.item,$scope.templateFields,function(data)
{saveIsBuzy=false;if(returnToList&&data.errors.length===0){window.location.hash='/pages/pages';}
else if(id=='new'&&data.errors.length===0)
{window.location.hash='/pages/pages/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;if(data.error==0){$scope.item.version=data.version;getItem();if(broadcast){$rootScope.$broadcast('siteMapUpdatedByPageCtrl');};};showFadeAlert();}});};}
$scope.delete=function()
{if(confirm('Etes vous sur de vouloir supprimer la page "'+$scope.item.name+'" ?')){pagesRepository.deletePage($scope.item.id,function(data)
{window.location.hash='/pages/pages';});};}
if(id!='new'){$scope.$on('siteMapUpdatedBySiteMap',function(data){pagesRepository.getPageOrder($scope.item.id,function(pageOrder)
{if($scope.item.cache.parent_id!=pageOrder.parent_id){$scope.item.cache.parent_id=pageOrder.parent_id;$scope.item.parent_id=pageOrder.parent_id};if($scope.item.cache.weight!=pageOrder.weight){$scope.item.cache.weight=pageOrder.weight;$scope.item.weight=pageOrder.weight};});});getItem(true);}
else
{autoGenerateSlug();console.log($rootScope.newItem);if($scope.newItem){$scope.item=$rootScope.newItem;$scope.item.meta_keywords=new Array();$rootScope.newItem=undefined;}
else
{$scope.item={meta_keywords:new Array()};}}}
function TemplatesListCtrl($scope,$http,$injector)
{var config={section:"pages/templates",menu:'pages',getUrl:'/admin_pages/templates_list/',deleteUrl:'admin_pages/templates_delete'}
$scope.table=[{title:'Nom',param:'name'},];$scope.pageTitle='Templates';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function TemplatesEditCtrl($scope,$http,$routeParams,templatesRespository)
{init_page();$scope.section="pages/templates";menuControl('pages');var id=$routeParams.id;$scope.mode=id;function getItem()
{templatesRespository.getTemplate(id,function(data)
{$scope.item=data;})}
templatesRespository.getTemplateFiles(function(data)
{$scope.templateFiles=data;});$scope.aceConfig={useWrapMode:true,showGutter:true,theme:'twilight',mode:'html',onLoad:aceLoaded}
function aceLoaded(_editor)
{console.log(_editor);_editor.setReadOnly(true);ace.require("ace/ext/emmet");ace.require("ace/ext/language_tools");_editor.setOptions({enableBasicAutocompletion:true,enableEmmet:true,enableSnippets:true,});}
$scope.save=function(returnToList)
{$scope.alert='Sauvegarde';showAlert();templatesRespository.saveTemplate($scope.item,function(data)
{if(returnToList&&data.errors.length===0){window.location.hash='/pages/templates';}
else if(id=='new'&&data.errors.length===0)
{window.location.hash='/pages/templates/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;}
showFadeAlert();});}
$scope.delete=function()
{templatesRespository.deleteTemplete(id,function(data)
{window.location.hash=$scope.section;});}
if(id!='new'){getItem();};}admin.directive('pagesSiteMap',['pagesRepository',function(pagesRepository){return{scope:{currentId:"=current"},templateUrl:'/admin/view_loader/desktop/shared/widgets/tree',controller:function($rootScope,$scope,$element,$attrs,$transclude){$scope.smallSize='small-size';function languagesMap(languages)
{var result={}
for(var key in languages){result[key]={KeyName:key,LangName:languages[key]}}
return result;}
$scope.languages=languagesMap(globalVars.siteLanguages);$scope.treeCulture=globalVars.defaultLanguage;$scope.remove=function(scope){scope.remove();};$scope.toggle=function(scope){scope.toggle();};$scope.newSubItem=function(id){$rootScope.newItem={parent_id:id,lang:'fr'};window.location.hash='/pages/pages/edit/new';console.log(id);};$scope.getPage=function(id)
{window.location.hash='/pages/pages/edit/'+id;}
var getRootNodesScope=function(){return angular.element(document.getElementById("tree-root")).scope();};$scope.collapseAll=function(){var scope=getRootNodesScope();scope.collapseAll();};$scope.expandAll=function(){var scope=getRootNodesScope();scope.expandAll();};$scope.treeOptions={dropped:function(event){var data={},parentChildsList;try
{data.parent_id=event.dest.nodesScope.$nodeScope.$modelValue.id;}
catch(e)
{data.parent_id=0;}
try
{data.old_parent_id=event.source.nodesScope.$nodeScope.$modelValue.id;}
catch(e)
{data.old_parent_id=0;}
data.new_index=event.dest.index;parentChildsList=event.dest.nodesScope.$modelValue;data.item_id=parentChildsList[data.new_index].id;data.lang='fr';if(event.source.index!=data.new_index||data.parent_id!=data.old_parent_id){pagesRepository.reorder(data,function()
{$rootScope.$broadcast('siteMapUpdatedBySiteMap');});};return true;},};function getData()
{pagesRepository.siteMap($scope.treeCulture,function(data)
{$scope.data=data;})}
$scope.$watch('treeCulture',function(newValue)
{getData();});getData();$scope.$on('siteMapUpdatedByPageCtrl',function(){getData();});}};}]);admin.factory('templatesRespository',['$http',function($http){var templatesCache=new Array();return{getTemplate:function(id,callback)
{$http.get('/admin_pages/templates_details/'+id).success(function(data)
{callback(data);});},getTemplateFiles:function(callback)
{$http.get('/admin_pages/template_files_list').success(function(data)
{callback(data);})},getTemplates:function(callback)
{$http.get('./admin_pages/templates_list').success(function(data)
{callback(data);});},saveTemplate:function(data,callback)
{$http({url:'/admin_pages/templates_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},deleteTemplete:function(id,callback)
{$http.get('/admin_pages/templates_delete/'+id).success(function(data)
{callback(data);})},getTemplateFields:function(id,callback)
{$http.get('/admin_pages/templates_fields_list/'+id).success(function(data)
{callback(data);});}};}]);admin.factory('pagesRepository',['$http',function($http){return{getPage:function(id,callback)
{$http.get('/admin_pages/pages_details/'+id).success(function(data)
{callback(data);});},savePage:function(page_data,template_values,callback)
{var data={};data.page_data=page_data;if(page_data.type==='template'){data.template_values=template_values;};$http({url:'/admin_pages/page_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},deletePage:function(id,callback)
{$http.get('/admin_pages/pages_delete/'+id).success(function(data)
{callback(data);});},reorder:function(data,callback)
{$http({url:'/admin_pages/page_reorder',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){callback();console.log(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},getPageOrder:function(id,callback)
{$http.get('/admin_pages/get_page_order/'+id).success(function(data)
{console.log(data);callback(data);})},getPageList:function(lang,callback)
{$http.get('/admin_pages/pages_list/0/0/'+lang).success(function(data)
{console.log(data);callback(data);})},siteMap:function(lang,callback)
{$http.get('/admin_pages/site_map/'+lang).success(function(data)
{callback(data);});}};}]);function PortfolioListCtrl($scope,$http,$injector)
{var config={section:"portfolio/portfolios",menu:'portfolio',getUrl:'/admin_portfolio/portfolio_list/',deleteUrl:'admin_portfolio/delete/'}
$scope.table=[{title:'',param:'src',width:'60px'},{title:'Titre',param:'name',strong:true},{title:'Nombre d\éléments',param:'childs_count'}];$scope.pageTitle='Galleries';$scope.thumbPath='portfolio';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function PortfolioEditCtrl($scope,$http,$routeParams,porfolioCategoriesRepository,porfolioItemsRepository,tagsRespository){$scope.section="portfolio/portfolios";menuControl('portfolio');$scope.tinymceOptions=tinymceConfig;init_page();var id=$routeParams.id;$scope.mode=id;$scope.editHide=true;$scope.editShow=false;$scope.uploader={w:300,h:300,item_id:id,folder:'assets/images/portfolio/'+id+'/thumbs/',assetPath:'portfolio~'+id+'~thumbs',crop:1,uniqueName:true}
$scope.assetsList={folder:'assets/images/portfolio/'+id+'/',assetPath:'portfolio~'+id,parentIdentity:'portfolio_item'}
$scope.select2Tags={'multiple':true,'simple_tags':true,'tokenSeparators':[","],initSelection:function(element)
{console.log(this);}};tagsRespository.tagNamesList(function(data)
{$scope.select2Tags.tags=data;});porfolioCategoriesRepository.categoriesList(function(categories)
{console.log(categories);$scope.categories=categories.items;});$scope.createNewCategoty=function()
{$scope.alert='Création de la catégories';showAlert();porfolioCategoriesRepository.saveCategory($scope.newCategory,function(data)
{$scope.categories.push({id:data.id,name:data.name});$scope.alert=data.message;showFadeAlert();});}
var getTheItem=function(){porfolioItemsRepository.getItem(id,function(data)
{var temp={};angular.forEach(data.categories,function(category)
{temp[category.parent_id]=true;});data.categories=temp;$scope.item=data;});}
$scope.save=function(returnToList){$scope.alert='Sauvegarde…';showAlert();console.log($scope.item);porfolioItemsRepository.saveItem($scope.item,function(data)
{if(returnToList&&data.errors.length===0){window.location.hash='/portfolio/portfolios';}
else if(id==='new'&&data.errors.length===0)
{window.location.hash='/portfolio/portfolios/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;showFadeAlert();getTheItem();}});}
$scope.delete=function(){bootbox.confirm('Etes vous sur de vouloir supprimer cet élément ?',function(invoke)
{if(invoke){$http.get('/admin_portfolio/delete/'+id).success(function(data){window.location.hash='/portfolio/portfolios';});};});}
if($scope.mode!='new'){getTheItem();}
else{$scope.hideForNew=true;$scope.item={'meta_keywords':{},'categories':{}};}}
function PortfolioCategoriesCtrl($scope,$http,$injector)
{var config={section:"portfolio/categories",menu:'portfolio',getUrl:'/admin_portfolio/categories_list/',deleteUrl:'admin_portfolio/category_delete/'}
$scope.table=[{title:'Titre',param:'name_'+globalVars.defaultLanguage,strong:true},{title:'Ordre',param:'weight'},{title:'Nombre d\éléments',param:'childs_count'}];$scope.pageTitle='Catégories de porfolios';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function PortfolioCategoriesEditCtrl($scope,$http,$routeParams,porfolioCategoriesRepository,tagsRespository){menuControl('portfolio');$scope.backUrl='portfolio/categories/';init_page();var id=$routeParams.id;$scope.mode=id;$scope.select2Tags={'multiple':true,'simple_tags':true,'tokenSeparators':[","],initSelection:function(element)
{console.log(this);}};tagsRespository.tagNamesList(function(data)
{$scope.select2Tags.tags=data;});var getTheItem=function(){porfolioCategoriesRepository.getCategory(id,function(data)
{$scope.item=data;});}
$scope.save=function(returnToList){$scope.alert='Sauvegarde ...';showAlert();porfolioCategoriesRepository.saveCategory($scope.item,function(data)
{if(returnToList&&data.errors.length===0){window.location.hash='/portfolio/categories';}
else if(id==='new'&&data.errors.length===0)
{window.location.hash='/portfolio/categories/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;showFadeAlert();}});}
$scope.delete=function(){if(confirm('Etes vous sur de vouloir supprimer cette catégories ?'))
{porfolioCategoriesRepository.deleteCategory(id,function(data)
{window.location.hash='/portfolio/categories';});};}
if($scope.mode!='new'){getTheItem();}
else{$scope.hideForNew=true;$scope.item={meta_keywords:new Array()};}}
admin.factory('porfolioCategoriesRepository',['$http',function($http){var categoriesCache=false;return{categoriesList:function(callback)
{if(categoriesCache){callback(categoriesCache);};$http.get('/admin_portfolio/categories_list').success(function(data){callback(data);categoriesCache=data;});},getCategory:function(id,callback)
{$http.get('/admin_portfolio/category_details/'+id).success(function(data)
{callback(data);});},saveCategory:function(data,callback)
{$http({url:'/admin_portfolio/category_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},deleteCategory:function(id,callback)
{$http.get('/admin_portfolio/category_delete/'+id).success(function(data)
{callback(data);});}};}]);admin.factory('porfolioItemsRepository',['$http',function($http){return{getItem:function(id,callback)
{$http.get('/admin_portfolio/item_details/'+id).success(function(data)
{callback(data);});},saveItem:function(data,callback)
{$http({url:'/admin_portfolio/item_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},deleteItem:function(id,callback)
{$http.get('/admin_portfolio/item_delete/'+id).success(function(data)
{callback(data);});}};}]);function NewsCategoriesList($scope,$http,$injector)
{var config={section:"news/categories",menu:'news',getUrl:'/admin_news/categories_list/',deleteUrl:'admin_news/category_delete/',}
$scope.table=[{title:'Nom',param:'name'},{title:'Nbr de news',param:'childs_count'}];$scope.pageTitle='Catégories de news';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function NewsCategoriesEdit($scope,$http,$routeParams)
{$scope.section="news/categories";menuControl('news');var id=$routeParams.id
$scope.mode=id;var getThePage=function()
{$http.get('/admin_news/get_category/'+id).success(function(data){console.log(data);$scope.item=data.content_items;init_page();});}
var getTheItems=function(limit,offset)
{$http.get('/admin_news/category_childs/'+id+'/'+limit+'/'+offset).success(function(data){$scope.totalItems=data.total_items;$scope.childs=data.items;init_page();});}
$scope.currentPage=0;$scope.maxSize=5;$scope.itemPerPage=20;$scope.offset=0;$scope.setGetPage=function(pageNo){$scope.currentPage=pageNo;$scope.offset=$scope.currentPage*$scope.itemPerPage-$scope.itemPerPage;getTheItems($scope.itemPerPage,$scope.offset);};$scope.getView=function(id)
{window.location.hash='/news/edit/'+id;block();}
$scope.save=function(){$scope.alert="Sauvegarde";showAlert();$http({url:'/admin_news/category_edit',method:"POST",data:$scope.item,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(id=='new'&&data.errors.length===0){window.location.hash='/news/categories/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;showFadeAlert();}}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();console.log(data);});}
$scope.delete=function()
{$scope.alert='Supression';showAlert();$http.get('/admin_news/category_delete/'+id).success(function(data)
{window.location.hash='/news/categories';});}
getThePage();getTheItems($scope.itemPerPage,0);}
function NewsListCtrl($scope,$http,$injector)
{var config={section:"news",menu:'news',getUrl:'/admin_news/news_list/',deleteUrl:'admin_news/delete_news/',getCallBack:function(data)
{var i=0;angular.forEach($scope.items,function(item){if($scope.items[i].published_on==null){$scope.items[i].statut='warning'}
else if(Date.parse($scope.items[i].published_on)>Date.parse(data.today)){$scope.items[i].statut='info'}
else if(Date.parse($scope.items[i].archived_on)<=Date.parse(data.today)){$scope.items[i].statut='offline'}
else{$scope.items[i].statut='success'};i++;});}}
$scope.table=[{title:'Titre',param:'title'},{title:'Catégorie',param:'category_name'},{title:'Auteur',param:'created_by'}];$scope.pageTitle='News';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function EditNews($scope,$http,$routeParams,tagsRespository,newsCategoriesRepository){init_page();$scope.section="news";menuControl('news');var id=$routeParams.id;$scope.mode=id;$scope.tinymceOptions={plugins:["autolink link image","searchreplace visualblocks code fullscreen","table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image"}
$scope.uploader={w:200,h:200,item_id:0,folder:'assets/images/news/'+id+'/thumbs/',assetPath:'news~'+id+'~thumbs',crop:1,uniqueName:true}
$scope.select2Tags={'multiple':true,'simple_tags':true,'tokenSeparators':[","],initSelection:function(element)
{console.log(this);}};tagsRespository.tagNamesList(function(data)
{$scope.select2Tags.tags=data;});function getCatagoryData(categoryId)
{newsCategoriesRepository.GetItem(categoryId,function(data)
{$scope.uploader.h=data.thumb_h;$scope.uploader.w=data.thumb_w;})}
$scope.$watch('item.parent_id',function(newValue)
{getCatagoryData(newValue);});function getThePage(){$http.get('/admin_news/get_news/'+id).success(function(data){console.log(data);$scope.item=data.content_items;$scope.person=data.person_info;$scope.today=data.today;getCatagoryData(data.content_items.parent_id);formatStatut();init_page();});};function formatStatut()
{if($scope.item.published_on==null){$scope.statut='draft'}
else if(Date.parse($scope.item.published_on)>Date.parse($scope.today)){$scope.statut='pending'}
else if(Date.parse($scope.item.archived_on)<=Date.parse($scope.today)){$scope.statut='archived'}
else{$scope.statut='online'};}
function getCategories()
{$http.get('/admin_news/categories_list').success(function(data)
{$scope.categories=data.items;});}
getCategories();$scope.save=function(){if(id=='new'){$scope.item.created_by=globalVars.user_id;};console.log($scope.item);$http({url:'/admin_news/news_edit',method:"POST",data:$scope.item,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(id=='new'&&data.errors.length===0){window.location.hash='/news/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;showFadeAlert();formatStatut()}}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();});}
$scope.delete=function(){$http.get('/admin_news/delete/'+id).success(function(data){window.location.hash='/news/list';});}
$scope.pushOnline=function(){$http.get('/admin_news/push_online/'+id).success(function(data){$scope.alert="News mise en ligne.";showFadeAlert();$scope.item['published_on']=$scope.today;formatStatut();});}
$scope.pushOffline=function(){$http.get('/admin_news/push_offline/'+id).success(function(data){$scope.alert="News archivée.";showFadeAlert();$scope.item['archived_on']=$scope.today;formatStatut();});}
$('input').click(function($scope)
{$('.alert-container').fadeOut();});if(id!='new'){getThePage();}
else{setTimeout("$('form').formValidation();",10);$scope.hideForNew=true;}}admin.factory('newsCategoriesRepository',['$http',function($http){return{GetItem:function(id,callback)
{$http.get('/admin_news/get_category/'+id).success(function(data)
{callback(data.content_items);});},}}]);admin.factory('newsItemsRepository',['$http',function($http){return{GetItem:function(id,callback)
{$http.get('/admin_menus/item_details/'+id).success(function(data)
{callback(data);});},SaveItem:function(data,callback)
{$http({url:'/admin_menus/item_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},ReorderItem:function(data,callback)
{$http({url:'/admin_menus/item_reorder',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},DeleteItem:function(id,callback)
{$http.get('/admin_menus/item_delete/'+id).success(function(data)
{callback(data);});}}}]);function DashboardMasterListCtrl($scope,$http){menuControl('dashboard');function getVisits()
{$http.get('/admin_manager/day_visits').success(function(data){console.log(data);$scope.visitsNbr=parseInt(data);});}
function clockWidget()
{var date=new Date,seconds=date.getSeconds(),minutes=date.getMinutes(),hours=date.getHours();date.setDate(date.getDate());var monthNames=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Décembre"];var dayNames=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];$scope.clock={seconds:seconds<10?'0'+seconds:seconds,minutes:minutes<10?'0'+minutes:minutes,hours:hours,day:dayNames[date.getDay()],date:date.getDate(),month:monthNames[date.getMonth()],year:date.getFullYear(),transition:'no-transition'}
setInterval(function(){date=new Date;seconds=date.getSeconds();minutes=date.getMinutes();hours=date.getHours();$scope.$apply(function(){$scope.clock={seconds:seconds<10?'0'+seconds:seconds,minutes:minutes<10?'0'+minutes:minutes,hours:hours,day:dayNames[date.getDay()],date:date.getDate(),month:monthNames[date.getMonth()],year:date.getFullYear(),transition:'transition'}});},1000);}
setTimeout("init_page()",10);getVisits();dashboardRefresh=setInterval(function()
{$scope.$apply(function()
{getVisits();});},10000);clockWidget();}
admin.directive('gridWizard',function(){var instanceId=0;return{scope:{fieldValue:'=content'},controller:function($scope,$element,$attrs,$transclude){if(typeof $scope.fieldValue!='object'){$scope.fieldValue=new Array();};console.log(typeof $scope.fieldValue);$scope.uniqueId=instanceId++;$scope.tinymceOptions=tinymceConfig;$scope.aceLoaded=function(_editor)
{aceeditorConfig(_editor);};$scope.sortableOptions={selector:'.row-items',axis:'y',placeholder:"beingDragged",tolerance:'pointer',};$scope.sortableOptionsCols={selector:'.col-items',axis:'x',tolerance:'pointer'};$scope.uploader={w:0,h:0,item_id:0,folder:'assets/images/pages/',assetPath:'pages',crop:0,uniqueName:false}
$scope.safeImg=function(content,type)
{if(type=='img'){return content;};}
$scope.addRow=function(layout)
{var colNumber=layout.length,width=12/colNumber;var content=new Array();angular.forEach(layout,function(item){var itemContent;item=='text'?itemContent='<h1>Ici votre Second contenu</h1>':itemContent='';content.push({type:item,width:width,content:itemContent,cssClass:''});});$scope.fieldValue.push({cols:content});}
$scope.addCol=function(index,type)
{var colNumber=$scope.fieldValue[index].cols.length+1;if(colNumber>12){alert('Vous ne pouvez ajouter plus de 12 colonnes !');return false;};if(colNumber==5){colNumber=6};if(colNumber>6){colNumber=12};var width=12/colNumber;$scope.fieldValue[index].cols.push({type:type,width:width,content:'',cssClass:''});var i=0;angular.forEach($scope.fieldValue[index].cols,function(){$scope.fieldValue[index].cols[i].width=width;i++;});}
$scope.removeCol=function(parent,index)
{var temp=[],i=0;angular.forEach($scope.fieldValue[parent].cols,function(item)
{if(i!=index)temp.push(item);i++;});$scope.fieldValue[parent].cols=temp;var colNumber=$scope.fieldValue[parent].cols.length;if(colNumber==5){colNumber=6};if(colNumber>6){colNumber=12};var width=12/colNumber;i=0;angular.forEach($scope.fieldValue[parent].cols,function(){$scope.fieldValue[parent].cols[i].width=width;i++;});}
$scope.removeRow=function(index)
{var temp=[],i=0;angular.forEach($scope.fieldValue,function(item)
{if(i!=index)temp.push(item);i++;});$scope.fieldValue=temp;}
var editPane=new Array();$scope.editContent=function(parent,index)
{$scope.edit=angular.copy($scope.fieldValue[parent].cols[index]);editPane.parent=parent;editPane.index=index;$('#grid-content-edition-modal-'+$scope.uniqueId).modal().on('hidden.bs.modal',function(e){$scope.$apply(function(){$scope.edit=false;});});}
$scope.endEdit=function(){$('#grid-content-edition-modal-'+$scope.uniqueId).modal('hide');$scope.fieldValue[editPane.parent].cols[editPane.index]=angular.copy($scope.edit);$scope.edit=false;};$scope.moveCol=function(sens,index,parent)
{var temp=$scope.fieldValue[parent].cols[index],nbr=$scope.fieldValue[parent].cols.length;function goUp()
{if(index>0){$scope.fieldValue[parent].cols[index]=$scope.fieldValue[parent].cols[index-1];$scope.fieldValue[parent].cols[index-1]=temp;}}
function goDown()
{if(index<nbr-1){$scope.fieldValue[parent].cols[index]=$scope.fieldValue[parent].cols[index+1];$scope.fieldValue[parent].cols[index+1]=temp;}}
sens=='up'?goUp():goDown();}
$scope.redimCol=function(direction,sens,index,parent)
{console.log(parent);var factor,aside;sens=='plus'?factor=1:factor=-1;direction=='left'?aside=index-1:aside=index+1;if($scope.fieldValue[parent].cols[aside].width<=1){return false};$scope.fieldValue[parent].cols[index].width=$scope.fieldValue[parent].cols[index].width+factor;$scope.fieldValue[parent].cols[aside].width=$scope.fieldValue[parent].cols[aside].width-factor;}
$scope.moveRow=function(sens,index)
{var temp=$scope.fieldValue[index],nbr=$scope.fieldValue.length;console.log(nbr);function goUp()
{if(index>0){$scope.fieldValue[index]=$scope.fieldValue[index-1];$scope.fieldValue[index-1]=temp;}}
function goDown()
{if(index<nbr-1){$scope.fieldValue[index]=$scope.fieldValue[index+1];$scope.fieldValue[index+1]=temp;}}
sens=='up'?goUp():goDown();}
$scope.uploadObject=[];$scope.triggerUpload=function(index,parent)
{$scope.uploadObject.parent=parent;$scope.uploadObject.index=index;console.log(parent);$('#fileUploader').click();}
$scope.uploaderClass=function(content)
{var cssClass;content==''?cssClass='empty':cssClass='full';return cssClass;}
$scope.uploadFile=function(files){var fd=new FormData();fd.append("file",files[0]);fd.append("name",files[0].name);fd.append('id',0);fd.append("folder",'assets/images/pages/');fd.append("minW",0);fd.append("minH",0);fd.append("crop",0);var uploadUrl='/file_upload/image/';var xhr=new XMLHttpRequest()
xhr.upload.addEventListener("progress",uploadProgress,false)
xhr.addEventListener("load",uploadComplete,false)
xhr.addEventListener("error",uploadFailed,false)
xhr.addEventListener("abort",uploadCanceled,false)
xhr.open("POST",uploadUrl)
xhr.send(fd)}
function uploadProgress(evt){$('#progress-bar').fadeIn(200);$scope.$apply(function(){if(evt.lengthComputable){$scope.progress=Math.round(evt.loaded*100 / evt.total)}else{$scope.progress='unable to compute'}})}
function uploadComplete(evt){response=JSON.parse(evt.target.responseText);console.log(response);console.log($scope.fieldValue[$scope.uploadObject.parent].cols[$scope.uploadObject.index].content);if(response.error===0){$scope.$apply(function(){$scope.fieldValue[$scope.uploadObject.parent].cols[$scope.uploadObject.index].content='/assets/images/pages/'+response.newName;});}
else
{$('#upload-output').empty().prepend('<p class="label label-important">'+response.message+'</p>')}
$('#progress-bar').delay(1000).fadeOut(2000);}
function uploadFailed(evt){alert("There was an error attempting to upload the file.")}
function uploadCanceled(evt){alert("The upload has been canceled by the user or the browser dropped the connection.")}},restrict:'A',templateUrl:'/admin/view_loader/desktop/pages/widgets/grid_editor',};});function BannerZoneListCtrl($scope,$http,$injector)
{var config={section:"banner-zones",menu:'banners',getUrl:'/admin_banners/bannerzone_list/',deleteUrl:'admin_banners/delete_bannerzone/'}
$scope.table=[{title:'Nom',param:'name'},{title:'Nombre de bannières',param:'childs_count'}];$scope.pageTitle='Zones de bannière';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function BannerZoneEditCtrl($scope,$http,$routeParams){$scope.section="banners";$scope.backUrl="banner-zones/list";menuControl('banners');$scope.tinymceOptions={plugins:["autolink link image","searchreplace visualblocks code fullscreen","table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image"}
init_page();$scope.getView=function(id)
{window.location.hash='/banner-zones/banner/'+id;block();}
var id=$routeParams.id;$scope.mode=id;$scope.editHide=true;$scope.editShow=false;$scope.assetsList={assetPath:'banners~'+id,editPath:'banner-zones/banner/',controllerPath:'admin_banners/update_banner'}
var getTheItem=function(){$http.get('/admin_banners/get_item/'+id).success(function(data){$scope.item=data.content_items;init_page();});}
var getTheMedia=function(){$http.get('/admin_banners/banner_list/'+id).success(function(data){$scope.assets=data;});}
$scope.save=function(returnToParent){$scope.alert='Sauvegarde…';showAlert();$http({url:'/admin_banners/update_bannerzone',method:"POST",data:$scope.item,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(returnToParent&&data.errors.length===0){window.location.hash='/banner-zones/list';}
else if(id==='new'&&data.errors.length===0)
{window.location.hash='/banner-zones/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;showFadeAlert();}}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();});}
$scope.delete=function(){$http.get('/admin_banners/delete/'+id).success(function(data){window.location.hash='/banner-zones/list';});}
if($scope.mode!='new'){getTheItem();getTheMedia();}
else{$scope.hideForNew=true;$scope.item={};}}
function BannerEditCtrl($scope,$http,$routeParams){menuControl('banners');$scope.section='banners/banners';$scope.backUrl='banner-zones/list'
$scope.tinymceOptions={plugins:["autolink link image","searchreplace visualblocks code fullscreen","table contextmenu paste"],toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image"}
var id=$routeParams.id,parent_id=$routeParams['parent_id'];$scope.mode=id;if(id==='new'){$scope.uploader={w:0,h:0,item_id:0,folder:'assets/images/banners/'+parent_id+'/',assetPath:'banners~'+parent_id,crop:1,uniqueName:true}};var getTheParent=function(){$http.get('/admin_banners/get_item/'+$scope.item.parent_id).success(function(data){$scope.parent=data.content_items;$scope.uploader.w=$scope.parent.width;$scope.uploader.h=$scope.parent.height;});}
var getTheItem=function(){$http.get('/admin_banners/get_banner/'+id).success(function(data){$scope.item=data.content_items[0];$scope.backUrl="banner-zones/edit/"+$scope.item.parent_id;$scope.uploader={w:0,h:0,item_id:0,folder:'assets/images/banners/'+$scope.item.parent_id+'/',assetPath:'banners~'+$scope.item.parent_id,crop:1,uniqueName:true}
init_page();getTheParent();});}
$scope.save=function(returnToParent){$scope.alert='Sauvegarde…';showAlert();if(id==='new'){$scope.item.parent_id=parent_id;}
console.log($scope.item);$http({url:'/admin_banners/update_banner',method:"POST",data:$scope.item,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(returnToParent&&data.errors.length===0){window.location.hash='/banner-zones/edit/'+$scope.item.parent_id;}
else if(id==='new'&&data.errors.length===0)
{window.location.hash='/banner-zones/banner/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;showFadeAlert();}}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();});}
$scope.delete=function(){$http.get('/admin_banners/delete_banner/'+id).success(function(data){window.location.hash='#/banner-zones/edit/'+$scope.item.parent_id;});}
if(id!='new'){getTheItem();}
else
{$scope.item={parent_id:parent_id}
init_page();getTheParent();$scope.backUrl="banner-zones/edit/"+$scope.item.parent_id;}}
admin.factory('menusMenusRepository',['$http',function($http){return{GetItem:function(id,callback)
{$http.get('/admin_menus/menu_details/'+id).success(function(data)
{callback(data);});},SaveItem:function(data,callback)
{$http({url:'/admin_menus/menu_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},DeleteItem:function(id,callback)
{$http.get('/admin_menus/menu_delete/'+id).success(function(data)
{callback(data);});}}}]);admin.factory('menusItemsRepository',['$http',function($http){return{GetItemsTree:function(menuId,callback)
{$http.get('/admin_menus/items_list/'+menuId).success(function(data)
{callback(data);});},GetItem:function(id,callback)
{$http.get('/admin_menus/item_details/'+id).success(function(data)
{callback(data);});},SaveItem:function(data,callback)
{$http({url:'/admin_menus/item_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},ReorderItem:function(data,callback)
{$http({url:'/admin_menus/item_reorder',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},DeleteItem:function(id,callback)
{$http.get('/admin_menus/item_delete/'+id).success(function(data)
{callback(data);});}}}]);function MenusListCtrl($scope,$http,$injector)
{var config={section:"pages/menus",menu:'pages',getUrl:'/admin_menus/menus_list/',deleteUrl:'admin_menus/menu_delete/',getCallBack:function(data)
{var i=0;angular.forEach($scope.items,function(item){$scope.items[i].statut=item.active==1?'success':'warning';if(item.suspend==1)$scope.items[i].statut='error';i++;});}}
$scope.table=[{title:'Nom',param:'name',strong:true}];$scope.pageTitle='Utilisateurs';$scope.thumbPath='users';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function MenuEditCtrl($scope,$routeParams,menusMenusRepository)
{menuControl('pages');$scope.backUrl="pages/menus";var id=$routeParams.id
$scope.mode=id;var getThePage=function(getTheChilds)
{menusMenusRepository.GetItem(id,function(data)
{$scope.item=data;init_page();if(getTheChilds){};});}
$scope.save=function(returnToList)
{$scope.alert='Sauvegarde';showAlert();menusMenusRepository.SaveItem($scope.item,function(data)
{if(returnToList&&data.errors.length===0){window.location.hash=$scope.backUrl;}
else if(id=='new'&&data.errors.length===0)
{window.location.hash=$scope.backUrl+'/edit/'+data.id;}
else
{$scope.alert=data.message;$scope.errors=data.errors;if(data.errors.length===0)getThePage();}
showFadeAlert();});}
$scope.delete=function()
{menusMenusRepository.DeleteItem(id,function(data)
{window.location.hash=$scope.backUrl;});}
if(id==='new'){$scope.item={name:'',cssclass:''}
init_page();}
else
{getThePage();}}
admin.directive('menusItemsPanel',['menusItemsRepository','UrlService',function(menusItemsRepository,urlService){return{scope:{menuId:'=menuId'},controller:function($scope,$element,$attrs,$transclude){var runing=false;$scope.urlOptions=[];function getItem(id)
{menusItemsRepository.GetItem(id,function(data)
{data.target=data.target==1?true:false;$scope.item=data;})}
$scope.getItem=function(id){getItem(id)};function resetItem(parentId)
{$scope.item={menu_id:$scope.menuId,parent_id:parentId?parentId:null}
$scope.urlOptions=[];$scope.itemForm.$setPristine();}
function getItemList()
{menusItemsRepository.GetItemsTree($scope.menuId,function(data)
{$scope.itemsTree=data;});}
getItemList();$scope.resetItem=function(){resetItem()};$scope.save=function(endEdit)
{if(runing)return false;runing=true;if(!$scope.item.menu_id){$scope.item.menu_id=$scope.menuId;};console.log('run');menusItemsRepository.SaveItem($scope.item,function(data)
{runing=false;if(data.errors.length===0){endEdit?resetItem():getItem(data.id);getItemList();};});}
$scope.newSubItem=function(parentId)
{resetItem(parentId);}
$scope.deleteItem=function(id,reset)
{bootbox.confirm('Etes vous sur de vouloir supprimer cet élément ?',function(invoke)
{if(invoke)
{menusItemsRepository.DeleteItem(id,function()
{getItemList();if(reset)resetItem();});}});}
$scope.$watch('item.module',function(newValue)
{$scope.urlOptions.UrlFunctions=urlService.GetFunctions(newValue);});$scope.$watch('item.function',function(newValue)
{if($scope.item){urlService.GetElements($scope.item.module,newValue,function(data)
{console.log(data);$scope.urlOptions.UrlElements=data;});};});$scope.treeOptions={dropped:function(event){var data={},parentChildsList;try
{data.parent_id=event.dest.nodesScope.$nodeScope.$modelValue.id;}
catch(e)
{data.parent_id=0;}
try
{data.old_parent_id=event.source.nodesScope.$nodeScope.$modelValue.id;}
catch(e)
{data.old_parent_id=0;}
data.new_index=event.dest.index;parentChildsList=event.dest.nodesScope.$modelValue;data.id=parentChildsList[data.new_index].id;data.manu_id=$scope.menuId;if(event.source.index!=data.new_index||data.parent_id!=data.old_parent_id){menusItemsRepository.ReorderItem(data,function()
{});};return true;},}},restrict:'A',templateUrl:'/admin/view_loader/desktop/menus/items/edit',replace:false,};}]);var notifications=angular.module('notifications',['ngSanitize']);notifications.controller('notificationsCtrl',function($scope,$http)
{var title=document.title,notificationsNbr=0;$scope.notificationsNbr=notificationsNbr;console.log('notifications');var getData=function(){$http.get('/admin/notifications').success(function(data){$scope.items=data;$scope.notificationsNbr=0;angular.forEach($scope.items,function(item){if(item.is_unread===1){$scope.notificationsNbr=$scope.notificationsNbr+1;};});$scope.notificationsNbr>0?document.title=title+' ('+$scope.notificationsNbr+')':document.title=title;if(notificationsNbr<$scope.notificationsNbr){glow();};notificationsNbr=$scope.notificationsNbr;});}
getData();function glow()
{$('#notifications').addClass('animate');setTimeout(function(){$('#notifications').removeClass('animate');},2000);}
setInterval(function(){$scope.$apply(function(){getData();});},10000);});var assetsManager=angular.module('assetsManager',['ui.bootstrap']);assetsManager.controller('assetsCtrl',function($scope,$http)
{var currentPath='',id;$scope.backPath='coucou';var getData=function(){$scope.edited=null;$http({url:'/admin_assets/assets_list/',method:"POST",data:currentPath,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){$scope.items=[];id=0;angular.forEach(data.content_items,function(item){var type;if(item.lastIndexOf('.')<0){type='folder';}
else
{type='file';}
var selected='',path='assets/'+currentPath+item;$scope.items.push({'id':id++,'file_name':item,'file_type':type,'path':path,'selected':selected});});});}
getData();$scope.storePath=function(path)
{prompt('Veuillez copier l\'url suivante',path);}
$scope.getBack=function()
{var backPath='',temp=currentPath.split('/'),lenght=temp.length,i=0;while(i<lenght-2)
{backPath+=temp[i++]+'/';}
currentPath=backPath;getData();}
$scope.getFolder=function(folder,absolute)
{absolute?currentPath=folder:currentPath+=folder+'/';getData();}
$scope.filesSelected=false;$scope.selectItem=function(id)
{var i=0;angular.forEach($scope.items,function(item)
{if(item.id==id){item.selected=="selected"?$scope.items[i].selected='':$scope.items[i].selected='selected';};i++;})
var count=0;angular.forEach($scope.items,function(item){if(item.selected=='selected')++count;});count>0?$scope.filesSelected=true:$scope.filesSelected=false;}
$scope.toggleView=function(item,e)
{e.stopPropagation();if($scope.edited==null){$scope.edited=item;}
else
{$scope.edited=$scope.edited.id===item.id?null:item;}
$scope.editing=false;}
$scope.toggleEdit=function()
{$scope.editing=true;$scope.edited.new_file_name=$scope.edited.file_name;}
$scope.saveEdit={nameSave:function()
{$scope.edited.new_path='assets/'+currentPath;$http({url:'/admin_assets/rename/',method:"POST",data:$scope.edited,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(data.error==0){$scope.edited.file_name=data.new_file_name;$scope.edited.path=$scope.edited.new_path+data.new_file_name;$scope.edited.new_file_name=null;$scope.edited.new_path=null;$scope.editing=false;}
else{alert(data.message);}});},nameCancel:function()
{$scope.edited.new_file_name=null;$scope.edited.new_path=null;$scope.editing=false;}}
$scope.getDetail=function(item)
{if($scope.details){if($scope.details.id!=item.id){$scope.details=item;}
else
{$scope.details=null;}}
else
{$scope.details=item;}
console.log($scope.details);}
$scope.addFolder=function()
{var name=prompt('Veuillez entrer un nom de dossier');if(name){var path='assets/'+currentPath+name;$http({url:'/admin_assets/create_folder/',method:"POST",data:path,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(data.error==0)
{$scope.items.push({'id':id++,'file_name':name,'file_type':'folder','path':'assets/'+currentPath+name,'selected':''});}
else
{alert(data.message);}});$scope.filesSelected=false;};}
$scope.deleteFiles=function()
{var count=0;angular.forEach($scope.items,function(item){if(item.selected=='selected')++count;});var plural;count==1?plural='':plural='s';var message='Vous aller supprimer '+count+' élément'+plural+'.';if(confirm(message)){angular.forEach($scope.items,function(item){if(item.selected=='selected')deleteFile(item.file_name);});};$scope.filesSelected=false;}
function deleteFile(file_name)
{var file=currentPath+file_name;$http({url:'/admin_assets/delete_file/',method:"POST",data:file,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){if(data.error==0)
{var temp=[],i=0;angular.forEach($scope.items,function(item){if(item.file_name!=file_name)temp.push(item);});$scope.items=temp;}
else
{alert('Une erreur est survenue');}});}
var drop=document.querySelector('#assets-list');drop.addEventListener("dragover",function(e){e=e||event;e.preventDefault();},false);drop.addEventListener("drop",function(e){e=e||event;e.preventDefault();$(drop).removeClass('drop-hover');$scope.uploadFiles(event.dataTransfer.files);},false);window.addEventListener("dragover",function(e){e=e||event;e.preventDefault();$(drop).addClass('drop-hover');},false);window.addEventListener("dragleave",function(e){e=e||event;e.preventDefault();$(drop).removeClass('drop-hover');},false);window.addEventListener("drop",function(e){e=e||event;e.preventDefault();$(drop).removeClass('drop-hover');},false);$scope.triggerUpload=function()
{$('#assets-fileUploader').click();}
$scope.uploadFiles=function(files){var i=0;angular.forEach(files,function(file)
{var fd=new FormData(),thisId=id,index=0;fd.append("file",files[i++]);fd.append("name",file.name);fd.append('id',0);fd.append("folder",'assets/'+currentPath);fd.append("minW",0);fd.append("minH",0);fd.append("crop",0);var uploadUrl='/file_upload/file/';var xhr=new XMLHttpRequest()
xhr.upload.addEventListener("progress",uploadProgress,false)
xhr.addEventListener("load",uploadComplete,false)
xhr.addEventListener("error",uploadFailed,false)
xhr.addEventListener("abort",uploadCanceled,false)
xhr.open("POST",uploadUrl)
xhr.send(fd);$scope.items.push({'id':id++,'file_name':file.name,'file_type':'file','path':'assets/'+currentPath+file.name,'selected':''});var stopper=true,counter=0;while(stopper)
{$scope.items[counter++].id==thisId?stopper=false:index=counter;}
function uploadProgress(evt){$scope.$apply(function(){$scope.items[index].progressStatut='loading';if(evt.lengthComputable){$scope.items[index].progress=Math.round(evt.loaded*100 / evt.total);}else{$scope.items[index].progress='unable to compute'}})}
var tempSrc;function uploadComplete(evt){console.log(evt.target.responseText);response=JSON.parse(evt.target.responseText);if(response.error==0){$scope.$apply(function(){$scope.items[index].progress=100;$scope.items[index].progressStatut='complete';$scope.items[index].file_name=response.newName;$scope.items[index].path='assets/'+currentPath+response.newName;});}
else
{alert(response.message);$scope.$apply(function()
{$scope.items[index].progressStatut='error';});}
$scope.alert=response.message;showFadeAlert();$('#progress-bar').delay(1000).fadeOut(2000);}
function uploadFailed(evt){alert("There was an error attempting to upload the file.");$scope.items[index].progressStatut='error';}
function uploadCanceled(evt){alert("The upload has been canceled by the user or the browser dropped the connection.")
$scope.items[index].progressStatut='error';}});}});admin.directive('assetsList',function()
{return{controller:function($scope,$element,$attrs,$transclude,$http){$scope.getView=function(id)
{window.location.hash='/'+$scope.assetsList.editPath+id;block();}
$scope.sortableOptions={stop:function(e,ui){var i=0;angular.forEach($scope.assets,function(item)
{if(i!=item.weight)
{$scope.assets[i].weight=i;updateItem($scope.assets[i]);}
i++;})},axis:'y',placeholder:"beingDragged",tolerance:'pointer',};function updateItem(object)
{$http({url:$scope.assetsList.controllerPath,method:'POST',data:object,headers:{'Content-Type':'application/json'}});}},templateUrl:'/admin/view_loader/'+templateDir+'/assets/widgets/assets_list',};});admin.directive('assetsListModal',function()
{var widgetUniqueId=0;return{controller:function($scope,$element,$attrs,$transclude,$http,$modal,assetsRepository,_){assetsRepository.AssetsByParent($scope.item.id,$scope.assetsList.parentIdentity,function(data)
{$scope.assets=data;});$scope.getView=function(id)
{window.location.hash='/'+$scope.assetsList.editPath+id;block();}
$scope.openModal=function(id)
{var editedItem;if(id){editedItem=angular.copy(_.findWhere($scope.assets,{id:id}));}
else
{editedItem={parent_id:$scope.item.id,parent_identity:$scope.assetsList.parentIdentity}}
var modalInstance=$modal.open({templateUrl:'/admin/view_loader/'+templateDir+'/assets/widgets/asset_modal',windowClass:'modal-full',controller:AssetModalCrl,size:'lg',resolve:{item:function(){return editedItem;},uploadConfig:function()
{return{folder:$scope.assetsList.folder,assetPath:$scope.assetsList.assetPath,}}}});modalInstance.result.then(function(editedItem){var exist=false,i=0;angular.forEach($scope.assets,function(asset)
{if(asset.id===editedItem.id){$scope.assets[i]=editedItem;exist=true;};i++;});if(!exist){$scope.assets.push(editedItem);};});}
$scope.sortableOptions={stop:function(e,ui){var i=0;angular.forEach($scope.assets,function(item)
{$scope.assets[i].weight=i+1;if(item.id===ui.item.scope().asset.id){assetsRepository.EditAsset($scope.assets[i],function(data){});};i++;});console.log($scope.assets);},axis:'y',placeholder:"beingDragged",tolerance:'pointer',};function updateItem(object)
{$http({url:'/admin_assets/asset_edit',method:'POST',data:object,headers:{'Content-Type':'application/json'}});}},templateUrl:'/admin/view_loader/'+templateDir+'/assets/widgets/assets_list_modal',};});function AssetModalCrl($scope,$modalInstance,item,uploadConfig,assetsRepository)
{$scope.item=item;$scope.uploader={w:0,h:0,item_id:0,folder:uploadConfig.folder,assetPath:uploadConfig.assetPath,crop:0,uniqueName:true}
$scope.ok=function(){console.log($scope.item);assetsRepository.EditAsset($scope.item,function(data)
{if(data.error>0){$scope.errors=data.errors;}
else
{$scope.item.id=data.id;$modalInstance.close($scope.item);}});};$scope.cancel=function(){$modalInstance.dismiss('cancel');};}
admin.directive('imageUpload',function(){var widgetUniqueId=0;return{scope:{config:'=config',model:'=item'},controller:function($scope,$element,$attrs,$transclude,$http){$scope.uploaderId=widgetUniqueId++;$scope.triggerUpload=function()
{$('#fileUploader-'+$scope.uploaderId).click();}
$scope.uploaderClass=function(content)
{var cssClass;(!content||content=='')?cssClass='empty':cssClass='full';return cssClass;}
$scope.reset=function()
{$scope.model='';}
setTimeout(function()
{var drop=document.getElementById('fileDropper-'+$scope.uploaderId);drop.addEventListener("dragover",function(e){e=e||event;e.preventDefault();},false);drop.addEventListener("drop",function(e){e=e||event;e.preventDefault();$(drop).removeClass('drop-hover');uploadFiles(event.dataTransfer.files);},false);window.addEventListener("dragover",function(e){e=e||event;e.preventDefault();$(drop).addClass('drop-hover');},false);window.addEventListener("dragleave",function(e){e=e||event;e.preventDefault();$(drop).removeClass('drop-hover');},false);window.addEventListener("drop",function(e){e=e||event;e.preventDefault();$(drop).removeClass('drop-hover');},false);},20);function uploadFiles(files){var fd=new FormData(),fileName=$scope.config.uniqueName?setGUID():files[0].name;fd.append("file",files[0]);fd.append("name",fileName);fd.append('id',$scope.item_id);fd.append("folder",$scope.config.folder);fd.append("minW",$scope.config.w);fd.append("minH",$scope.config.h);fd.append("crop",$scope.config.crop);var uploadUrl='/file_upload/image/';var xhr=new XMLHttpRequest()
xhr.upload.addEventListener("progress",uploadProgress,false)
xhr.addEventListener("load",uploadComplete,false)
xhr.addEventListener("error",uploadFailed,false)
xhr.addEventListener("abort",uploadCanceled,false)
xhr.open("POST",uploadUrl)
xhr.send(fd);$('#progress-bar').show();$scope.alert='Chargement : 0%';showAlert();}
function uploadProgress(evt){$scope.$apply(function(){if(evt.lengthComputable){$scope.alert='Chargement : '+Math.round(evt.loaded*100 / evt.total)+'%';}else{$scope.alerts='Chargement'}})}
var tempSrc;function uploadComplete(evt){response=JSON.parse(evt.target.responseText);console.log(response);if(response.error==0){if(response.crop==1){tempSrc=response.newName;$('#crop-container').html('<img id="thumb" src="/'+globalVars.app_url+'assets/temp/'+response.newName+'" alt="" />')
$('#crop-popup').modal();$('#crop-container').find('img').Jcrop({onSelect:setCoords,onChange:setCoords,aspectRatio:$scope.config.w / $scope.config.h,minSize:[$scope.config.w,$scope.config.h],setSelect:[0,0,$scope.config.w,$scope.config.h]});$scope.crop_data={w:$scope.config.w,h:$scope.config.h,x:0,y:0,maxW:$scope.config.w,maxH:$scope.config.h,src:'/assets/temp/'+response.newName,newSrc:$scope.config.folder+'/'+response.newName,folder:$scope.config.folder};}
else
{$scope.$apply(function(){$scope.model=response.newName;});}}
else
{alert(response.message);};$scope.$apply(function()
{$scope.alert=response.message;});console.log($scope.alert);showFadeAlert();}
function uploadFailed(evt){alert("There was an error attempting to upload the file.")}
function uploadCanceled(evt){alert("The upload has been canceled by the user or the browser dropped the connection.")}
function setCoords(c)
{$scope.crop_data={w:c.w,h:c.h,x:c.x,y:c.y,maxW:$scope.config.w,maxH:$scope.config.h,src:'/assets/temp/'+tempSrc,newSrc:$scope.config.folder+'/'+tempSrc,folder:$scope.config.folder};}
$scope.crop=function()
{$http({url:'/index.php/file_upload/crop_image',method:"POST",data:$scope.crop_data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);hideModal();$('#crop-popup').modal('hide')
$scope.model=response.newName;showFadeAlert();}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();});}
$scope.uploadFile=function(files){uploadFiles(files);}},templateUrl:'/admin/view_loader/'+templateDir+'/assets/images/image_upload',};});admin.factory('assetsRepository',['$http',function($http){return{EditAsset:function(data,callback)
{$http({url:'/admin_assets/asset_edit',method:"POST",data:data,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);callback(data);}).error(function(data,status,headers,config){alert='Une erreure est survenue.';});},AssetsByParent:function(parentId,parentIdentity,callback)
{$http.get('/admin_assets/assets_images_by_parent/'+parentId+'/'+parentIdentity).success(function(data)
{callback(data);});}};}]);function CarteCategoriesListCtrl($scope,$http,$injector)
{var config={section:"carte",menu:'carte',getUrl:'/admin_carte/categories_list/',deleteUrl:'admin_carte/category_delete',}
$scope.table=[{title:'Nom',param:'name'},{title:'Nbr de plats',param:'childs_count'}];$scope.pageTitle='Catégories de news';$injector.invoke(ItemList,this,{$scope:$scope,$http:$http,config:config});}
function CarteCategorieEditCtrl($scope,$http,$routeParams)
{$scope.section="carte/edit";menuControl('carte');var id=$routeParams.id;$scope.mode=id;var getThePage=function(){$http.get('/admin_carte/category_details/'+id).success(function(data){$scope.item=data.items[0];console.log(data);init_page();});};if(id=='new')
{init_page();}
else
{getThePage();}
$scope.delete=function()
{if(confirm('Supprimer cette catégories et tout ses éléments ?')){$http.get('/admin_carte/category_delete/'+id).success(function(data){window.location.hash='/carte/list';});};}
$scope.save=function()
{$http({url:'/admin_carte/category_edit',method:"POST",data:$scope.item,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){console.log(data);if(id=='new'){window.location.hash='/carte/edit/'+data.id;}
else
{$scope.alert='Modification enregistrées !';showFadeAlert();}}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';showFadeAlert();});}}
admin.directive('carteItems',function(){return{controller:function($scope,$element,$attrs,$transclude,$http,$routeParams){var id=$routeParams.id;function getCarteItems()
{$http.get('/admin_carte/items_list/'+id).success(function(data)
{var i=0;data=data.items;angular.forEach(data,function(element){data[i].weight=parseInt(data[i].weight);data[i].id=parseInt(data[i].id);i++;});$scope.carteItems=data;console.log(data);});}
$scope.sortableOptions={stop:function(e,ui){var i=0;angular.forEach($scope.carteItems,function(item)
{if(i!=item.weight)
{$scope.carteItems[i].weight=i;updateItem($scope.carteItems[i]);}
i++;})},axis:'y',placeholder:"beingDragged",tolerance:'pointer',};$scope.addCarteItem=function()
{console.log('ok');$scope.newCarteItem.parent_id=id;$scope.newCarteItem.weight=$scope.carteItems.length;$http({url:'/admin_carte/item_edit',method:"POST",data:$scope.newCarteItem,headers:{'Content-Type':'application/json'}}).success(function(data,status,headers,config){$scope.carteItems.push({id:data.item.id,name:data.item.name,desc:data.item.desc,price:data.item.price,weight:data.item.weight});$scope.alert="Modifications enregistrées";showFadeAlert();}).error(function(data,status,headers,config){$scope.alert='Une erreure est survenue.';console.log(data);showFadeAlert();});$scope.newCarteItem=null;$scope.editModeOpen=false;}
$scope.switchEditMode=function(object)
{$scope.editMode=true;$scope.editModeOpen=true;$scope.editedItem=clone(object);}
$scope.updateCarteItem=function(object)
{$scope.alert='Sauvegarde';showAlert();$http({url:'/admin_carte/item_edit',method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){var i=0;angular.forEach($scope.carteItems,function(item){if(item.id===$scope.editedItem.id){$scope.carteItems[i]=$scope.editedItem};i++;});$scope.editMode=false;$scope.editModeOpen=false;$scope.alert="Modifications enregistrées";showFadeAlert();})}
$scope.deleteCarteItem=function()
{$http({url:'/admin_carte/item_delete/'+$scope.editedItem.id,method:'POST',data:$scope.editedItem,headers:{'Content-Type':'application/json'}}).success(function(data){console.log(data);if(data.error==0){$scope.editMode=false;$scope.editModeOpen=false;$scope.alert=data.message;showFadeAlert();var temp=[],i=0;angular.forEach($scope.carteItems,function(item){if(item.weight>$scope.editedItem.weight)
{item.weight=item.weight-1;updateItem(item);}
if(item.id!=$scope.editedItem.id)temp.push(item);});$scope.carteItems=temp;};})}
function updateItem(object)
{$http({url:'/admin_carte/item_edit',method:'POST',data:object,headers:{'Content-Type':'application/json'}});}
$scope.reorder=function(object,sens)
{var currentWeight=object.weight,newWeight,i=0,modified=0;function setMinus()
{angular.forEach($scope.carteItems,function(item){if(item.weight===currentWeight+1){$scope.carteItems[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.carteItems[i].weight=currentWeight+1;modified=1};i++;if(modified===1){updateItem(item)};});}
function setPlus()
{angular.forEach($scope.carteItems,function(item){if(item.weight===currentWeight-1){$scope.carteItems[i].weight=currentWeight;modified=1};if(item.id===object.id){$scope.carteItems[i].weight=currentWeight-1;modified=1};i++;if(modified===1){updateItem(item)};});}
sens=='plus'?setMinus():setPlus();}
getCarteItems();},templateUrl:'/admin/view_loader/'+templateDir+'/carte/widgets/carte_items',};});